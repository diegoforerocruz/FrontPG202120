{"version":3,"sources":["data/nacimientovars.js","components/groupdetail.js","components/groupDetailSidebar.js","data/enviromentvarsdata.js","data/analisisvarsdata.js","components/groupManage.js","services/variablesUtils.js","components/variables/VariableFilter.js","components/variables/VariablesList.js","components/variables/VariableEdit.js","components/variableManage.js","services/temasUtils.js","components/temas/TemasList.js","components/TemasManage.js","components/sidebar/groupform.js","services/gruposUtils.js","components/sidebar/groupsItem.js","components/sidebar/sidebarContent.js","components/tree/ConditionPanelCrearGrupo.js","components/tree/createGroupTree.js","components/tree/faseSettingsModal.js","components/tree/TreeClass.js","components/tree/tree.js","components/tree/GrupoTreeDetail.js","components/inicio.js","assets/index.less","App.js","index.js"],"names":["nacimientoVars","value","label","csvData","Groupdetail","props","useState","groupInfo","undefined","Object","keys","info","headers","setheaders","groupsInfo","setgroupsInfo","dataToGraph","setdataToGraph","dataToGraphlvl2","setdataToGraphlvl2","labelsTG","setlabelsTG","selectedBar","setselectedBar","analisisVars","setanalisisVars","dataToDownload","setdataToDownload","resumenDownload","setresumenDownload","additionalVars","setadditionalVars","avtg","setavtg","handleBarSelection","etapa","grupo","arr","nombre","formatjson","grupos","grupos2","map","item","includes","labels","push","name","arrporgrupo","jsonobj","x","y","count","group","formatjsonlevel2","backresponse","etapasGrupos","datos","sort","defaultArr","i","index","j","length","etapanum","split","v","additional","list","summary","alert","handleGroupHistory","a","fetch","join","response","json","jsonData","console","error","message","handleAnalisisVars","header","startsWith","myArray","handleDeleteGroup","method","window","location","reload","useEffect","className","visibility","numberLimit","av","theme","VictoryTheme","material","domainPadding","height","width","style","tickLabels","angle","dependentAxis","title","centerTitle","orientation","gutter","border","stroke","colorScale","data","horizontal","offset","dtg","barWidth","events","target","eventHandlers","onClick","mutation","fill","datum","isMulti","options","defaultValue","classNamePrefix","onChange","values","selectItem","type","id","filename","fixLabelOverlap","tickCount","eval","labelComponent","addv","avl","artg","avli","entries","entry","parseFloat","barRatio","GroupDetailSidebar","sidebarOpen","setsidebarOpen","groupDetail","setGroupDetail","onSetSidebarOpen","open","handleUpdate","cambio1","cambio2","document","getElementById","etapas","aux","calculateDetail","sidebar","scope","element","min","max","xmlns","viewBox","fillRule","d","onSetOpen","styles","background","pullRight","envaroptions","analisisvars","populationList","tipo","populationVarList","standardPopulationVarList","analisisList","analisisVarList","standardAnalisisVarList","GroupManage","setGrupos","grupoClicked","setgrupoClicked","selectValue","setSelectValue","inputCatFields","setInputCatFields","setCalculatedCluster","handleChange","getnumfieldsdata","down","up","parseInt","jobj","variable","limiteinf","limitesup","igual","field","ng","cNum","variablesanalisisarr","postbody","nombregrupo","variables","analisis","clusterNum","body","JSON","stringify","getGruposCluster","htmlFor","placeholder","vname","temp","find","isClearable","valor","handleChangeCat","inputId","tabIndex","pvariable","indexOf","handleVarAddingPopulation","arr2","handleVarDeletingPopulation","handleVarAddingAnalisis","handleVarDeletingAnalisis","API_URL","ALL_URL","getVariables","then","res","updateVariable","nombre_variable","status","catch","log","ok","Promise","reject","VariableFilter","text","tiempo","filterData","setFilterData","filt","textoCond","f","toLowerCase","nombre_real","unidad","etiqueta","nombre_general","tipoCond","tiempoCond","evento","evento_inicial","evento_final","reales","newArr","assign","rta","copia","filter","setVariables","s","filtradas","onSubmit","o","initialValues","handleSubmit","errors","setFieldValue","Form","noValidate","Row","Group","as","controlId","Col","sm","Control","onKeyPress","event","key","Label","column","Check","checked","VariablesList","clon","titl","clon2","r","criteria","reduce","acc","currentValue","groupBy","hasOwnProperty","etap","g","t","Container","fluid","md","Accordion","val","Item","eventKey","Header","Body","Table","bordered","hover","Button","VariableEdit","toString","etiquetas","setEtiquetas","significados","setSignificados","valor_db","valor_traducido","sigact","setSigAct","modifySignificado","sig","modifySignificadoActual","getOptionsEtapas","defaultVal","selectvalue","pName","Select","selected","enableReinitialize","acumulado","splice","removeSignificado","et","Alert","variant","removeEtiqueta","tag","span","dir","unSelectItem","handleButtonClick","VariableManage","selectedItem","setSelectedItem","hide","setHide","setAux","getTemas","TemasList","temas","setTemas","res2","TemasManage","colourOptions","originalState","fullList","standardVars","Groupform","fList","setFList","handleVarAdding","handleVarDeleting","CLUSTERALL_URL","CREATE_URL","BINS_URL","bins","grupoescogido","getGrupos","deleteGrupo","gId","gID","deleteGrupoCluster","getBins","conditions","createGroup","GroupsItem","setSelected","selectedEdit","removeGroupFromnTree","groupsCluster","setGroupsCluster","deleted","removeGroupFromDatabase","eliminarFunc","handleShow","handleClick","SidebarContent","grupos_cluster","removeFromOriginalList","ConditionPanelCrearGrupo","Range","createSliderWithTooltip","Slider","getSliders","nombre_final","etapa_final","data_real","lissta","allowCross","disabled","step","onAfterChange","size","getInputText","p","sigs","listaCondiciones","seleccionado","p2","found","transformToSelect","isDisabled","c","CreateGroupTree","handleClose","setShow","show","Modal","onHide","closeButton","Title","request","datasource","estadisticas","conteo","percentage","toFixed","required","Footer","FaseSettingsModal","setListaOpciones","changeSelect","fase","estructura_grupo","changeEstructuraGrupo","changeTipoDivision","fases","tipodivision","setFases","ltemp","chosen","limit","resta","obj","numerogrupo","numero_bins","estructura_grupos","defaultChecked","changeBins","foo","changeRange","variable_real","buildArbol","TreeClass","root","this","tipo_arbol","node","condition","action","children","lista","findChildren","uid","n","oculto","_children","child","cleanTree","temprta","getNodesInLevel","Tree","d3ToPng","require","flag","listaTrees","setListaTrees","listaTreesC","setListaTreesC","customStyles","control","provided","state","borderColor","minHeight","boxShadow","isFocused","valueContainer","padding","input","margin","indicatorSeparator","display","indicatorsContainer","customStylesEtapas","fase0","setFase0","lista_etapas","showFaseSettings","setShowFaseSettings","canvas","useRef","canvasDownload","geteventosTemporales","updateFase","convertToTree","parent","meaning","parse","cleanRequest","Date","now","Math","random","substr","color","floor","traduccion","getColor","convertConditionsToRequest","condiciones_previas","source","pFase","pVariable","pEtapa","tapas","variables_real","clickMinus","hideChildren","redrawTree","addGroup","selectedGroup","significado","clickCancel","deleteNode","graphDownload","rot","svgid","highlight","marginLeft","xScale","yScale","descXScale","class_name","depthScale","dx","dy","treeLink","d3","tre","nodeSize","each","depth","x0","Infinity","x1","svg","current","append","attr","selectAll","enter","desc","links","descendants","nodeEnter","on","graph","select","remove","h","getRoot","recursiveBins","numFaseActual","pBins","pVar","pTipo","pGrupoNodoPadre","pEstructuraGrupo","pDataSource","pPadre","pIndex","pRoot","pTipoArbol","varObject","listaNewNodos","nodo","tempRoots","addChildren","nextFase","faseFound","tempArr","faseComienzo","numFaseComienzo","slice","tArr","gr","indx","gr_item2","gr_item","refRoot","hojas","hoja","fase1temp","refHoja","scale","format","quality","download","ignore","cssinline","fileData","downloadSVG","typr","newFase","addFase","ref","GrupoTreeDetail","condiciones","Inicio","setState","setDeleted","getEtapa","transformToSelectEtapas","App","to","exact","path","component","ReactDOM","render","StrictMode"],"mappings":"gHAAA,kCAAO,IAAMA,EAAiB,CAC5B,CACEC,MAAO,UACPC,MAAO,cAET,CACED,MAAO,WACPC,MAAO,QAET,CACED,MAAO,YACPC,MAAO,SAET,CACED,MAAO,SACPC,MAAO,4BAET,CACED,MAAO,iBACPC,MAAO,kBAET,CACED,MAAO,sBACPC,MAAO,uBAET,CACED,MAAO,wBACPC,MAAO,yBAET,CACED,MAAO,YACPC,MAAO,aAET,CACED,MAAO,SACPC,MAAO,UAET,CACED,MAAO,aACPC,MAAO,cAET,CACED,MAAO,qBACPC,MAAO,wBAET,CACED,MAAO,oBACPC,MAAO,iCAET,CACED,MAAO,WACPC,MAAO,QAET,CACED,MAAO,aACPC,MAAO,cAET,CACED,MAAO,cACPC,MAAO,eAET,CACED,MAAO,YACPC,MAAO,oBAET,CACED,MAAO,YACPC,MAAO,oBAET,CACED,MAAO,WACPC,MAAO,4BAET,CACED,MAAO,KACPC,MAAO,wBAET,CACED,MAAO,YACPC,MAAO,wCAET,CACED,MAAO,sBACPC,MAAO,wCAET,CACED,MAAO,YACPC,MAAO,oBAET,CACED,MAAO,cACPC,MAAO,iBAET,CACED,MAAO,YACPC,MAAO,kBAET,CACED,MAAO,eACPC,MAAO,uBAET,CACED,MAAO,cACPC,MAAO,uDAET,CACED,MAAO,WACPC,MAAO,kCAET,CACED,MAAO,UACPC,MAAO,mCAET,CACED,MAAO,cACPC,MAAO,8BAET,CACED,MAAO,UACPC,MAAO,uCAET,CACED,MAAO,eACPC,MAAO,uCAET,CACED,MAAO,aACPC,MAAO,UAET,CACED,MAAO,MACPC,MAAO,oBAET,CACED,MAAO,SACPC,MAAO,uB,q1ECxHLC,QAAU,CACd,CAAC,YAAa,WAAY,SAC1B,CAAC,QAAS,OAAQ,qBAClB,CAAC,OAAQ,QAAS,qBAClB,CAAC,QAAS,UAAW,sBAGjBC,YAAc,SAAdA,YAAeC,OACnB,cAA8BC,oDACT,MAAnBD,MAAME,gBAAwCC,GAAnBH,MAAME,UAC7BE,OAAOC,KAAKL,MAAME,UAAUI,KAAK,IACjC,IAHN,2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O,wCAET,CACEC,MAAO,QACPD,MAAO,SAET,CACEC,MAAO,cACPD,MAAO,eAET,CACEC,MAAO,SACPD,MAAO,UAET,CACEC,MAAO,YACPD,MAAO,aAET,CACEC,MAAO,mBACPD,MAAO,oBAET,CACEC,MAAO,OACPD,MAAO,QAET,CACEC,MAAO,qCACPD,MAAO,sCAET,CACEC,MAAO,cACPD,MAAO,eAET,CACEC,MAAO,4BACPD,MAAO,6BAET,CACEC,MAAO,uCACPD,MAAO,wCAET,CACEC,MAAO,uBACPD,MAAO,wBAET,CACEC,MAAO,eACPD,MAAO,gBAET,CACEC,MAAO,kBACPD,MAAO,mBAET,CACEC,MAAO,2BACPD,MAAO,4BAET,CACEC,MAAO,wBACPD,MAAO,yBAET,CACEC,MAAO,mCACPD,MAAO,qC,OC3EP+K,EAAc,YFRY,CAC5B,CACE9K,MAAO,sBACPD,MAAO,kBACPgL,KAAM,GAER,CACE/K,MAAO,mBACPD,MAAO,mBACPgL,KAAM,GAER,CACE/K,MAAO,oBACPD,MAAO,uBACPgL,KAAM,GAER,CACE/K,MAAO,6BACPD,MAAO,4BACPgL,KAAM,GAER,CACE/K,MAAO,oBACPD,MAAO,uBACPgL,KAAM,GAER,CACE/K,MAAO,6BACPD,MAAO,4BACPgL,KAAM,GAER,CACE/K,MAAO,kBACPD,MAAO,qBACPgL,KAAM,GAER,CACE/K,MAAO,qBACPD,MAAO,wBACPgL,KAAM,GAER,CACE/K,MAAO,gDACPD,MAAO,yBACPgL,KAAM,GAER,CACE/K,MAAO,wBACPD,MAAO,mBACPgL,KAAM,GAER,CACE/K,MAAO,mBACPD,MAAO,sBACPgL,KAAM,GAER,CACE/K,MAAO,uBACPD,MAAO,uBACPgL,KAAM,GAER,CACE/K,MAAO,mBACPD,MAAO,eACPgL,KAAM,GAER,CACE/K,MAAO,oBACPD,MAAO,gBACPgL,KAAM,GAER,CACE/K,MAAO,iBACPD,MAAO,eACPgL,KAAM,GAER,CACE/K,MAAO,kBACPD,MAAO,gBACPgL,KAAM,GAER,CACE/K,MAAO,gDACPD,MAAO,oBACPgL,KAAM,GAER,CACE/K,MAAO,qBACPD,MAAO,YACPgL,KAAM,GAER,CACE/K,MAAO,0BACPD,MAAO,cACPgL,KAAM,GAER,CACE/K,MAAO,4BACPD,MAAO,wBACPgL,KAAM,GAER,CACE/K,MAAO,4BACPD,MAAO,wBACPgL,KAAM,GAER,CACE/K,MAAO,eACPD,MAAO,iBACPgL,KAAM,GAER,CACE/K,MAAO,2BACPD,MAAO,aACPgL,KAAM,GAER,CACE/K,MAAO,mBACPD,MAAO,SACPgL,KAAM,GAER,CACE/K,MAAO,oCACPD,MAAO,eACPgL,KAAM,GAER,CACE/K,MAAO,sBACPD,MAAO,aACPgL,KAAM,GAER,CACE/K,MAAO,2BACPD,MAAO,kBACPgL,KAAM,GAER,CACE/K,MAAO,iCACPD,MAAO,cACPgL,KAAM,GAER,CACE/K,MAAO,6BACPD,MAAO,gBACPgL,KAAM,GAER,CACE/K,MAAO,0BACPD,MAAO,eACPgL,KAAM,GAER,CACE/K,MAAO,0BACPD,MAAO,eACPgL,KAAM,GAER,CACE/K,MAAO,8CACPD,MAAO,gBACPgL,KAAM,GAER,CACE/K,MAAO,yCACPD,MAAO,SACPgL,KAAM,GAER,CACE/K,MAAO,2BACPD,MAAO,oBACPgL,KAAM,GAER,CACE/K,MAAO,gCACPD,MAAO,yBACPgL,KAAM,KErKNC,EAAiB,YAAOF,GACxBG,EAA4B,GAC5BC,EAAY,YAAOL,GACnBM,EAAe,YAAOD,GACtBE,EAA0B,GAsoBfC,EApoBK,WAClB,MAA4BjL,mBAAS,IAArC,mBAAOkC,EAAP,KAAegJ,EAAf,KACA,EAAwClL,mBAAS,MAAjD,mBAAOmL,EAAP,KAAqBC,EAArB,KACA,EAAsCpL,mBAAS,MAA/C,mBAAOqL,EAAP,KAAoBC,EAApB,KACA,EAA4CtL,mBAAS,IAArD,mBAAOuL,EAAP,KAAuBC,EAAvB,KACA,EAAkDxL,mBAAS,IAA3D,mBAA0ByL,GAA1B,WAEMC,EAAe,SAAC/L,GACpB2L,EAAe3L,IAmHXgM,EAAgB,uCAAG,0CAAAzH,EAAA,6DACnBnC,EAAM,GACV8I,EAA0BzI,KAAI,SAACC,GAC7B,IAAIuJ,EACAC,EACJ,GAAiB,GAAbxJ,EAAKsI,KAAW,EAClBiB,EAAOE,SACLxC,SAASC,eAAT,oBAAqClH,EAAKzC,QAASD,SAEzCiM,IACVA,EAAO,OAGTC,EAAKC,SAASxC,SAASC,eAAT,oBAAqClH,EAAKzC,QAASD,SAEvDkM,IACRA,EAAK,MAGP,IAAIE,EAAO,CACTC,SAAU3J,EAAK1C,MACfsM,UAAWL,EACXM,UAAWL,EACXM,MAAO,KACPxB,KAAM,GAEE,MAANkB,GAAsB,MAARD,GAChB7J,EAAIS,KAAKuJ,OAIfR,EAAenJ,KAAI,SAACgK,GAClBrK,EAAIS,KAAK4J,MAGD,KADNC,EAAK/C,SAASC,eAAe,WAAW5J,SAE1C0M,EAAK,oBAIK,KADRC,EAAOhD,SAASC,eAAe,uBAAuB5J,SAExD2M,EAAO,KAELC,EAAuB,GAC3BvB,EAAwB5I,KAAI,SAACC,GAC3BkK,EAAqB/J,KAAKH,EAAK1C,UAE7B6M,EAAW,CACbC,YAAaJ,EACbK,UAAW3K,EACX4K,SAAU,CACRC,WAAYd,SAASQ,GACrBI,UAAWH,IAIf3B,EAAiB,YAAOF,GACxBG,EAA4B,GAC5BW,EAAkB,IA1DK,UA4DfqB,EAAOL,EA5DQ,UA6DErI,MACrB,wDACA,CACEa,OAAQ,OACR1E,QAAS,CAAE,eAAgB,oBAC3BuM,KAAMC,KAAKC,UAAUF,KAlEJ,eA6DfxI,EA7De,iBAqEEA,EAASC,OArEX,QAqEfC,EArEe,OAuErBkH,EAAqB,YAAIlH,IAEzByI,IACAhJ,MAAM,2CA1Ee,mDA4ErBQ,QAAQC,MAAM,KAAIC,SA5EG,2DAAH,qDAgFhBsI,EAAgB,uCAAG,8BAAA9I,EAAA,+EAEEC,MACrB,4DAHmB,cAEfE,EAFe,gBAKEA,EAASC,OALX,OAKfC,EALe,OAOrB2G,EAAU,YAAI3G,EAAQ,QAPD,kDASrBC,QAAQC,MAAM,KAAIC,SATG,0DAAH,qDAgBtB,OAHAU,qBAAU,WACR4H,MACC,IAED,sBAAK3H,UAAU,YAAf,UACE,qBAAKA,UAAU,oCAAf,SACE,sBAAKA,UAAU,YAAf,UACE,sBAAKA,UAAU,YAAf,UACE,oBAAIA,UAAU,QAAd,oBACA,wBACEwC,KAAK,SACLxC,UAAU,wBACV6B,QAAS,WACPkE,EAAgB,OAJpB,sBAUF,qBAAK/F,UAAU,iBAAf,SACGnD,EAAOE,KAAI,SAACN,GACX,OACE,qBAAKuD,UAAU,wBAAf,SACE,qBAAKA,UAAU,MAAf,SACE,wBACEA,UAAU,6BACV6B,QAAS,WACPkE,EAAgBtJ,IAHpB,SAMGA,EAAME,YAR+BF,EAAME,kBAiB5D,qBAAKqD,UAAU,wBAAf,SACE,qBAAKA,UAAU,YAAf,SACmB,MAAhB8F,EAEC,gCACE,6CACA,iCACE,sBAAK9F,UAAU,WAAf,UACE,uBAAO4H,QAAQ,UAAU5H,UAAU,uBAAnC,6BAGA,qBAAKA,UAAU,SAAf,SACE,uBACEwC,KAAK,OACLxC,UAAU,eACVyC,GAAG,UACHoF,YAAY,kCAIlB,uBACA,gCACE,wDACA,sBAAK7H,UAAU,MAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,wBACEwC,KAAK,SACLxC,UAAU,iBACV,iBAAe,QACf,iBAAe,6BAJjB,wBASF,qBAAKA,UAAU,SAAf,SACE,wBACEwC,KAAK,SACLxC,UAAU,kBACV,iBAAe,QACf,iBAAe,0BAJjB,2BAUJ,8BACGwF,EAA0BzI,KAAI,SAAC+K,GAC9B,GAAkB,GAAdA,EAAMxC,KACR,OACE,sBAAKtF,UAAU,OAAf,UACE,8BACE,6BAAK8H,EAAMvN,UAEb,sBAAKyF,UAAU,MAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,mBAAGA,UAAU,eAAb,sBAEF,qBAAKA,UAAU,SAAf,SACE,uBACEwC,KAAK,SACLC,GAAE,oBAAeqF,EAAMvN,OACvByF,UAAU,eACV,mBAAiB,iBAGrB,qBAAKA,UAAU,SAAf,SACE,mBAAGA,UAAU,eAAb,sBAEF,qBAAKA,UAAU,SAAf,SACE,uBACEwC,KAAK,SACLC,GAAE,oBAAeqF,EAAMvN,OACvByF,UAAU,eACV,mBAAiB,oBAIvB,yBA5ByB8H,EAAMvN,OAgCnC,IAAIwN,EAAO5C,EAAa6C,MACtB,SAACxD,GAAD,OAAaA,EAAQ7H,QAAUmL,EAAMxN,SAEvC,OACE,sBAAK0F,UAAU,OAAf,UACE,8BACE,6BAAK8H,EAAMvN,UAEb,cAAC,IAAD,CACE0N,aAAa,EACb5F,SAAU,SAAC/H,IA/Uf,SAAC8C,EAAM9C,GAC7B,IAMI4N,EANAxL,EAAM,GACVwJ,EAAenJ,KAAI,SAACgK,GACdA,EAAMJ,UAAYvJ,GACpBV,EAAIS,KAAK4J,MAKXmB,EADW,MAAT5N,EACM,KAEAA,EAAMA,MAEhB6L,EAAkB,GAAD,OACZzJ,EADY,CAEf,CACEiK,SAAUvJ,EACVwJ,UAAW,KACXC,UAAW,KACXC,MAAOoB,EACP5C,KAAM,MA4TkB6C,CAAgBL,EAAMxN,MAAOA,IAE/B,kBAAgB,aAChB8N,QAAQ,qBACRhL,KAAK,kBACL8E,QAAS6F,EAAK7F,UAEhB,yBAdyB4F,EAAMvN,eAqB3C,uBACA,gCACE,sDACA,sBAAKyF,UAAU,MAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,wBACEwC,KAAK,SACLxC,UAAU,iBACV,iBAAe,QACf,iBAAe,2BAJjB,wBASF,qBAAKA,UAAU,SAAf,SACE,wBACEwC,KAAK,SACLxC,UAAU,kBACV,iBAAe,QACf,iBAAe,wBAJjB,2BAUJ,sBAAKA,UAAU,WAAf,UACE,qBAAKA,UAAU,QAAf,SACE,6BACG2F,EAAwB5I,KAAI,SAAC+K,GAC5B,OACE,oBAEErF,GAAE,2BAAsBqF,EAAMvN,OAC9ByF,UAAU,mBAHZ,SAKG8H,EAAMvN,OALT,uBACuBuN,EAAMvN,eAUrC,qBAAKyF,UAAU,QAAf,SACE,sBAAKA,UAAU,MAAf,UACE,uBACE4H,QAAQ,sBACR5H,UAAU,uBAFZ,mCAMA,qBAAKA,UAAU,QAAf,SACE,uBACEwC,KAAK,SACLxC,UAAU,eACVyC,GAAG,qCAOf,wBACED,KAAK,SACLxC,UAAU,kBACV6B,QAAS,WACPyE,KAJJ,+BAUF,cAAC,IAAD,CAAa1L,UAAWkL,EAAc7F,WAAY,WAElD,0BAIF,cAAC,IAAD,CAAarF,UAAWkL,EAAc7F,WAAY,SAUxD,qBACED,UAAU,aACVyC,GAAG,yBACH4F,SAAS,KACT,kBAAgB,8BAChB,cAAY,OALd,SAOE,qBAAKrI,UAAU,eAAf,SACE,sBAAKA,UAAU,gBAAf,UACE,sBAAKA,UAAU,eAAf,UACE,oBAAIA,UAAU,cAAcyC,GAAG,8BAA/B,+BAGA,wBACED,KAAK,SACLxC,UAAU,YACV,kBAAgB,QAChB,aAAW,aAGf,qBAAKA,UAAU,aAAf,SACE,cAAC,IAAD,CACEiI,aAAa,EACb5F,SAAU,SAAC/H,GACT+L,EAAa/L,IAEf,kBAAgB,aAChB8N,QAAQ,qBACRhL,KAAK,kBACL8E,QAASqD,EACT9C,GAAG,6BAGP,qBAAKzC,UAAU,eAAf,SACE,wBACEwC,KAAK,SACL,kBAAgB,QAChBxC,UAAU,kBACV6B,QAAS,YAjcW,SAACyG,GACjC,GAAiB,MAAbA,EAAmB,CACrB,IAAIpK,EACJqH,EAAkBxI,KAAI,SAACC,GACjBsL,EAAUhO,OAAS0C,EAAK1C,QAC1BkL,EAA0BrI,KAAKmL,GAC/BpK,EAAQqH,EAAkBgD,QAAQD,GAClCrC,EAAe,UAInB,IADA,IAAIvJ,EAAM,GACDuB,EAAI,EAAGA,EAAIsH,EAAkBnH,OAAQH,IACxCA,GAAKC,GACPxB,EAAIS,KAAKoI,EAAkBtH,IAG/BsH,EAAoB7I,GAkbR8L,CAA0BxC,IAL9B,8BAeR,qBACEhG,UAAU,aACVyC,GAAG,4BACH4F,SAAS,KACT,kBAAgB,iCAChB,cAAY,OALd,SAOE,qBAAKrI,UAAU,eAAf,SACE,sBAAKA,UAAU,gBAAf,UACE,sBAAKA,UAAU,eAAf,UACE,oBAAIA,UAAU,cAAcyC,GAAG,iCAA/B,8BAGA,wBACED,KAAK,SACLxC,UAAU,YACV,kBAAgB,QAChB,aAAW,aAGf,qBAAKA,UAAU,aAAf,SACE,cAAC,IAAD,CACEiI,aAAa,EACb5F,SAAU,SAAC/H,GACT+L,EAAa/L,IAEf,kBAAgB,aAChB8N,QAAQ,qBACRhL,KAAK,kBACL8E,QAASsD,MAGb,qBAAKxF,UAAU,eAAf,SACE,wBACEwC,KAAK,SACL,kBAAgB,QAChBxC,UAAU,kBACV6B,QAAS,YA7da,SAACyG,GACnC,GAAiB,MAAbA,EAAmB,CACrB,IAOIpK,EAPAuK,EAAO,GACXvC,EAAenJ,KAAI,SAACgK,GACdA,EAAMJ,UAAY2B,EAAU/N,OAC9BkO,EAAKtL,KAAK4J,MAGdZ,EAAkBsC,GAElBjD,EAA0BzI,KAAI,SAACC,GACzBsL,EAAUhO,OAAS0C,EAAK1C,QAC1BiL,EAAkBpI,KAAKmL,GACvBpK,EAAQsH,EAA0B+C,QAAQD,GAC1CrC,EAAe,UAInB,IADA,IAAIvJ,EAAM,GACDuB,EAAI,EAAGA,EAAIuH,EAA0BpH,OAAQH,IAChDA,GAAKC,GACPxB,EAAIS,KAAKqI,EAA0BvH,IAGvCuH,EAA4B9I,GAuchBgM,CAA4B1C,IALhC,8BAeR,qBACEhG,UAAU,aACVyC,GAAG,uBACH4F,SAAS,KACT,kBAAgB,4BAChB,cAAY,OALd,SAOE,qBAAKrI,UAAU,eAAf,SACE,sBAAKA,UAAU,gBAAf,UACE,sBAAKA,UAAU,eAAf,UACE,oBAAIA,UAAU,cAAcyC,GAAG,4BAA/B,+BAGA,wBACED,KAAK,SACLxC,UAAU,YACV,kBAAgB,QAChB,aAAW,aAGf,qBAAKA,UAAU,aAAf,SACE,cAAC,IAAD,CACEiI,aAAa,EACb5F,SAAU,SAAC/H,GACT+L,EAAa/L,IAEf,kBAAgB,aAChB8N,QAAQ,qBACRhL,KAAK,kBACL8E,QAASwD,EACTjD,GAAG,2BAGP,qBAAKzC,UAAU,eAAf,SACE,wBACEwC,KAAK,SACL,kBAAgB,QAChBxC,UAAU,kBACV6B,QAAS,YAnfS,SAACyG,GAC/B,GAAiB,MAAbA,EAAmB,CACrB,IAAIpK,EACJwH,EAAgB3I,KAAI,SAACC,GACfsL,EAAUhO,OAAS0C,EAAK1C,QAC1BqL,EAAwBxI,KAAKmL,GAC7BpK,EAAQwH,EAAgB6C,QAAQD,GAChCrC,EAAe,UAInB,IADA,IAAIvJ,EAAM,GACDuB,EAAI,EAAGA,EAAIyH,EAAgBtH,OAAQH,IACtCA,GAAKC,GACPxB,EAAIS,KAAKuI,EAAgBzH,IAG7ByH,EAAkBhJ,GAoeNiM,CAAwB3C,IAL5B,8BAeR,qBACEhG,UAAU,aACVyC,GAAG,0BACH4F,SAAS,KACT,kBAAgB,+BAChB,cAAY,OALd,SAOE,qBAAKrI,UAAU,eAAf,SACE,sBAAKA,UAAU,gBAAf,UACE,sBAAKA,UAAU,eAAf,UACE,oBAAIA,UAAU,cAAcyC,GAAG,+BAA/B,8BAGA,wBACED,KAAK,SACLxC,UAAU,YACV,kBAAgB,QAChB,aAAW,aAGf,qBAAKA,UAAU,aAAf,SACE,cAAC,IAAD,CACEiI,aAAa,EACb5F,SAAU,SAAC/H,GACT+L,EAAa/L,IAEf,kBAAgB,aAChB8N,QAAQ,qBACRhL,KAAK,kBACL8E,QAASyD,MAGb,qBAAK3F,UAAU,eAAf,SACE,wBACEwC,KAAK,SACL,kBAAgB,QAChBxC,UAAU,kBACV6B,QAAS,YA/gBW,SAACyG,GACjC,GAAiB,MAAbA,EAAmB,CACrB,IAAIpK,EACJyH,EAAwB5I,KAAI,SAACC,GACvBsL,EAAUhO,OAAS0C,EAAK1C,QAC1BoL,EAAgBvI,KAAKmL,GACrBpK,EAAQyH,EAAwB4C,QAAQD,GACxCrC,EAAe,UAInB,IADA,IAAIvJ,EAAM,GACDuB,EAAI,EAAGA,EAAI0H,EAAwBvH,OAAQH,IAC9CA,GAAKC,GACPxB,EAAIS,KAAKwI,EAAwB1H,IAGrC0H,EAA0BjJ,GAggBdkM,CAA0B5C,IAL9B,kC,qECjoBR6C,EAAU,wCACVC,EAAO,UAAMD,EAAN,QAGAE,EAAY,uCAAG,sBAAAlK,EAAA,+EACnBC,MAAMgK,GAASE,MAAK,SAACC,GAC1B,OAAOA,EAAIhK,WAFa,2CAAH,qDAMZiK,EAAc,uCAAG,WAAO9L,EAAMoK,GAAb,SAAA3I,EAAA,+EACrBC,OATWqK,EASM/L,EATP,UAAwByL,EAAxB,mBAA0CM,IAS5B,CAC7BxJ,OAAQ,MACR1E,QAAS,CACP,eAAgB,oBAElBuM,KAAMC,KAAKC,UAAUF,KAEpBwB,KAAKI,GACLJ,MAAK,SAACC,GAAD,OAASA,EAAIhK,UAClBoK,OAAM,SAAUjK,GACfD,QAAQmK,IAAI,QAASlK,OAXG,iCARX,IAAC+J,IAQU,OAAH,wDAe3B,SAASC,EAAOpK,GACd,OAAIA,EAASuK,GACJvK,EAEFA,EAASC,OAAO+J,MAAK,SAACC,GAAD,OAASO,QAAQC,OAAOR,M,6BCkHvCS,EAtIQ,SAAChP,GAEpB,MAAoCC,mBAAS,CAACgP,KAAK,GAAGrE,KAAK,EAAEsE,OAAQ,KAArE,mBAAOC,EAAP,KAAmBC,EAAnB,KAGMC,EAAO,SAACjF,GACV,GAAGA,EAAE,CACL,IAAIkF,GAAY,EAChB,GAAuB,KAApBH,EAAWF,KAAY,CACtB,IAAIM,EAAIJ,EAAWF,KAAKO,cACxBF,EAAYlF,EAAEqF,YAAYrF,EAAEqF,YAAYD,cAAcjN,SAASgN,GAAYnF,EAAEsF,OAAQtF,EAAEsF,OAAOF,cAAcjN,SAASgN,GAAYnF,EAAEuF,SAASvF,EAAEuF,SAASH,cAAcjN,SAASgN,KAAYnF,EAAEwF,gBAAexF,EAAEwF,eAAeJ,cAAcjN,SAASgN,GAEvP,IAAIM,GAAW,EACQ,IAApBV,EAAWvE,OACViF,EAAW9D,SAAS3B,EAAEQ,QAAUmB,SAASoD,EAAWvE,OAExD,IAAIkF,GAAa,EAIjB,MAHyB,KAAtBX,EAAWD,SACVY,EAAa1F,EAAEtI,QAAUqN,EAAWD,QAAW9E,EAAE2F,SAAWZ,EAAWD,QAAU9E,EAAE4F,iBAAmBb,EAAWD,QAAU9E,EAAE6F,eAAiBd,EAAWD,QAEtJI,GAAaO,GAAYC,IAIpCzK,qBAAU,WACN,GAAGrF,EAAMkQ,OAAO,CAGZ,IAFA,IAAIC,EAAS/P,OAAOgQ,OAAO,GAAIpQ,EAAMkQ,QACjCG,EAAM,GACD9M,EAAI,EAAGA,EAAI4M,EAAOzM,OAAQH,IAAI,CACnC,IAAI+M,EAAQlQ,OAAOgQ,OAAOD,EAAO5M,GAAGqE,SACpC0I,EAAQA,EAAMC,OAAOlB,IACX3L,OAAS,IACfyM,EAAO5M,GAAGqE,OAAS0I,EACnBD,EAAI5N,KAAK0N,EAAO5M,KAGxBvD,EAAMwQ,cAAa,SAACC,GAAD,mBAAC,eAASA,GAAV,IAAYC,UAAUL,UAGjD,CAAClB,IAqBD,OACI,8BACI,cAAC,IAAD,CACIwB,SALS,SAAC/I,EAAOrE,EAAEqN,KAMnBC,cAAe,CACfjG,KAAM,GAHV,SAMG,gBA3BmBnB,EA2BhBqH,EAAH,EAAGA,aAAH,EAAiBnF,aAAjB,EAA+B/D,OAA/B,EAAuCmJ,OAAvC,EAA+CC,cAA/C,OACC,eAACC,EAAA,EAAD,CAAMC,YAAU,EAACP,SAAUG,EAA3B,UACI,cAACK,EAAA,EAAD,UACI,cAACF,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,8BAAhD,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAT,SACA,cAACP,EAAA,EAAKQ,QAAN,CACA3J,KAAK,OACLpF,KAAK,iBACLgP,WAAY,SAACC,GACS,UAAdA,EAAMC,KACNxC,GAAc,SAACqB,GAAD,mBAAC,eAASA,GAAV,IAAYxB,KAAK0C,EAAM1K,OAAOrH,YAGpDuN,YAAa,iBAIrB,cAACgE,EAAA,EAAD,UACI,eAACF,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,qBAAhD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,kBAGA,eAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,UACI,cAACP,EAAA,EAAKc,MAAN,CACAjK,KAAK,QACLjI,MAAM,gBACN6C,KAAK,OACLqF,GAAG,4BACHJ,SAAU,SAACyC,GACP3F,QAAQmK,IAAI,aACU,IAAnBxE,EAAEnD,OAAO+K,QACR5C,GAAc,SAACqB,GAAD,mBAAC,eAASA,GAAV,IAAY7F,KAAK,OAG/BwE,GAAc,SAACqB,GAAD,mBAAC,eAASA,GAAV,IAAY7F,KAAK,UAIvC,cAACqG,EAAA,EAAKc,MAAN,CACAjK,KAAK,QACLjI,MAAM,cACN6C,KAAK,OACLqF,GAAG,4BACHJ,SAAU,SAACyC,IACe,IAAnBA,EAAEnD,OAAO+K,QACR5C,GAAc,SAACqB,GAAD,mBAAC,eAASA,GAAV,IAAY7F,KAAK,OAG/BwE,GAAc,SAACqB,GAAD,mBAAC,eAASA,GAAV,IAAY7F,KAAK,kBAOnD,eAACuG,EAAA,EAAD,WACI,+CAnFU1H,EAoFYzJ,EAAMyJ,OAlF1C,cAAC,IAAD,CACE9B,SAAU,SAAC/H,GACPwP,GAAc,SAACqB,GAAD,mBAAC,eAASA,GAAV,IAAYvB,OAAOtP,EAAMA,YAE3C0F,UAAU,kBACViI,aAAa,EACb,kBAAgB,aAChBG,QAAQ,qBACRhL,KAAK,kBACLyK,YAAY,eACZ3F,QAASiC,iBC6ENwI,EApIO,SAACjS,GAEnB,MAAkCC,mBAAS,CAACiQ,OAAO,GAAGQ,UAAU,GAAGjH,OAAO,KAA1E,mBAAOkD,EAAP,KAAkB6D,EAAlB,KAgEA,OA9DAnL,qBAAU,WACN,GAAGrF,EAAM0J,KACF1J,EAAM0J,IAAI+F,YAAY,CACrB,IADqB,EACjByC,EAAOvF,EAAUuD,OADA,cAELgC,GAFK,IAErB,IAAI,EAAJ,qBACI,IADkB,IAAdC,EAAa,QACT1O,EAAE,EAAEA,EAAG0O,EAAKvK,OAAOlE,OAAQD,IAC/B,GAAI0O,EAAKvK,OAAOnE,GAAGgM,cAAczP,EAAM0J,IAAI+F,YAAY,CACnD0C,EAAKvK,OAAOnE,GAAKzD,EAAM0J,IACvB,OANS,8BAUrB,IAVqB,EAUjB0I,EAAQzF,EAAU+D,UAVD,cAWJ0B,GAXI,IAWrB,IAAI,EAAJ,qBACI,IADoB,IAAhBhM,EAAe,QACX7C,EAAE,EAAGA,EAAG6C,EAAMwB,OAAOlE,OAAQH,IACjC,GAAI6C,EAAMwB,OAAOrE,GAAGkM,cAAczP,EAAM0J,IAAI+F,YAAY,CACpDrJ,EAAMwB,OAAOrE,GAAKvD,EAAM0J,IACxB,OAfS,8BAmBrB8G,GAAa,SAACC,GAAD,mBAAC,eAASA,GAAV,IAAaC,UAAU0B,EAAMlC,OAAOgC,UAG3D,CAAClS,EAAM0J,MAaTrE,qBAAU,WACNgJ,IAAeC,MAAK,SAACC,GACjB,IAAI8D,EAbZ,SAAiBrQ,EAAKsQ,GAQtB,OAPmBtQ,EAAIuQ,QAAO,SAAUC,EAAKC,GAKzC,OAJKD,EAAIC,EAAaH,MAClBE,EAAIC,EAAaH,IAAa,IAElCE,EAAIC,EAAaH,IAAW7P,KAA5B,2BAAqCgQ,GAArC,IAAmD/P,KAAM+P,EAAY,eAAmB,IAAIA,EAAY,UACjGD,IACR,IAMaE,CAAQnE,EAAK,kBACjBvM,EAAM,GACV,IAAK,IAAI4P,KAAOS,EACRA,EAAEM,eAAef,IACrB5P,EAAIS,KAAM,CACN2D,MAAOwL,EAAIhK,OAAQyK,EAAET,KAG7B,IATyB,EASrBgB,EAAO,GATc,cAUXrE,GAVW,IAUzB,2BAAkB,CAAC,IAAVsE,EAAS,QACVA,EAAE9C,OACF6C,EAAKC,EAAE9C,QAAU8C,EAAE9C,OAEf8C,EAAE/Q,QACN8Q,EAAKC,EAAE/Q,OAAS+Q,EAAE/Q,QAfD,8BAkBzB0O,GAAa,SAACC,GAAD,mBAAC,eAASA,GAAV,IAAYP,OAAOlO,EAAI0O,UAAU1O,EAAIyH,OAAOrJ,OAAOC,KAAKuS,GAAMvQ,KAAI,SAAAyQ,GAC3E,MAAO,CAAElT,MAAOkT,EAAGjT,MAAOiT,gBAGpC,IAGE,qBAAKxN,UAAU,kBAAf,SACA,cAACyN,EAAA,EAAD,CAAWC,OAAK,EAAhB,SACI,eAAC7B,EAAA,EAAD,WACI,eAACI,EAAA,EAAD,CAAK0B,GAAI,EAAT,UACA,uBAAK,uBACL,oDACA,uBAAK,uBACD,cAACC,EAAA,EAAD,UAEAvG,EAAU+D,UAAUrO,KAChB,SAAA8Q,GACA,OAAO,eAACD,EAAA,EAAUE,KAAX,CAAgBC,SAAUF,EAAI/M,MAA9B,UACP,cAAC8M,EAAA,EAAUI,OAAX,UACI,qBAAKhO,UAAU,QAAf,SACI,qBAAKA,UAAU,UAAf,SAA0B6N,EAAI/M,YAGtC,cAAC8M,EAAA,EAAUK,KAAX,UACI,eAACC,EAAA,EAAD,CAAOC,UAAQ,EAACC,OAAK,EAArB,UACI,gCACI,+BACI,uBACA,6CACA,wCACA,sCACA,wCACA,0CACA,gDACA,8CACA,4CAGR,gCACKP,EAAIvL,OAAOvF,KAAI,SAAA4J,GAChB,OAAO,+BACH,6BAAI,cAAC0H,EAAA,EAAD,CAAQxM,QAAS,kBAAMnH,EAAM6H,WAAWoE,IAAxC,SAAmD,cAAC,IAAD,QACvD,6BAAKA,EAASwD,cACd,6BAAKxD,EAAS8D,SACK,IAAlB9D,EAASrB,KAAY,6CAAkB,+CACxC,6BAAKqB,EAASyD,SACd,6BAAKzD,EAAS0D,WACd,6BAAK1D,EAAS+D,iBACd,6BAAK/D,EAASgE,eACd,6BAAKhE,EAASnK,gCAUtC,eAACyP,EAAA,EAAD,CAAK0B,GAAI,EAAT,UACI,uBAAK,uBACL,yCACA,uBAAK,uBACL,cAAC,EAAD,CAAgBxJ,OAAQkD,EAAUlD,OAAQyG,OAAQvD,EAAUuD,OAAQvD,UAAWA,EAAW6D,aAAcA,e,kBCiO7GoD,EA7UM,SAAC5T,GAElB,MAAkCC,mBAASD,EAAMsC,KAAKqN,SAAU3P,EAAMsC,KAAKqN,SAAUkE,WAAWjQ,MAAM,KAAK,IAA3G,mBAAOkQ,EAAP,KAAkBC,EAAlB,KACA,EAAwC9T,mBAASD,EAAMsC,KAAK0R,aAAahU,EAAMsC,KAAK0R,aAAa,IAAjG,mBAAOA,EAAP,KAAqBC,EAArB,KACA,EAA4BhU,mBAAS,CAACiU,SAAS,GAAGC,gBAAgB,KAAlE,mBAAOC,EAAP,KAAeC,EAAf,KAOAhP,qBAAU,cACR,CAAC2O,IAEH,IAAMM,EAAoB,SAAC1C,EAAI2C,EAAIhR,GAC/B,IAAI4M,EAAS/P,OAAOgQ,OAAO,GAAG4D,GAClB,aAARpC,IAAoBzB,EAAO5M,GAAG2Q,SAAWK,GACjC,oBAAR3C,IAA2BzB,EAAO5M,GAAG4Q,gBAAkBI,GAC3DN,EAAgB9D,IAGdqE,EAA0B,SAAC5C,EAAI2C,GACjC,IAAIlH,EAAOjN,OAAOgQ,OAAO,GAAGgE,GACjB,aAARxC,EAAoBvE,EAAK6G,SAASK,EACrB,oBAAR3C,IAA2BvE,EAAK8G,gBAAgBI,GACxDF,EAAUhH,IAoCdhI,qBAAU,WACN0O,EAAa/T,EAAMsC,KAAKqN,SAAU3P,EAAMsC,KAAKqN,SAAUkE,WAAWjQ,MAAM,KAAK,IAC7EqQ,EAAgBjU,EAAMsC,KAAK0R,aAAahU,EAAMsC,KAAK0R,aAAa,MAClE,CAAChU,EAAMsC,OAET,IAAMmS,EAAmB,SAACC,EAAYC,EAAahJ,EAAciJ,GAC7D,OACA,eAAC3D,EAAA,EAAK4D,OAAN,CAAanS,KAAMkS,EAAOnN,aAAciN,EAAY9U,MAAO+U,EAAahN,SAAUgE,EAAlF,UACI,wBAAQmJ,SAAyB,OAAfJ,EAAqB9U,MAAO,OAC9C,wBAAQkV,SAAyB,YAAfJ,EAA0B9U,MAAO,UAAnD,qBACA,wBAAQkV,SAAyB,uBAAfJ,EAAqC9U,MAAO,qBAA9D,gCACA,wBAAQkV,SAAyB,eAAfJ,EAA6B9U,MAAO,aAAtD,wBACA,wBAAQkV,SAAyB,8BAAfJ,EAAyC9U,MAAO,4BAAlE,uCACA,wBAAQkV,SAAyB,6BAAfJ,EAA2C9U,MAAO,2BAApE,sCACA,wBAAQkV,SAAyB,cAAfJ,EAA4B9U,MAAO,YAArD,uBACA,wBAAQkV,SAAyB,UAAfJ,EAAwB9U,MAAO,QAAjD,mBACA,wBAAQkV,SAAyB,UAAfJ,EAAwB9U,MAAO,QAAjD,mBACA,wBAAQkV,SAAyB,UAAfJ,EAAwB9U,MAAO,QAAjD,mBACA,wBAAQkV,SAAyB,WAAfJ,EAAyB9U,MAAO,SAAlD,oBACA,wBAAQkV,SAAyB,gCAAfJ,EAA2C9U,MAAO,8BAApE,yCACA,wBAAQkV,SAAyB,+BAAfJ,EAA0C9U,MAAO,6BAAnE,4CAKR,OACI,cAAC,IAAD,CACImV,oBAAkB,EAClBpE,SAjDa,SAAC/I,KAkDdiJ,cAAe7Q,EAAMsC,KAHzB,SAKC,gBAAGwO,EAAH,EAAGA,aAAcnF,EAAjB,EAAiBA,aAAc/D,EAA/B,EAA+BA,OAA/B,EAAuCmJ,OAAvC,OACD,eAACE,EAAA,EAAD,CAAMC,YAAU,EAACP,SAAUG,EAA3B,UACI,6BAAK9Q,EAAMoG,QACX,eAAC6K,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,8BAAhD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,4BAGA,cAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,SACA,cAACP,EAAA,EAAKQ,QAAN,CACA3J,KAAK,OACLlI,MAAOgI,EAAOgI,eACdlN,KAAK,iBACLiF,SAAUgE,EACVwB,YAAavF,EAAOgI,eAAehI,EAAOgI,eAAe,iCAI7D,eAACqB,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,2BAAhD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,yBAGA,cAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,SACA,cAACP,EAAA,EAAKQ,QAAN,CACA3J,KAAK,OACLpF,KAAK,cACLiF,SAAUgE,EACV/L,MAAOgI,EAAO6H,YACdtC,YAAavF,EAAO6H,YAAY7H,EAAO6H,YAAY,8BAIvD,eAACwB,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,0BAAhD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,uBAGA,cAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,SACA,cAACP,EAAA,EAAKQ,QAAN,CAAc3J,KAAK,OACnBlI,MAAOgI,EAAOoN,UACdrN,SAAUgE,EACVjJ,KAAK,YACLyK,YAAkC,IAArBvF,EAAOoN,UAAiB,KAAK,YAI9C,eAAC/D,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,uBAAhD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,oBAGA,cAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,SACA,cAACP,EAAA,EAAKQ,QAAN,CAAc3J,KAAK,OACnBlI,MAAOgI,EAAO8H,OACdhN,KAAK,SACLiF,SAAUgE,EACVwB,YAAavF,EAAO8H,OAAO9H,EAAO8H,OAAO,yBAI7C,eAACuB,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,gBAAhD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,oBACA,cAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,SAEIiD,EAAiB7M,EAAOmI,OAAOnI,EAAOmI,OAAO,GAAGnI,EAAOmI,OAAQpE,EAAa,eAKpF,eAACsF,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAQgM,UAAU,gBAAjD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,4BACA,cAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,SAEKiD,EAAiB7M,EAAOoI,eAAepI,EAAOoI,eAAe,GAAGpI,EAAOoI,eAAerE,EAAa,uBAK5G,eAACsF,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,gBAAhD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,0BACA,cAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,SAEKiD,EAAiB7M,EAAOqI,aAAarI,EAAOqI,aAAa,GAAGrI,EAAOqI,aAAatE,EAAa,qBAKtG,eAACsF,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,sBAAhD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,mBAGA,cAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,SACA,cAACP,EAAA,EAAKQ,QAAN,CAAc3J,KAAK,OACnBH,SAAUgE,EACVjJ,KAAK,QACLyK,YAAavF,EAAO9F,MAAM8F,EAAO9F,MAAM,wBAI3C,mCACI,eAACmP,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAA/B,UACA,cAAC2L,EAAA,EAAKY,MAAN,CAAYR,GAAG,SAASS,QAAM,EAACN,GAAI,EAAnC,kBAGA,eAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,UACI,cAACP,EAAA,EAAKc,MAAN,CACAjK,KAAK,QACLlI,MAAOgI,EAAOgD,KACd/K,MAAM,cACN8H,SAAUgE,EACVjJ,KAAK,OACLqF,GAAG,wBACHiK,QAAyB,IAAhBpK,EAAOgD,OAEhB,cAACqG,EAAA,EAAKc,MAAN,CACAjK,KAAK,QACLH,SAAUgE,EACV9L,MAAM,gBACND,MAAOgI,EAAOgD,KACdlI,KAAK,OACLqF,GAAG,wBACHiK,QAAyB,IAAhBpK,EAAOgD,OAEhB,cAACqG,EAAA,EAAKc,MAAN,CACAjK,KAAK,QACLlI,MAAOgI,EAAOgD,KACd/K,MAAM,QACN8H,SAAUgE,EACVjJ,KAAK,OACLqF,GAAG,wBACHiK,QAAyB,IAAhBpK,EAAOgD,eAMxB,eAACqG,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,0BAAhD,UACI,cAACC,EAAA,EAAD,CAAKC,GAAI,IACT,cAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,SACI,eAACgC,EAAA,EAAD,WACI,gCACI,+BACI,wDACA,6CACA,4BAGR,kCACCQ,EAAa3R,KAAI,SAACQ,EAAEU,GACjB,OACI,mCACA,+BACI,6BACI,cAAC0N,EAAA,EAAKQ,QAAN,CACA3J,KAAK,SACLlI,MAAOiD,EAAEqR,SACTxC,WAAY,SAACC,GACS,UAAdA,EAAMC,KACN0C,EAAkB,WAAW3C,EAAM1K,OAAOrH,MAAM2D,IAGxDoE,SAAUgE,EACVwB,YAAatK,EAAEqR,SAAWrR,EAAEqR,SAAS,UAEzC,6BACI,cAACjD,EAAA,EAAKQ,QAAN,CAAc3J,KAAK,OACnB4J,WAAY,SAACC,GACS,UAAdA,EAAMC,KACN0C,EAAkB,kBAAkB3C,EAAM1K,OAAOrH,MAAM2D,IAG/D4J,YAAatK,EAAEsR,gBAAkBtR,EAAEsR,gBAAgB,UAGvD,6BACI,wBAAQ7O,UAAU,iBAAiB6B,QAAS,YA5OtD,SAAC5D,GACvB,IAAI4M,EAAS/P,OAAOgQ,OAAO,GAAG4D,GAC9B7D,EAAO8E,OAAO1R,EAAE,GAChB0Q,EAAgB9D,GAyOmE+E,CAAkB3R,IAArE,SAA0E,cAAC,IAAD,UAxBzEV,EAAEqR,eA8BnB,+BACI,6BACI,cAACjD,EAAA,EAAKQ,QAAN,CACA3J,KAAK,SACLH,SAAU,SAACgK,GACP6C,EAAwB,WAAW7C,EAAM1K,OAAOrH,QAEpDuN,YAAY,qBAEhB,6BACI,cAAC8D,EAAA,EAAKQ,QAAN,CACA3J,KAAK,OACLH,SAAU,SAACgK,GACP6C,EAAwB,kBAAkB7C,EAAM1K,OAAOrH,QAE3DuN,YAAY,2BAEhB,6BACI,wBAAQ7H,UAAU,cAAc6B,QAAS,WAxRjE8M,EAAgB,GAAD,mBAAKD,GAAL,CAAkBI,MAwRT,SAAmE,cAAC,IAAD,UAlBlE,mBA0BrB,eAACnD,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,yBAAhD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,sBAGA,eAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,UACCsC,EAAUzR,KAAI,SAAC8S,EAAG5R,GACf,OACI,eAAC6R,EAAA,EAAD,CAAeC,QAAQ,UAAvB,UACKF,EACD,sBAAM7P,UAAU,kBAAkB6B,QAAS,YA/Q5C,SAAC5D,GACpB,IAAI4M,EAAS/P,OAAOgQ,OAAO,GAAG0D,GAC9B3D,EAAO8E,OAAO1R,EAAE,GAChBwQ,EAAa5D,GA4QuDmF,CAAe/R,IAA/D,SAAoE,4BAAG,cAAC,IAAD,UAF/DA,MAOpB,cAAC0N,EAAA,EAAKQ,QAAN,CACA3J,KAAK,OACL4J,WAAY,SAACC,GAnTL,IAAC4D,EAoTa,UAAd5D,EAAMC,MApTL2D,EAqTW5D,EAAM1K,OAAOrH,MArTfmU,EAAa,GAAD,mBAAKD,GAAL,CAAeyB,OAwT7C5N,SAAUgE,EACVwB,YAAY,kCAIhB,cAAC8D,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAA/B,SACI,cAACiM,EAAA,EAAD,CAAKC,GAAI,CAAEgE,KAAM,GAAI3O,OAAQ,GAA7B,SACA,cAAC8M,EAAA,EAAD,CAAQ7L,KAAK,SAASX,QAAS,kBA1RjB,SAACS,GACvB,IAAI6N,EAAM,CACNhG,YAAY7H,EAAO6H,YACnBM,OAAQnI,EAAOmI,OACfJ,SAAUmE,EAAUzP,KAAK,KACzBvC,MAAQ8F,EAAO9F,MACfkO,eAAgBpI,EAAOoI,eACvBC,aAAcrI,EAAOqI,aACrBL,eAAehI,EAAOgI,eACtBhF,KAAMhD,EAAOgD,KACb8E,OAAO9H,EAAO8H,OACdsF,UAAWpN,EAAOoN,UAClBhB,aAAaA,GAEjBxF,EAAexO,EAAMsC,KAAKmN,YAAYgG,GAAKnH,MAAK,SAACC,GAC7CvO,EAAM0V,aAAanH,MA2QsBoH,CAAkB/N,IAAvD,SAAiE5H,EAAMoG,mBCpTxEwP,EAhCQ,WAEnB,MAAwC3V,mBAAS,IAAjD,mBAAO4V,EAAP,KAAqBC,EAArB,KACA,EAAwB7V,mBAAS,IAAjC,mBAAO8V,EAAP,KAAaC,EAAb,KACA,EAAsB/V,mBAAS,IAA/B,mBAAOyJ,EAAP,KAAYuM,EAAZ,KAaA,OACI,sBAAK3Q,UAAU,eAAf,UACI,cAAC,EAAD,CAAe2Q,OAAQA,EAAQvM,IAAKA,EAAK7B,WAb/B,SAACvF,GACfwT,EAAgBxT,GAChB0T,EAAQ,sBAYJ,qBAAK1Q,UAAW,kBAAkByQ,EAAlC,SACI,sBAAKzQ,UAAW,qCAAsCyQ,EAAtD,UACI,wBAAQ5O,QAAS,kBAAM6O,EAAQ,KAAK1Q,UAAU,mBAA9C,eACA,qBAAKA,UAAU,qBAAf,SACI,cAAC,EAAD,CAAcc,MAAO,SAAU9D,KAAMuT,EAAcH,aAbnD,SAACpT,GACjB2T,EAAO3T,GACPwT,EAAgB,IAChBE,EAAQ,KAUuFF,gBAAiBA,eC/BlH3H,EAAU,oCACVC,EAAO,UAAMD,EAAN,QASA+H,GARI,UAAM/H,EAAN,iBAQI,uCAAG,sBAAAhK,EAAA,+EACfC,MAAMgK,GAASE,MAAK,SAACC,GAC1B,OAAOA,EAAIhK,WAFS,2CAAH,sD,SCgEN4R,EArEG,SAACnW,GAEf,MAA0BC,mBAAS,IAAnC,mBAAOmW,EAAP,KAAcC,EAAd,KAwBA,OANAhR,qBAAU,WACF6Q,IAAW5H,MAAK,SAACgI,GACbD,EAASC,QAEnB,IAGE,cAACvD,EAAA,EAAD,CAAWC,OAAK,EAAhB,SACI,eAAC7B,EAAA,EAAD,WACI,cAACI,EAAA,EAAD,CAAK0B,GAAI,EAAT,SACI,cAACC,EAAA,EAAD,UAEAkD,EAAM/T,KACF,SAAA8Q,GACA,OAAO,eAACD,EAAA,EAAUE,KAAX,CAAgBC,SAAUF,EAAIlR,OAA9B,UACP,cAACiR,EAAA,EAAUI,OAAX,UACI,qBAAKhO,UAAU,QAAf,SACI,qBAAKA,UAAU,UAAf,SAA0B6N,EAAIlR,aAGtC,cAACiR,EAAA,EAAUK,KAAX,UACI,eAACC,EAAA,EAAD,CAAOC,UAAQ,EAACC,OAAK,EAArB,UACI,gCACI,+BACI,oBAAIpO,UAAU,iBACd,qDAGR,gCACK6N,EAAIxG,UAAUtK,KAAI,SAAA4J,GACnB,OAAO,+BACH,oBAAI3G,UAAU,eAAd,SAA6B,cAACqO,EAAA,EAAD,CAAQ0B,QAAQ,QAAQlO,QAAS,kBAAMnH,EAAM6H,WAAWoE,IAAxD,SAAmE,cAAC,IAAD,QAChG,6BAAKA,EAAS2D,wCAUtC,cAAC2B,EAAA,EAAD,CAAK0B,GAAI,UCzCVsD,EApBK,WAChB,MAAwCtW,mBAAS,IAAjD,mBAAqB6V,GAArB,WACA,EAAwB7V,mBAAS,IAAjC,mBAAO8V,EAAP,KAAaC,EAAb,KAOA,OACI,sBAAK1Q,UAAU,eAAf,UACI,cAAC,EAAD,CAAWuC,WAPD,SAACvF,GACfwT,EAAgBxT,GAChB0T,EAAQ,sBAMJ,qBAAK1Q,UAAU,iBAAf,SACA,qBAAKA,UAAW,qCAAsCyQ,UCd5DS,GAAgB,CACpB,CAAE5W,MAAO,QAASC,MAAO,SACzB,CAAED,MAAO,OAAQC,MAAO,QACxB,CAAED,MAAO,SAAUC,MAAO,UAC1B,CAAED,MAAO,MAAOC,MAAO,OACvB,CAAED,MAAO,SAAUC,MAAO,UAC1B,CAAED,MAAO,SAAUC,MAAO,UAC1B,CAAED,MAAO,QAASC,MAAO,SACzB,CAAED,MAAO,SAAUC,MAAO,UAC1B,CAAED,MAAO,QAASC,MAAO,SACzB,CAAED,MAAO,SAAUC,MAAO,WAGxB4W,GAAgB,CAClB,CAAE7W,MAAO,OAAQC,MAAO,OAAQ+K,KAAM,KACtC,CAAEhL,MAAO,MAAOC,MAAO,MAAO+K,KAAM,KACpC,CAAEhL,MAAO,WAAYC,MAAO,WAAY+K,KAAM,KAC9C,CAAEhL,MAAO,KAAMC,MAAO,KAAM+K,KAAM,KAClC,CAAEhL,MAAO,OAAQC,MAAO,OAAQ+K,KAAM,KACtC,CAAEhL,MAAO,QAASC,MAAO,QAAS+K,KAAM,KACxC,CAAEhL,MAAO,MAAOC,MAAO,MAAO+K,KAAM,MAGlC8L,GAAQ,UAAOD,IAEfE,GAAe,GA8VJC,GA5VG,WAChB,MAAsC3W,mBAAS,MAA/C,mBAAOqL,EAAP,KAAoBC,EAApB,KACA,EAA0BtL,mBAASyW,IAAnC,mBAAOG,EAAP,KAAcC,EAAd,KACA,EAA4C7W,mBAAS,IAArD,mBAAOuL,EAAP,KAAuBC,EAAvB,KAEME,EAAe,SAAC/L,GACpB2L,EAAe3L,IAkIjB,OAFAyF,qBAAU,cAAU,IAGlB,gCACE,qBAAKC,UAAU,GAAf,SACE,+CAEF,sBAAKA,UAAU,MAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,wBACEwC,KAAK,SACLxC,UAAU,iBACV,iBAAe,QACf,iBAAe,iBAJjB,wBASF,qBAAKA,UAAU,SAAf,SACE,wBACEwC,KAAK,SACLxC,UAAU,kBACV,iBAAe,QACf,iBAAe,gBAJjB,2BAWJ,+BACE,qBAAKA,UAAU,YAAf,SACE,sBAAKA,UAAU,mBAAf,UACE,sBAAKA,UAAU,OAAf,UACE,kDACA,uBACEA,UAAU,eACVwC,KAAK,OACLC,GAAG,UACH,mBAAiB,iBAGpB4O,GAAatU,KAAI,SAAC+K,GACjB,MAAkB,KAAdA,EAAMxC,KAEN,sBAAKtF,UAAU,OAAf,UACE,8BACE,6BAAK8H,EAAMvN,UAEb,sBAAKyF,UAAU,MAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,mBAAGA,UAAU,eAAb,sBAEF,qBAAKA,UAAU,SAAf,SACE,uBACEwC,KAAK,SACLC,GAAE,oBAAeqF,EAAMvN,OACvByF,UAAU,eACV,mBAAiB,iBAGrB,qBAAKA,UAAU,SAAf,SACE,mBAAGA,UAAU,eAAb,sBAEF,qBAAKA,UAAU,SAAf,SACE,uBACEwC,KAAK,SACLC,GAAE,oBAAeqF,EAAMvN,OACvByF,UAAU,eACV,mBAAiB,oBAIvB,yBA5ByB8H,EAAMvN,OAiCjC,sBAAKyF,UAAU,OAAf,UACE,8BACE,6BAAK8H,EAAMvN,UAEb,cAAC,IAAD,CACE0N,aAAa,EACb5F,SAAU,SAAC/H,IAjNP,SAAC8C,EAAM9C,GAC7B,IAMI4N,EANAxL,EAAM,GACVwJ,EAAenJ,KAAI,SAACgK,GACdA,EAAMJ,UAAYvJ,GACpBV,EAAIS,KAAK4J,MAKXmB,EADW,MAAT5N,EACM,KAEAA,EAAMA,MAEhB6L,EAAkB,GAAD,OACZzJ,EADY,CAEf,CACEiK,SAAUvJ,EACVwJ,UAAW,KACXC,UAAW,KACXC,MAAOoB,EACP5C,KAAM,QA8LU6C,CAAgBL,EAAMvN,MAAOD,IAE/B,kBAAgB,aAChB8N,QAAQ,qBACRhL,KAAK,kBACL8E,QAASgP,KAEX,yBAdyBpJ,EAAMvN,iBAsB7C,wBACEiI,KAAK,GACLxC,UAAU,kBACV6B,QAAS,YAzJU,WACvB,IAAInF,EAAM,GACV2U,GAAatU,KAAI,SAACC,GAChB,IAAIuJ,EACAC,EACJ,GAAiB,KAAbxJ,EAAKsI,KAAa,EACpBiB,EAAOE,SACLxC,SAASC,eAAT,oBAAqClH,EAAKzC,QAASD,SAEzCiM,IACVA,EAAO,OAGTC,EAAKC,SAASxC,SAASC,eAAT,oBAAqClH,EAAKzC,QAASD,SAEvDkM,IACRA,EAAK,MAGP,IAAIE,EAAO,CACTC,SAAU3J,EAAKzC,MACfqM,UAAWL,EACXM,UAAWL,EACXM,MAAO,KACPxB,KAAM,KAEE,MAANkB,GAAsB,MAARD,GAChB7J,EAAIS,KAAKuJ,OAIfR,EAAenJ,KAAI,SAACgK,GAClBrK,EAAIS,KAAK4J,MAEX,IAAIC,EAAK/C,SAASC,eAAe,WAAW5J,MAClC,IAAN0M,IACFA,EAAK,oBAEP,IAAIG,EAAW,CACbC,YAAaJ,EACbK,UAAW3K,GAEbyC,QAAQmK,IAAInC,GACZhI,QAAQmK,IAAI5M,GACZuH,SAASC,eAAe,WAAW5J,MAAQ,GAC3C8W,GAAQ,UAAOD,IACfK,EAASJ,IACTC,GAAe,GA2GT/K,IAJJ,oBAcA,qBACEtG,UAAU,aACVyC,GAAG,eACH4F,SAAS,KACT,kBAAgB,oBAChB,cAAY,OALd,SAOE,qBAAKrI,UAAU,eAAf,SACE,sBAAKA,UAAU,gBAAf,UACE,sBAAKA,UAAU,eAAf,UACE,oBAAIA,UAAU,cAAcyC,GAAG,oBAA/B,+BAGA,wBACED,KAAK,SACLxC,UAAU,YACV,kBAAgB,QAChB,aAAW,aAGf,qBAAKA,UAAU,aAAf,SACE,cAAC,IAAD,CACEiI,aAAa,EACb5F,SAAU,SAAC/H,GACT+L,EAAa/L,IAEf,kBAAgB,aAChB8N,QAAQ,qBACRhL,KAAK,kBACL8E,QAASqP,EACT9O,GAAG,4BAGP,qBAAKzC,UAAU,eAAf,SACE,wBACEwC,KAAK,SACL,kBAAgB,QAChBxC,UAAU,kBACV6B,QAAS,YA5PC,SAACyG,GACvB,GAAiB,MAAbA,EAAmB,CACrB,IAAIpK,EACJqT,EAAMxU,KAAI,SAACC,GACLsL,EAAUhO,OAAS0C,EAAK1C,QAC1B+W,GAAalU,KAAKmL,GAClBpK,EAAQqT,EAAMhJ,QAAQD,GACtBrC,EAAe,MAEfuL,EAASJ,QAIb,IADA,IAAI1U,EAAM,GACDuB,EAAI,EAAGA,EAAIsT,EAAMnT,OAAQH,IAC5BA,GAAKC,GACPxB,EAAIS,KAAKoU,EAAMtT,IAGnBuT,EAAS9U,IA2OG+U,CAAgBzL,IALpB,8BAeR,qBACEhG,UAAU,aACVyC,GAAG,gBACH4F,SAAS,KACT,kBAAgB,oBAChB,cAAY,OALd,SAOE,qBAAKrI,UAAU,eAAf,SACE,sBAAKA,UAAU,gBAAf,UACE,sBAAKA,UAAU,eAAf,UACE,oBAAIA,UAAU,cAAcyC,GAAG,oBAA/B,8BAGA,wBACED,KAAK,SACLxC,UAAU,YACV,kBAAgB,QAChB,aAAW,aAGf,qBAAKA,UAAU,aAAf,SACE,cAAC,IAAD,CACEiI,aAAa,EACb5F,SAAU,SAAC/H,GACT+L,EAAa/L,IAEf,kBAAgB,aAChB8N,QAAQ,qBACRhL,KAAK,kBACL8E,QAASmP,OAGb,qBAAKrR,UAAU,eAAf,SACE,wBACEwC,KAAK,SACL,kBAAgB,QAChBxC,UAAU,kBACV6B,QAAS,YAtRG,SAACyG,GACzB,GAAiB,MAAbA,EAAmB,CACrB,IAOIpK,EAPAuK,EAAO,GACXvC,EAAenJ,KAAI,SAACgK,GACdA,EAAMJ,UAAY2B,EAAU/N,OAC9BkO,EAAKtL,KAAK4J,MAGdZ,EAAkBsC,GAElB4I,GAAatU,KAAI,SAACC,GACZsL,EAAUhO,OAAS0C,EAAK1C,QAC1BiX,EAAMpU,KAAKmL,GAEXpK,EAAQmT,GAAa9I,QAAQD,GAC7BrC,EAAe,UAInB,IADA,IAAIvJ,EAAM,GACDuB,EAAI,EAAGA,EAAIoT,GAAajT,OAAQH,IACnCA,GAAKC,GACPxB,EAAIS,KAAKkU,GAAapT,IAG1BoT,GAAe3U,GA+PHgV,CAAkB1L,IALtB,kCC1WR6C,GAAU,qCACVC,GAAO,UAAMD,GAAN,QACP8I,GAAc,UAAM9I,GAAN,eACd+I,GAAU,UAAM/I,GAAN,WAGVgJ,GAAW,SAACC,EAAMnL,EAAUrB,EAAMyM,GAAvB,gBACZlJ,GADY,kBACKiJ,EADL,YACanL,EADb,YACyBrB,EADzB,YACiCyM,IAErCpK,GAAgB,uCAAG,sBAAA9I,EAAA,+EACvBC,MAAM6S,IAAgB3I,MAAK,SAACC,GACjC,OAAOA,EAAIhK,WAFiB,2CAAH,qDAMhB+S,GAAS,uCAAG,sBAAAnT,EAAA,+EAChBC,MAAMgK,IAASE,MAAK,SAACC,GAC1B,OAAOA,EAAIhK,WAFU,2CAAH,qDAMTgT,GAAW,uCAAG,WAAOC,GAAP,SAAArT,EAAA,+EAClBC,OAlBWqT,EAkBMD,EAlBP,UAAYrJ,GAAZ,mBAA8BsJ,IAkBjB,CAC5BxS,OAAQ,SACR1E,QAAS,CACP,eAAgB,sBAGjB+N,KAAKI,IACLJ,MAAK,SAACC,GACL,OAAOA,EAAIhK,WATU,iCAjBR,IAACkT,IAiBO,OAAH,sDAaXC,GAAkB,uCAAG,WAAOF,GAAP,SAAArT,EAAA,+EACzBC,OA9BmBqT,EA8BMD,EA9BP,UAAYrJ,GAAZ,0BAAqCsJ,IA8BxB,CACpCxS,OAAQ,SACR1E,QAAS,CACP,eAAgB,sBAGjB+N,KAAKI,IACLJ,MAAK,SAACC,GACL,OAAOA,EAAIhK,WATiB,iCA7BP,IAACkT,IA6BM,OAAH,sDAalBE,GAAO,uCAAG,WACrBP,EACAnL,EACArB,EACAgN,EACAP,GALqB,SAAAlT,EAAA,+EAOdC,MAAM+S,GAASC,EAAMnL,EAAUrB,EAAMyM,GAAgB,CAC1DpS,OAAQ,OACR1E,QAAS,CACP,eAAgB,oBAElBuM,KAAMC,KAAKC,UAAU4K,KAEpBtJ,KAAKI,IACLJ,MAAK,SAACC,GAAD,OAASA,EAAIhK,UAClBoK,OAAM,SAAUjK,GACfD,QAAQmK,IAAI,QAASlK,OAjBJ,2CAAH,8DAqBPmT,GAAW,uCAAG,WAAOD,GAAP,SAAAzT,EAAA,+EAClBC,MAAM8S,GAAY,CACvBjS,OAAQ,OACR1E,QAAS,CACP,eAAgB,oBAElBuM,KAAMC,KAAKC,UAAU4K,KACpBtJ,MAAK,SAACC,GACP,OAAOA,EAAIhK,WARY,2CAAH,sDAYxB,SAASmK,GAAOpK,GACd,OAAIA,EAASuK,GACJvK,EAEFA,EAASC,OAAO+J,MAAK,SAACC,GAAD,OAASO,QAAQC,OAAOR,MC5EtD,IA8HeuJ,GA9HI,SAAC9X,GAClB,MAAgCC,oBAAS,GAAzC,mBAAO6U,EAAP,KAAiBiD,EAAjB,KACA,EAAwC9X,oBAAS,GAAjD,mBAAO+X,EAAP,KAEMC,GAFN,KAE6B,WAC3BF,GAAY,GACZ,IAAI5H,EAAS/P,OAAOgQ,OAAO,GAAGpQ,EAAMkY,eACpC/H,EAASA,EAAOI,QAAO,SAACnG,GAAD,OAAMA,EAAErC,KAAO/H,EAAM+H,IAAMqC,EAAEnI,SAAWjC,EAAM0C,QACrE1C,EAAMmY,iBAAiBhI,KAGzB9K,qBAAU,WACLrF,EAAMoY,QAAQnW,SAAWjC,EAAME,UAAU+B,QAAUjC,EAAMoY,QAAQrQ,KAAO/H,EAAME,UAAU6H,KACtF+M,GACDmD,IAEFI,OAED,CAACrY,EAAMoY,UAuBV,IAAMC,EAA0B,WACb,WAAdrY,EAAM4K,MACPmN,GAAY,GACZR,GAAYvX,EAAM+H,IAAIuG,MAAK,SAACC,GACV,8BAAbA,EAAG,KACJvO,EAAMsY,aAAatY,EAAM+H,GAAG/H,EAAM0C,KAAK1C,EAAM4K,UAO7B,YAAd5K,EAAM4K,OACZmN,GAAY,GACZL,GAAmB1X,EAAM+H,IAAIuG,MAAK,SAACC,GACjB,8BAAbA,EAAG,KACJvO,EAAMsY,aAAatY,EAAM+H,GAAG/H,EAAM0C,KAAK1C,EAAM4K,WASrD,OACE,qBAAKtF,UAAU,wBAAf,SACE,sBAAKA,UAAU,eAAf,UACE,wBACAA,UAAU,gBACVc,MAAM,iBACNe,QAAS,WACPnH,EAAMuY,WAAWvY,EAAME,YAJzB,SAME,cAAC,IAAD,MAEF,wBACAoF,UAAW0S,EAAc,kBAAkB,gBAC3C5R,MAAM,eACNe,QAAS,WAUJnH,EAAMoL,aACJpL,EAAMoL,aAAanJ,SAAWjC,EAAM0C,KACrC1C,EAAMwY,YAAY,CAACvW,OAAO,KAG1BjC,EAAMwY,YAAYxY,EAAME,WAI1BF,EAAMwY,YAAY,CAACvW,OAAO,MAtB9B,SA2BE,cAAC,IAAD,MAEF,yBACAmE,MAAM,qBACNd,UAAWwP,EAAU,8BAA8B,6BACnD3N,QAAS,WACJ2N,EACDmD,KAGAF,GAAY,GACZ/X,EAAMmY,kBAAiB,SAAA1H,GAAC,4BAAOA,GAAP,CAASzQ,EAAME,iBAT3C,UAaGF,EAAM0C,KAAM,IAAKoS,EAAW,cAAC,IAAD,IAAa,cAAC,IAAD,WApDJ9U,EAAM0C,OCsBvC+V,GA1FQ,SAACzY,GACtB,MAAwCC,mBAAS,CAACgC,OAAO,KAAzD,mBAAOmJ,EAAP,KAAqBC,EAArB,KACA,EAA2BpL,mBAAS,CAACkC,OAAO,GAAGuW,eAAe,KAA9D,mBAAOvW,EAAP,KAAcgJ,EAAd,KAEA9F,qBAAU,WACRiS,KAAYhJ,MAAK,SAACC,GAChBpD,GAAU,SAAAsF,GAAC,kCAASA,GAAT,IAAYtO,OAAQoM,UAEjCtB,KAAmBqB,MAAK,SAACC,GACvBpD,GAAU,SAAAsF,GAAC,kCAASA,GAAT,IAAYiI,eAAgBnK,YAExC,IAEH,IAAMoK,EAAyB,SAAC5Q,EAAGrF,EAAKkI,GACtC,GAAU,WAAPA,EAAgB,CACjB,IAAIuF,EAAS/P,OAAOgQ,OAAO,GAAGjO,EAAOA,QACrCgO,EAASA,EAAOI,QAAO,SAACnG,GAAD,OAAMA,EAAErC,KAAOA,GAAMqC,EAAEnI,SAAWS,KACzDyI,GAAU,SAAAsF,GAAC,kCAASA,GAAT,IAAYtO,OAAQgO,YAE5B,GAAU,YAAPvF,EAAiB,CACvB,IAAIuF,EAAS/P,OAAOgQ,OAAO,GAAGjO,EAAOuW,gBACrCvI,EAASA,EAAOI,QAAO,SAACnG,GAAD,OAAMA,EAAErC,KAAOA,GAAMqC,EAAEnI,SAAWS,KACzDyI,GAAU,SAAAsF,GAAC,kCAASA,GAAT,IAAYiI,eAAgBvI,SAIrCqI,EAAc,SAACzW,GAChBqJ,EAAanJ,SAAWF,EAAME,QAAyB,KAAfF,EAAME,QAC/CoJ,EAAgB,CAACpJ,OAAO,KACxBjC,EAAM6H,YAAW,SAAC4I,GAAD,MAAM,CAACxO,OAAO,SAG/BoJ,EAAgBtJ,GAChB/B,EAAM6H,YAAW,SAAC4I,GAAD,OAAM1O,OAI3B,OACE,qBAAKuD,UAAU,8BAAf,SACE,sBAAKA,UAAU,YAAf,UACE,qBAAKA,UAAU,YAAf,SACE,oBAAIA,UAAU,QAAd,sBAEF,sBAAKA,UAAU,aAAf,UACE,mBAAGA,UAAU,kBAAb,wCACCnD,EAAOA,OAAOE,KAAI,SAACN,GAClB,OACE,cAAC,GAAD,CACEmW,cAAelY,EAAMkY,cACrBC,iBAAkBnY,EAAMmY,iBACxBzV,KAAMX,EAAME,OACZ8F,GAAIhG,EAAMgG,GAEVyQ,YAAaA,EACbpN,aAAcA,EACdlL,UAAW6B,EACXqW,QAASpY,EAAMoY,QACfG,WAAYvY,EAAMuY,WAClB3N,KAAM,SACN0N,aAAcK,GAPT5W,EAAME,WAWjB,mBAAGqD,UAAU,kBAAb,yCACCnD,EAAOuW,eAAerW,KAAI,SAACN,GAC1B,OACE,cAAC,GAAD,CACEmW,cAAelY,EAAMkY,cACrBC,iBAAkBnY,EAAMmY,iBACxBzV,KAAMX,EAAME,OACZsW,WAAYvY,EAAMuY,WAClBC,YAAaA,EACbpN,aAAcA,EACdrD,GAAIhG,EAAMgG,GACVqQ,QAASpY,EAAMoY,QACfxN,KAAM,UAEN1K,UAAW6B,EACXuW,aAAcK,GAFT5W,EAAME,cAOnB,uBACA,cAAC,GAAD,U,4CC+EO2W,GAlKkB,SAAC5Y,GAE9B,IAAM6Y,EAAQC,aAAwBC,KAAOF,OAM7CxT,qBAAU,cACP,CAACrF,EAAM2G,OAEV,IAiBMqS,EAAa,SAAC9M,EAAWC,EAAWC,EAAOnK,GAC7C,IAAIgX,EAAehX,EACfiX,EAAc,GAClB,GAAGlZ,EAAMmZ,UAAU,CACf,IAAIC,EAASpZ,EAAMmZ,UAAU5I,QAAO,SAACnG,GAAD,OAAMA,EAAEqF,cAAgBxN,KACzDmX,EAAO,KACNH,EAAeG,EAAO,GAAGxJ,eACzBsJ,EAAcE,EAAO,GAAGrJ,OAAOqJ,EAAO,GAAGrJ,OAAOqJ,EAAO,GAAGtX,OAGlE,OAAGsK,GAAUD,GAAaD,EAElB,eAAC+E,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,uBAAhD,UACI,eAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,UACI,mBAAGlM,UAAU,UAAb,SAAwB2T,IACxB,mBAAG3T,UAAU,YAAb,SAA0B4T,OAE9B,eAAC3H,EAAA,EAAD,CAAKC,GAAI,EAAT,UACI,cAACL,EAAA,EAAD,UACI,cAAC0H,EAAD,CAAOQ,YAAY,EACnBzZ,MAAO,CAACwM,GAAYF,EAAWE,GAAYD,GAC3CpC,IAAKqC,EAAMA,EAAM,IAAID,EAAU,IAC/BnC,IAAKoC,EAAMA,EAAM,GAAGD,EAAU,GAC9BmN,UAAU,EACVC,KAAM,EACN5R,SAAU,aACV6R,cAAe,SAAA5Z,SAGnB,cAACuR,EAAA,EAAD,UACI,gCACI,qBAAK7L,UAAU,OAAf,SACI,sBAAKA,UAAU,QAAf,UACI,mBAAGA,UAAU,eAAb,kBACA,cAAC2L,EAAA,EAAKQ,QAAN,CACA3J,KAAK,SACLpF,KAAK,MACL+W,KAAK,KACL7Z,MAAOwM,GAAYF,EACnB5G,UAAU,aACVS,MAAM,OACN4B,SAAU,oBAGlB,qBAAKrC,UAAU,QAAf,SACI,sBAAKA,UAAU,QAAf,UACI,mBAAGA,UAAU,eAAb,kBACI,cAAC2L,EAAA,EAAKQ,QAAN,CACA3J,KAAK,SACLlI,MAAOwM,GAAYD,EACnBzJ,KAAK,MACL+W,KAAK,KACL1T,MAAM,OACNT,UAAU,mBACVqC,SAAU,SAAC9E,EAAEU,uBASrC,qBAAK+B,UAAU,QAAf,SACA,cAAC2L,EAAA,EAAKQ,QAAN,CAAc6H,UAAQ,EAACxR,KAAK,OAAOqF,YAAY,WAKzDuM,EAAe,SAACzX,EAAOuL,GACZ,OAAVA,QAA4BrN,IAAVqN,IAAqBA,EAAQ,OAClD,IAAImM,EAAInM,EAAMqG,WAAWjQ,MAAM,KAC3BgW,EAAO,GACPR,EAAS,GACTH,EAAehX,EACfiX,EAAc,GACflZ,EAAMmZ,YACLC,EAASpZ,EAAMmZ,UAAU5I,QAAO,SAACnG,GAAD,OAAMA,EAAEqF,cAAgBxN,MAC9C,KACN2X,EAAOR,EAAO,GAAGpF,aACjBiF,EAAeG,EAAO,GAAGxJ,eACzBsJ,EAAcE,EAAO,GAAGrJ,OAAOqJ,EAAO,GAAGrJ,OAAOqJ,EAAO,GAAGtX,OAqBlE,IAvHe+X,EAAkBC,EAuH7BC,GAlBJJ,EAAIA,EAAEtX,KAAI,SAACQ,GACP,IAAImX,EAAQJ,EAAKrJ,QAAO,SAACnG,GAAD,OAAM2B,SAAS3B,EAAE8J,YAAcnI,SAASlJ,MAAK,GACrE,OAAGmX,EACQA,EAAM7F,gBAELtR,MAaLR,KAAI,SAAAQ,GAAC,OA9HM,SAACA,GACvB,MAAO,CAAEjD,MAAOiD,EAAGhD,MAAOgD,GA6HPoX,CAAkBpX,MACrC,OACA,cAACoO,EAAA,EAAD,UACI,eAACA,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,uBAAhD,UACI,eAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,UACI,mBAAGlM,UAAU,UAAb,SAAwB2T,IACxB,mBAAG3T,UAAU,YAAb,SAA0B4T,OAE9B,cAAC3H,EAAA,EAAD,CAAKC,GAAI,EAAT,UA/HOqI,EAgIQE,EAhIUD,EAgIPC,EA9HxB,cAAC,IAAD,CACExS,SAAS,EACT2S,YAAY,EACZ5U,UAAU,kBACViI,aAAa,EACb,kBAAgB,aAChBG,QAAQ,qBACRhL,KAAK,kBACL+E,aAAcqS,EACdtS,QAASqS,aA4HjB,OACI,gCACI,6BAAK7Z,EAAM2G,MAAM3G,EAAM2G,KAAKjD,OAAS,EAAG,cAAmB,KAC1D1D,EAAM2G,KAAKtE,KAAI,SAAA8X,GAAM,OAAO,gCACb,IAAXA,EAAEvP,KACH,8BACI,cAACqG,EAAA,EAAD,UACK+H,EAAWmB,EAAEjO,UAAUiO,EAAEhO,UAAUgO,EAAE/N,MAAM+N,EAAElO,cAE/C,KACK,IAAXkO,EAAEvP,KAAW8O,EAAaS,EAAElO,SAASkO,EAAE/N,OAAO,eClFhDgO,GA3ES,SAACpa,GAErB,IAAMqa,EAAc,kBAAMra,EAAMsa,SAAQ,SAAA7J,GAAC,kCAAQA,GAAR,IAAU8J,MAAK,QAcxD,OACI,mCACE,eAACC,GAAA,EAAD,CAAOD,KAAMva,EAAMua,KAAME,OAAQJ,EAAaZ,KAAK,KAAnD,UACE,cAACe,GAAA,EAAMlH,OAAP,CAAcoH,aAAW,EAAzB,SACE,cAACF,GAAA,EAAMG,MAAP,8BAEF,cAAC,IAAD,CACIhK,SAnBS,SAAC/I,GACpB,IAAIgT,EAAU,CACJlO,YAAa9E,EAAO3F,OACpB0K,UAAW3M,EAAM2G,KACjBkU,WAAY7a,EAAM6a,YAE5BhD,GAAY+C,GAAStM,MAAK,SAACC,GACzB9J,QAAQmK,IAAI,SAAUL,GACtB8L,QAYQxJ,cAAe,CACf5O,OAAQ,IAHZ,SAMC,gBAAG6O,EAAH,EAAGA,aAAcnF,EAAjB,EAAiBA,aAAc/D,EAA/B,EAA+BA,OAA/B,EAAuCmJ,OAAvC,OACD,eAACE,EAAA,EAAD,CAAMC,YAAU,EAACP,SAAUG,EAA3B,UACE,cAAC0J,GAAA,EAAMjH,KAAP,CAAYjO,UAAU,YAAtB,SACE,cAACyN,EAAA,EAAD,UACE,eAAC5B,EAAA,EAAD,WACE,eAACI,EAAA,EAAD,CAAK0B,GAAI,EAAT,UACE,eAAC9B,EAAA,EAAD,WACE,2DACA,yCAAYnR,EAAM8a,aAAaC,UAC/B,6CAAgBpS,WAAW3I,EAAM8a,aAAaE,YAAYC,QAAQ,GAAlE,UAEF,cAAC9J,EAAA,EAAD,UACE,cAAC,GAAD,CAA0BgI,UAAWnZ,EAAMmZ,UAAWxS,KAAM3G,EAAM2G,KAAMqN,aAAchU,EAAMgU,oBAGhG,cAACzC,EAAA,EAAD,CAAK0B,GAAI,EAAT,SACE,eAAChC,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,gBAAhD,UACE,cAACL,EAAA,EAAKY,MAAN,+BACA,cAACZ,EAAA,EAAKQ,QAAN,CACAyJ,UAAQ,EACRpT,KAAK,OACLpF,KAAK,SACL9C,MAAOgI,EAAO3F,OACd0F,SAAUgE,EACVwB,YAAY,iCAOtB,eAACqN,GAAA,EAAMW,OAAP,WACE,cAACxH,EAAA,EAAD,CAAQ0B,QAAQ,YAAYlO,QAASkT,EAArC,sBAGA,cAAC1G,EAAA,EAAD,CAAQ0B,QAAQ,UAAUvN,KAAK,SAA/B,0CC+PDsT,I,OA3TW,SAACpb,GAEvB,IAAM6Y,EAAQC,aAAwBC,KAAOF,OAE3C,EAA0C5Y,mBAAS,IAAnD,mBAAsBob,GAAtB,WAEMpB,EAAoB,SAACpX,GACvB,MAAO,CAAEjD,MAAOiD,EAAEqR,SAAWrU,MAAOgD,EAAEsR,kBAOpCmH,EAAe,SAAC/X,EAAEV,GACtB,IAAIvC,EAAQuC,EAAEH,KAAMmR,WAAWjQ,MAAM,KACjCJ,EAAQuI,SAASzL,EAAK,IACtBsR,EAAMtR,EAAK,GACX6P,EAAS/P,OAAOgQ,OAAO,GAAGpQ,EAAMub,KAAKC,kBAC9B,UAAR5J,IACDzB,EAAO3M,GAAO4I,MAAQ7I,EAAElB,KAAI,SAAAS,GAAM,OAAQA,EAAElD,MAAOiU,cAAaxP,KAAK,KACrE8L,EAAO3M,GAAO0I,UAAY,KAC1BiE,EAAO3M,GAAO2I,UAAY,MAE5BsP,EAAsBtL,IAGlBuL,EAAqB,SAAC9b,GAE1B,IADA,IAAIuQ,EAAS/P,OAAOgQ,OAAO,GAAGpQ,EAAM2b,OAC5BpY,EAAE,EAAGA,EAAE4M,EAAOzM,OAAQH,IAC5B,GAAG4M,EAAO5M,GAAGgY,OAASvb,EAAMub,KAAKA,KAAK,CACpCpL,EAAO5M,GAAGqY,aAAehc,EACzB,MAGJI,EAAM6b,SAAS1L,IAgCjB9K,qBAAU,WAEN,IAAI8K,EAAS/P,OAAOgQ,OAAO,GAAGpQ,EAAMub,KAAKC,kBACrCM,EAA6B,IAApB9b,EAAMub,KAAK3Q,KAAa5K,EAAMub,KAAKvH,aAAc,GAC1D+H,EAASD,EAAMpY,OAAS,EAAI,GAAI,KAChCsY,EAAQhc,EAAMub,KAAKnE,KACnB6E,EAAQlQ,SAASiQ,GAAS7L,EAAOzM,OACrC,GAAGuY,EAAM,EACP,IAAI,IAAI1Y,EAAE,EAAGA,EAAE0Y,EAAO1Y,IAAI,CAC1B,IAAI2Y,EAAM,CACRC,YAAchM,EAAOzM,OAAO,EAC5ByI,UAAWnM,EAAMub,KAAKvR,IACtBkC,UAAWlM,EAAMub,KAAKxR,IACtBqC,MAAO2P,GAET5L,EAAO1N,KAAKyZ,QAGLD,EAAO,IACd9L,EAASA,EAAO8E,OAAO,EAAGjV,EAAMub,KAAKnE,OAEvCqE,EAAsBtL,GACtBkL,EAAiBS,EAAMzZ,KAAI,SAAAQ,GAAC,OAAEoX,EAAkBpX,SACjD,CAAC7C,EAAMub,KAAKvb,EAAMub,KAAKnE,OAG5B/R,qBAAU,cACR,CAACrF,EAAM2b,QAET,IAAMF,EAAwB,SAAC7b,GAE3B,IADF,IAAIuQ,EAAS/P,OAAOgQ,OAAO,GAAGpQ,EAAM2b,OAC1BpY,EAAE,EAAGA,EAAE4M,EAAOzM,OAAQH,IAC5B,GAAG4M,EAAO5M,GAAGgY,OAASvb,EAAMub,KAAKA,KAAK,CACpCpL,EAAO5M,GAAGiY,iBAAkB5b,EAC5B,MAGNI,EAAM6b,SAAS1L,IAiCXkK,EAAc,kBAAMra,EAAMsa,SAAQ,SAAC7J,GAAD,mBAAC,eAAUA,GAAX,IAAa8J,MAAK,QAE1D,OACI,mCACE,eAACC,GAAA,EAAD,CAAOD,KAAMva,EAAMua,KAAME,OAAQJ,EAAaZ,KAAK,KAAnD,UACE,cAACe,GAAA,EAAMlH,OAAP,CAAcoH,aAAW,EAAzB,SACE,cAACF,GAAA,EAAMG,MAAP,6BAEF,cAAC,IAAD,CACIhK,SAvCS,SAAC/I,EAAOrE,EAAEqN,KAwCnBC,cAAe,CACfuL,YAAa,EACbC,kBAAmB,IAJvB,SAOG,gBAAGvL,EAAH,EAAGA,aAAH,EAAiBnF,aAAjB,EAA+B/D,OAA/B,EAAuCmJ,OAAvC,EAA+CC,cAA/C,OACC,eAACC,EAAA,EAAD,CAAMC,YAAU,EAACP,SAAUG,EAA3B,UACE,eAAC0J,GAAA,EAAMjH,KAAP,WACI,eAACtC,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,iBAAhD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,uDAGA,eAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,UACE,cAACP,EAAA,EAAKc,MAAN,CACAjK,KAAK,QACLjI,MAAM,cACN6C,KAAK,eACLqF,GAAG,wBACHuU,eAA4C,YAA3Btc,EAAMub,KAAKK,aAC5BnU,aAAyC,YAA3BzH,EAAMub,KAAKK,aACzBhc,MAAkC,YAA3BI,EAAMub,KAAKK,aAClBjU,SAAU,SAACyC,IACa,IAAnBA,EAAEnD,OAAO+K,SACV0J,EAAmB,cAIvB,cAACzK,EAAA,EAAKc,MAAN,CACAjK,KAAK,QACLjI,MAAM,yBACN6C,KAAK,eACL4Z,eAA6C,YAA5Btc,EAAMub,KAAKK,aAC5BnU,aAAyC,YAA3BzH,EAAMub,KAAKK,aACzB7T,GAAG,wBACHnI,MAAmC,YAA5BI,EAAMub,KAAKK,aAClBjU,SAAU,SAACyC,IACa,IAAnBA,EAAEnD,OAAO+K,SACV0J,EAAmB,sBAM7B,eAACzK,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,iBAAhD,UACI,cAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,qCAGA,cAACD,EAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAACP,EAAA,EAAKQ,QAAN,CACA3J,KAAK,SACLpF,KAAK,cACLyK,YAAa,EACb1F,aAAczH,EAAMub,KAAKnE,KACzB1F,WAAY,SAACC,GACO,UAAdA,EAAMC,KA5FjB,SAAChS,GAEhB,IADF,IAAIuQ,EAAS/P,OAAOgQ,OAAO,GAAGpQ,EAAM2b,OAC1BpY,EAAE,EAAGA,EAAE4M,EAAOzM,OAAQH,IAC5B,GAAG4M,EAAO5M,GAAGgY,OAASvb,EAAMub,KAAKA,KAAK,CACpCpL,EAAO5M,GAAG6T,KAAMrL,SAASnM,GACzB,MAGNI,EAAM6b,SAAS1L,GAqFWoM,CAAW5K,EAAM1K,OAAOrH,eAMlC,cAACqR,EAAA,EAAKG,MAAN,UAC+B,YAA5BpR,EAAMub,KAAKK,aACV,gCACqB,IAApB5b,EAAMub,KAAK3Q,KACZ5K,EAAMub,KAAKC,iBAAiBnZ,KAAI,SAACQ,EAAEW,GAC/B,OAAQ,eAACyN,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,iBAAhD,UACJ,eAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,mBACW3O,EAAEsZ,eAEb,cAAC5K,EAAA,EAAD,CAAKC,GAAI,EAAT,SACI,cAAC,IAAD,CACAjK,SAAS,EACT7E,KAAI,UAAKc,EAAL,UACJmE,SAAU2T,EACV7T,aAAc5E,EAAEuJ,MAAOvJ,EAAEuJ,MACtByH,WACAjQ,MAAM,KACNvB,KACC,SAAAS,GACE,IAAI0Z,EAAMxc,EAAMub,KAAKvH,aAAazD,QAAO,SAACnG,GAAD,OAAMA,EAAE8J,SAASL,aAAe/Q,KAAI,GAC7E,OAAO0Z,EAAKvC,EAAkBuC,GAAK,MAElC,GACPlX,UAAU,kBACViI,aAAa,EACb,kBAAgB,aAChBG,QAAQ,qBACRlG,QAASxH,EAAMub,KAAKvH,aAAa3R,KAAI,SAAAQ,GAAC,OAAEoX,EAAkBpX,YAtBYW,MA0B/E,KACkB,IAApBxD,EAAMub,KAAK3Q,KAAY5K,EAAMub,KAAKC,iBAAiBnZ,KAAI,SAACQ,EAAEW,GACvD,OACA,eAACyN,EAAA,EAAKG,MAAN,CAAYC,GAAIF,IAAK7L,UAAU,OAAOgM,UAAU,iBAAhD,UACE,eAACL,EAAA,EAAKY,MAAN,CAAYC,QAAM,EAACN,GAAI,EAAvB,mBACS3O,EAAEsZ,eAEX,eAAC5K,EAAA,EAAD,CAAKC,GAAI,EAAT,UACE,cAACL,EAAA,EAAD,UACE,cAAC0H,EAAD,CACAQ,YAAY,EACZ5R,aAAc,CAAC5E,EAAEqJ,UAAWrJ,EAAEsJ,WAC9BpC,IAAK/J,EAAMub,KAAKxR,IAChBC,IAAKhK,EAAMub,KAAKvR,IAChBsP,UAAU,EACVC,KAAM,EACN5R,SAAU,aACV6R,cAAe,SAAA5Z,IArMzB,SAACiD,EAAEU,GACrB,IAAI4M,EAAS/P,OAAOgQ,OAAO,GAAGpQ,EAAMub,KAAKC,kBACzCrL,EAAO5M,GAAG2I,UAAYrJ,EAAE,GACxBsN,EAAO5M,GAAG4I,UAAYtJ,EAAE,GACxB4Y,EAAsBtL,GAiM+BsM,CAAY7c,EAAM4D,QAG7C,cAAC2N,EAAA,EAAD,UACE,gCACE,qBAAK7L,UAAU,OAAf,SACA,sBAAKA,UAAU,QAAf,UACE,mBAAGA,UAAU,eAAb,kBACA,cAAC2L,EAAA,EAAKQ,QAAN,CACA3J,KAAK,SACLpF,KAAK,MACL+W,KAAK,KACL7Z,MAAOiD,EAAEqJ,UACT5G,UAAU,aACVS,MAAM,OACN4B,SAAU,oBAGZ,qBAAKrC,UAAU,QAAf,SACE,sBAAKA,UAAU,QAAf,UACE,mBAAGA,UAAU,eAAb,kBACA,cAAC2L,EAAA,EAAKQ,QAAN,CACA3J,KAAK,SACLlI,MAAOiD,EAAEsJ,UACTzJ,KAAK,MACL+W,KAAK,KACL1T,MAAM,OACNT,UAAU,mBACVqC,SAAU,SAAC9E,EAAEU,GAAOkB,QAAQmK,IAAI,WAAW/L,EAAEU,qBA1CaC,MAiDvE,KACkB,IAApBxD,EAAMub,KAAK3Q,MAAkC,IAApB5K,EAAMub,KAAK3Q,KACrC,cAACwK,EAAA,EAAD,CAAsCC,QAAQ,SAA9C,gDAAYrV,EAAMub,KAAKmB,eAEd,QACJ,UAGb,eAAClC,GAAA,EAAMW,OAAP,WACE,cAACxH,EAAA,EAAD,CAAQ0B,QAAQ,YAAYlO,QAASkT,EAArC,sBAGA,cAAC1G,EAAA,EAAD,CAAQ0B,QAAQ,UAAUvN,KAAK,SAAUX,QAAS,kBAzQtC,SAACS,GAEzB,IADA,IAAIuI,EAAS/P,OAAOgQ,OAAO,GAAGpQ,EAAM2b,OAC5BpY,EAAE,EAAGA,EAAE4M,EAAOzM,OAAQH,IACzB4M,EAAO5M,GAAGgY,OAASvb,EAAMub,KAAKA,OAC5BpL,EAAO5M,GAAG2I,YAAciE,EAAO5M,GAAG4I,YACnCgE,EAAO5M,GAAG6I,MAAQ+D,EAAO5M,GAAG2I,UAC5BiE,EAAO5M,GAAG2I,UAAY,KACtBiE,EAAO5M,GAAG4I,UAAY,MAEO,YAA5BnM,EAAMub,KAAKK,eACZzL,EAAO5M,GAAGqY,aAAa5b,EAAMub,KAAKK,aAClCzL,EAAO5M,GAAGiY,iBAAiBxb,EAAMub,KAAKC,kBAExCrL,EAAO5M,GAAG6T,KAAOpX,EAAMub,KAAKnE,MAGhCpX,EAAM6b,SAAS1L,GACfnQ,EAAM2c,WAAW3c,EAAMub,KAAKA,MAC5Bvb,EAAMsa,SAAQ,SAAA7J,GAAC,kCAAQA,GAAR,IAAU8J,MAAK,OAuPsC5E,IAAxD,+C,sCCtNLiH,G,WAjGX,WAAYC,GAAO,qBACfC,KAAKD,KAAOA,E,4CAGhB,WACI,OAAOC,KAAKD,O,qBAGhB,WACI,OAAOC,KAAKD,KAAKE,a,0BAIrB,SAAaC,EAAMC,EAAWC,GAC1B,GAAID,EAAUD,GAEV,OADAE,EAAOF,GACAA,EAEN,GAAqB,OAAlBA,EAAKG,SAAmB,OAAO,KAClC,GAAGH,EAAKG,SAASzZ,QAAU,EAAG,OAAO,KAEtC,IADA,EACI0Z,EAAQ,GADZ,cAEcJ,EAAKG,UAFnB,IAEA,IAAI,EAAJ,qBAA4B,CAAC,IAApBhD,EAAmB,QAC1BiD,EAAM3a,KAAKqa,KAAKO,aAAalD,EAAG8C,EAAWC,KAH7C,8BAMA,OADQE,EAAM9P,MAAK,SAAAlD,GAAC,OAAU,OAANA,O,yBAKhC,SAAY4S,EAAKG,GACb1Y,QAAQmK,IAAI,cAAcoO,EAAKG,GAC/BL,KAAKO,aAAaP,KAAKD,MAAK,SAACzS,GAAK,OAAOA,EAAEkT,MAAMN,EAAKM,OAAM,SAACC,GACzDA,EAAEJ,SAAWA,O,0BAIrB,SAAaH,GACTF,KAAKO,aAAaP,KAAKD,MAAM,SAACzS,GAAK,OAAOA,EAAEkT,MAAMN,EAAKM,OAAM,SAACC,GAC1D,GAAGA,EAAEJ,SAAS,CACVI,EAAEC,QAAS,EACX,IAAInQ,EAAOkQ,EAAEJ,SACbI,EAAEE,UAAYpQ,EACdkQ,EAAEJ,SAAW,SAEb,CACAI,EAAEC,QAAQ,EACV,IAAInQ,EAAOkQ,EAAEE,UACbF,EAAEJ,SAAW9P,EACbkQ,EAAEE,UAAY,W,uBAM1B,SAAUT,GACN,GAAY,OAATA,GAGuB,OAAlBA,EAAKG,UAA8C,IAAzBH,EAAKG,SAASzZ,OAA3C,CAIDsZ,EAAKG,SAAWH,EAAKG,SAAS5M,QAAO,SAACnG,GAAD,MAAgB,WAAVA,EAAEkT,OAD7C,oBAEiBN,EAAKG,UAFtB,IAEA,IAAI,EAAJ,qBAA+B,CAAC,IAAxBO,EAAuB,QAC3BZ,KAAKa,UAAUD,IAHnB,kC,wBAQR,SAAWV,GACPF,KAAKO,aAAaP,KAAKD,MAAK,SAACzS,GAAK,OAAOA,EAAEkT,MAAMN,EAAKM,OAAK,SAACC,GACxDA,EAAED,IAAM,YAEZR,KAAKa,UAAUb,KAAKD,Q,6BAKxB,SAAgBtB,EAAKyB,GACjB,IAAI3M,EAAM,GAIV,GAHI2M,EAAKzB,OAASA,GACdlL,EAAI5N,KAAKua,GAEQ,OAAlBA,EAAKG,eAAuChd,IAAlB6c,EAAKG,UAA0BH,EAAKG,SAASzZ,OAAQ,EAAE,CAAC,IAAD,gBACnEsZ,EAAKG,UAD8D,IAChF,IAAI,EAAJ,qBAA2B,CAAC,IAAD,EAAnBI,EAAmB,QACnBK,EAAUd,KAAKe,gBAAgBtC,EAAKgC,GADjB,cAEPK,GAFO,IAEvB,IAAI,EAAJ,qBAAwB,CAAC,IAAjBtb,EAAgB,QACpB+N,EAAI5N,KAAKH,IAHU,gCADqD,+BAQpF,OAAO+N,M,KCgwBAyN,OAl1Bf,SAAc9d,GAEZ,IAAM+d,EAAUC,EAAQ,KAExB,EAAoC/d,mBAAS,CAACmd,MAAM,GAAGa,KAAK,KAA5D,mBAAOC,EAAP,KAAmBC,EAAnB,KACA,EAAsCle,mBAAS,CAACmd,MAAM,GAAGa,KAAK,KAA9D,mBAAOG,EAAP,KAAoBC,EAApB,KAEMC,EAAe,CACnBC,QAAS,SAACC,EAAUC,GAAX,mBAAC,eACLD,GADI,IAEPjU,WAAY,OACZmU,YAAa,UACbC,UAAW,OACX7Y,OAAQ,OACRC,MAAO,QACP6Y,WAAWH,EAAMI,UAAY,SAG/BC,eAAgB,SAACN,EAAUC,GAAX,mBAAC,eACZD,GADW,IAEd1Y,OAAQ,OACRC,MAAO,QACPgZ,QAAS,WAGXC,MAAO,SAACR,EAAUC,GAAX,mBAAC,eACHD,GADE,IAELS,OAAQ,SAEVC,mBAAoB,SAAAT,GAAK,MAAK,CAC5BU,QAAS,SAEXC,oBAAqB,SAACZ,EAAUC,GAAX,mBAAC,eACjBD,GADgB,IAEnB1Y,OAAQ,WAINuZ,EAAqB,CACzBd,QAAS,SAACC,EAAUC,GAAX,mBAAC,eACLD,GADI,IAEPjU,WAAY,OACZmU,YAAa,UACbC,UAAW,OACX7Y,OAAQ,OACRC,MAAO,QACP6Y,WAAWH,EAAMI,UAAY,SAG/BC,eAAgB,SAACN,EAAUC,GAAX,mBAAC,eACZD,GADW,IAEd1Y,OAAQ,OACRC,MAAO,QACPgZ,QAAS,WAGXC,MAAO,SAACR,EAAUC,GAAX,mBAAC,eACHD,GADE,IAELS,OAAQ,SAEVC,mBAAoB,SAAAT,GAAK,MAAK,CAC5BU,QAAS,SAEXC,oBAAqB,SAACZ,EAAUC,GAAX,mBAAC,eACjBD,GADgB,IAEnB1Y,OAAQ,WAIZ,EAA0B7F,mBAAS,CAACsb,KAAK,QAAQpZ,OAAO,KAAxD,mBAAOmd,EAAP,KAAcC,EAAd,KACA,EAA0Btf,mBAAS,CACjC,CAACsb,KAAK,QAASmB,cAAe,KAAM9R,KAAM,KAAMoJ,aAAc,GAAIjK,IAAK,EAAGC,IAAK,IAAOiC,SAAU,KAAMnK,MAAM,KAAM8Z,aAAa,UAAWxE,KAAK,EAAGoE,iBAAiB,GAAIgE,aAAa,IACpL,CAACjE,KAAK,QAASmB,cAAe,KAAM9R,KAAM,KAAMoJ,aAAc,GAAIjK,IAAK,EAAGC,IAAK,IAAOiC,SAAU,KAAMnK,MAAM,KAAM8Z,aAAa,UAAWxE,KAAK,EAAGoE,iBAAiB,GAAIgE,aAAa,IACpL,CAACjE,KAAK,QAASmB,cAAe,KAAM9R,KAAM,KAAMoJ,aAAc,GAAIjK,IAAK,EAAGC,IAAK,IAAOiC,SAAU,KAAMnK,MAAM,KAAM8Z,aAAa,UAAWxE,KAAK,EAAGoE,iBAAiB,GAAIgE,aAAa,IACpL,CAACjE,KAAK,QAASmB,cAAe,KAAM9R,KAAM,KAAMoJ,aAAc,GAAIjK,IAAK,EAAGC,IAAK,IAAOiC,SAAU,KAAMnK,MAAM,KAAM8Z,aAAa,UAAWxE,KAAK,EAAGoE,iBAAiB,GAAIgE,aAAa,MAJtL,mBAAO7D,EAAP,KAAcE,EAAd,KAOA,EAAwB5b,mBAAS,CAACsa,MAAK,EAAM5T,KAAK,GAAGqN,aAAa,GAAG6G,WAAW,KAAKC,aAAa,KAAlG,mBAAOP,EAAP,KAAaD,EAAb,KACA,EAAgDra,mBAAS,CAACsa,MAAK,EAAMgB,KAAK,KAA1E,mBAAOkE,EAAP,KAAyBC,EAAzB,KACMC,EAASC,mBACTC,EAAgBD,mBAKhBE,EAAuB,SAACvE,EAAK9R,GACjC,OACE,cAAC,IAAD,CACE9B,SAAU,SAAC/H,GACNA,GACDmgB,EAAW,cAAcxE,EAAM,KAAM3b,EAAMA,MAAO,OAGtD0F,UAAU,kBACViI,aAAa,EACb,kBAAgB,aAChBG,QAAQ,qBACRhL,KAAK,kBACLyK,YAAY,eACZ3F,QAASiC,EACTa,OAAQ+U,KAMRhR,EAAe,SAACkN,GACpB,OACE,cAAC,IAAD,CACA5T,SAAU,SAAC/H,GACNA,GACDmgB,EAAW,YAAYxE,EAAM3b,EAAMA,MAAO,KAAM,OAGpD0F,UAAU,kBACViI,aAAa,EACb,kBAAgB,aAChBG,QAAQ,qBACRhL,KAAK,kBACLyK,YAAY,oBACZ3F,QAASxH,EAAM2M,UACfrC,OAAQgU,KAgBN0B,EAAgB,SAACnd,EAAE0Y,EAAK0E,EAAOrI,EAAYsI,EAAQrF,EAAWjQ,GAClE,IAAIuF,EAASyH,EAAa7K,KAAKoT,MAAMpT,KAAKC,UAAU4K,IAAe,GAYnE,OAXAzH,EAAO1N,KAbY,SAACI,GAQpB,MAPU,CACRqJ,UAAWrJ,EAAEqJ,UAAYvD,WAAW9F,EAAEqJ,WAAW,KACjDC,UAAWtJ,EAAEsJ,UAAYxD,WAAW9F,EAAEsJ,WAAW,KACjDC,MAAOvJ,EAAEuJ,MACTH,SAAUpJ,EAAEoJ,SACZrB,KAAM/H,EAAE+H,MAOEwV,CAAavd,IACzBA,EAAEsa,SAAW,GACbta,EAAE0Y,KAAOA,EACT1Y,EAAEd,MAAQoO,EACVtN,EAAE+H,KAAOA,EACT/H,EAAEgY,WAAaA,EACfhY,EAAE2a,QAAS,EACX3a,EAAEkF,IAAMkY,EAASA,EAAOlY,GAAK,QAAQ,OAAOlF,EAAEqJ,UAAYrJ,EAAEqJ,UAAU2H,WAAa,QAAQ,OAAOhR,EAAEsJ,UAAYtJ,EAAEsJ,UAAU0H,WAAa,QAAQ,SAAShR,EAAEuJ,MAAQvJ,EAAEuJ,MAAMyH,WAAa,QACzLhR,EAAEya,IAAM+C,KAAKC,MAAMzM,SAAS,IAAM0M,KAAKC,SAAS3M,SAAS,IAAI4M,OAAO,GACpE5d,EAAE6d,MAAQ,IAAIH,KAAKI,MAAoB,SAAdJ,KAAKC,UAAmB3M,SAAS,IAC1DhR,EAAE+d,WAAaV,GAAoBrd,EAAEuJ,MAC9BvJ,GAGHhD,EAAQ,SAACuK,GACb,IAAIiI,EAAE,GAKN,OAJIjI,EAAE8B,WAAa9B,EAAE+B,UAAWkG,EAAE,MAAD,OAAOjI,EAAE8B,UAAT,cAAwB9B,EAAE+B,UAA1B,MACxB/B,EAAE8B,UAAWmG,EAAE,GAAD,OAAIjI,EAAE6B,SAAN,cAAoB7B,EAAE8B,WACrC9B,EAAE+B,UAAWkG,EAAE,GAAD,OAAIjI,EAAE6B,SAAN,cAAoB7B,EAAE+B,YACpC/B,EAAEgC,OAAUhC,EAAEnI,QAAUmI,EAAErC,MAAKsK,EAAE,GAAD,OAAIjI,EAAEwW,aACvCvO,GAGHwO,EAAW,SAACzW,GAChB,OAAmB,MAAZA,EAAE6V,OAAiB,UAAY7V,EAAE6V,OAAOtZ,KAAK+Z,OAGhDI,EAA6B,SAACje,EAAEC,GAKpC,MAJW,CACTie,oBAAoBle,EACpBwZ,kBAAkBvZ,IAkDtBuC,qBAAU,WACRka,GAAS,SAAA9O,GAAC,kCAAOA,GAAP,IAAStO,OAAOnC,EAAMkY,qBAC/B,CAAClY,EAAMkY,gBAEV7S,qBAAU,WACRsX,EAAW,WACX,CAAC2C,IAEH,IAAMS,EAAa,SAACiB,EAAQC,EAAOC,EAAWC,EAAQ/J,GAEpD,IADA,IAAIjH,EAAS/P,OAAOgQ,OAAO,GAAGuL,GAD+B,WAEpDpY,GACP,GAAI4M,EAAO5M,GAAGgY,OAAS0F,EACrB,GAAc,gBAAXD,EAAyB,CAC1B,GAA0B,OAAvB7Q,EAAO5M,GAAG0I,SAAkB,CAC7B,IAAIsD,EAAIvP,EAAMmZ,UAAU5I,QAAO,SAAAE,GAAC,OAAIA,EAAEb,iBAAmBO,EAAO5M,GAAG0I,WAAawE,EAAEV,SAAWoR,GAAU1Q,EAAE3O,QAAUqf,MAC/G5R,EAAE7L,OAAS,GACbyM,EAAO5M,GAAGmZ,cAAgBnN,EAAE,GAAGE,YAC/BU,EAAO5M,GAAGqH,KAAO2E,EAAE,GAAG3E,KACtBuF,EAAO5M,GAAGwG,IAAMwF,EAAE,GAAGxF,IACrBoG,EAAO5M,GAAGyG,IAAMuF,EAAE,GAAGvF,IACrBmG,EAAO5M,GAAGyQ,aAAezE,EAAE,GAAGyE,aAC9B6H,EAAS1L,GACTwM,EAAWsE,KAIX9Q,EAAO5M,GAAGmZ,cAAgB,KAC1BvM,EAAO5M,GAAGqH,KAAO,KACjBuF,EAAO5M,GAAGwG,IAAM,EAChBoG,EAAO5M,GAAGyG,IAAM,IAChBmG,EAAO5M,GAAGyQ,aAAe,GACzB6H,EAAS1L,IAGbA,EAAO5M,GAAGzB,MAAQqf,OAEf,GAAc,cAAXH,EAAuB,CAC7B,IAAII,EAAQphB,EAAMqhB,eAAe9Q,QAAO,SAACnG,GAAD,OAAMA,EAAEhE,QAAU8a,KAAY,GACtE,GAAuB,OAApB/Q,EAAO5M,GAAGzB,MAAe,CAC1B,IAAIyN,EAAIvP,EAAMmZ,UAAU5I,QAAO,SAAAE,GAAC,OAAIA,EAAEb,iBAAmBsR,IAAczQ,EAAEV,SAAWI,EAAO5M,GAAGzB,OAAS2O,EAAE3O,QAAUqO,EAAO5M,GAAGzB,UACzHyN,EAAE7L,OAAS,GACbyM,EAAO5M,GAAGmZ,cAAgBnN,EAAE,GAAGE,YAC/BU,EAAO5M,GAAGqH,KAAO2E,EAAE,GAAG3E,KACtBuF,EAAO5M,GAAGwG,IAAMwF,EAAE,GAAGxF,IACrBoG,EAAO5M,GAAGyG,IAAMuF,EAAE,GAAGvF,IACrBmG,EAAO5M,GAAGyQ,aAAezE,EAAE,GAAGyE,aAC9B7D,EAAO5M,GAAGic,aAAe4B,EAAMA,EAAMtf,MAAM,GAC3C+Z,EAAS1L,GACTwM,EAAWsE,KAIX9Q,EAAO5M,GAAGmZ,cAAgB,KAC1BvM,EAAO5M,GAAGqH,KAAO,KACjBuF,EAAO5M,GAAGwG,IAAM,EAChBoG,EAAO5M,GAAGyG,IAAM,IAChBmG,EAAO5M,GAAGyQ,aAAe,GACzB7D,EAAO5M,GAAGic,aAAe4B,EAAMA,EAAMtf,MAAM,GAC3C+Z,EAAS1L,SAIXA,EAAO5M,GAAGic,aAAe4B,EAAMA,EAAMtf,MAAM,GAC3C+Z,EAAS1L,GAEXA,EAAO5M,GAAG0I,SAAWiV,IAvDlB3d,EAAI,EAAGA,EAAG4M,EAAOzM,OAAQH,IAAK,EAA9BA,IA6DL+d,EAAa,SAACtE,EAAKxZ,GACF,IAAlBwZ,EAAKrW,KAAKiE,KACXsT,EAAWd,MAAM5Z,GAAO+d,aAAavE,EAAKrW,MAG1CyX,EAAYhB,MAAM5Z,GAAO+d,aAAavE,EAAKrW,MAG7C6a,KAGIC,EAAW,SAACrX,EAAE7G,GAClB,IA5NkBme,EAAc1N,EAAa6G,EAAWC,EA4NpDlB,EAAO,GACX,GAAmB,IAAhBrW,EAAEoD,KAAKiE,KAAW,CACnB,IAAIkI,EAAI9S,EAAMmZ,UAAU5I,QAAO,SAACnG,GAAD,OAAMA,EAAEqF,cAAgBlM,EAAEoD,KAAKsF,YAAW,GACtE6G,IACD8G,EAAO9G,EAAE6O,aAhOKD,EAmOPne,EAAEoD,KAAK5E,MAnOciS,EAmOR4F,EAnOqBiB,EAmOhBtX,EAAEoD,KAAKkU,WAnOoBC,EAmOT,CAACC,OAAOxX,EAAEoD,KAAKoU,OAAQC,WAAWzX,EAAEoD,KAAKqU,YAnOfV,GAAQ,SAAA7J,GAAC,MAAI,CAAC9J,KAAK+a,EAAcnH,MAAK,EAAKvG,aAAaA,EAAa6G,WAAWA,EAAWC,aAAaA,OAsO7K8G,EAAc,SAAC5E,EAAKxZ,GACH,IAAlBwZ,EAAKrW,KAAKiE,KACXsT,EAAWd,MAAM5Z,GAAOqe,WAAW7E,EAAKrW,MAGxCyX,EAAYhB,MAAM5Z,GAAOqe,WAAW7E,EAAKrW,MAE3C6a,KAGF,SAASM,EAAcC,EAAIC,EAAMxe,GAQxB,IAAD,yDAAJ,GAAI,IAPNye,iBAOM,MAPM,kBAAM,GAOZ,MANNC,kBAMM,MANO,GAMP,MALNnc,aAKM,MALC,IAKD,MAJNoc,cAIM,MAJG,SAAC1e,GAAD,OAAO,GAAK,GAAFA,GAIb,MAHN2e,cAGM,MAHG,SAAC3e,GAAD,MAAS,GAAFA,GAGV,MAFN4e,kBAEM,MAFO,SAAC5e,GAAD,OAAQ,IAAIA,EAAE,GAErB,MADN6e,kBACM,MADM,GACN,EAEFC,EAAa,IACbC,EAAG,IACHC,EAAG,GACHC,EAAWC,OAAoB9f,GAAE,SAAAuH,GAAC,OAAK+X,EAAO/X,EAAEtH,MAAKA,GAAE,SAAAsH,GAAC,OAAKgY,EAAOhY,EAAEvH,MACtE+f,EAAMD,OAAUE,SAAS,CAACL,EAAGC,KACjCV,EAAMa,EAAIb,IAENe,MAAK,SAAS1Y,GAAKA,EAAEtH,EAAIsH,EAAE2Y,MAAQR,KAEvC,IAAIS,EAAKC,IACLC,GAAMF,EACVjB,EAAIe,MAAK,SAAA1Y,GACHA,EAAEvH,EAAIqgB,IAAIA,EAAK9Y,EAAEvH,GACjBuH,EAAEvH,EAAImgB,IAAIA,EAAK5Y,EAAEvH,MAGvB,IAAMsgB,EAAMR,KAAU9C,EAAeuD,SAChCC,OAAO,OACPC,KAAK,UAAW,CAAC,EAAG,EAAGvd,EAAQmd,EAAKF,EAAU,EAALR,IACzCc,KAAK,KAAKtB,GACVsB,KAAK,QAAQhB,GACbtc,MAAM,WAAY,WAEjB6M,EAAIsQ,EAAIE,OAAO,KAChBC,KAAK,cAAe,cACpBA,KAAK,YAAa,IAClBA,KAAK,YAHA,oBAG0BpB,EAH1B,YAGwCM,EAAKQ,EAH7C,MAKVnQ,EAAEwQ,OAAO,KACRC,KAAK,OAAO,QACZC,UAAU,KACV5c,KAAKgV,EAAMpL,QAAO,SAACnG,GAAD,OAAwB,MAAjBA,EAAEsS,kBAC3BrY,MAAK,SAAAmf,GACJ,IAAIC,EAAOD,EACRH,OAAO,KAoBV,OAnBAI,EAAKJ,OAAO,QACXC,KAAK,QAAS,KACdA,KAAK,SAAS,GACdA,KAAK,IAAIN,EAAG,IACZM,KAAK,OAAO,SACZA,KAAK,KAAI,SAAClZ,EAAE7G,GAAH,OAAO8e,EAAW9e,MAC5BkgB,EAAKJ,OAAO,QACXC,KAAK,OAAO,SACZA,KAAK,IAAIN,EAAG,IACZM,KAAK,KAAI,SAAClZ,EAAE7G,GAAH,OAAO8e,EAAW9e,MAC3B+f,KAAK,cAAe,SACpBtd,MAAM,cAAc,KACpBiJ,MAAK,SAAA7E,GAAC,OAAGA,EAAE6B,YACZwX,EAAKJ,OAAO,QACXC,KAAK,OAAO,SACZA,KAAK,IAAIN,EAAG,IACZM,KAAK,KAAI,SAAClZ,EAAE7G,GAAH,OAAO8e,EAAW9e,MAC3B+f,KAAK,cAAe,SACpBrU,MAAK,SAAA7E,GAAC,OAAIA,EAAEtI,SACN2hB,KAGI5Q,EAAEwQ,OAAO,KACnBC,KAAK,OAAQ,QACbA,KAAK,SAAU,QACfA,KAAK,iBAAkB,IACvBA,KAAK,eAAgB,KACrBC,UAAU,QACV5c,KAAKob,EAAI2B,SACTrf,KAAK,QACHif,KAAK,UAAU,SAAAlZ,GAAC,OAAI6X,EAAU7X,EAAE4W,SAAWiB,EAAU7X,EAAEnD,QAAU,MAAQ,QACzEqc,KAAK,kBAAkB,SAAAlZ,GAAC,OAAI6X,EAAU7X,EAAE4W,SAAWiB,EAAU7X,EAAEnD,QAAU,EAAI,QAC7Eqc,KAAK,IAAKZ,GAEF7P,EAAEwQ,OAAO,KACnBC,KAAK,kBAAmB,SACxBA,KAAK,eAAgB,GACrBC,UAAU,KACV5c,KAAKob,EAAI4B,eACTtf,MAAK,SAAAmf,GACE,IAAII,EAAYJ,EACfH,OAAO,KACPC,KAAK,QAAS,QA0Bf,OAzBAM,EAAUP,OAAO,QAChBC,KAAK,QAAS,KACdA,KAAK,SAAS,IACdA,KAAK,QAAS,SACfM,EAAUP,OAAO,QAChBC,KAAK,SAAS,SAAAlZ,GAAC,OAAIA,EAAEzD,KAAKqU,cAC1BsI,KAAK,SAAS,IACdA,KAAK,QAAS,QACdA,KAAK,QAAO,SAAAlZ,GAAC,OAAIyW,EAASzW,MAC3BwZ,EAAUP,OAAO,QAChBC,KAAK,QAAS,KACdA,KAAK,SAAS,IACdA,KAAK,QAAS,SACdO,GAAG,SAAQ,SAACzZ,EAAE7G,GAAH,OAAOke,EAASrX,EAAE7G,MAC9BqgB,EAAUP,OAAO,QAChBC,KAAK,KAAK,SAAAlZ,GAAC,OAAIA,EAAE+S,SAAW,EAAE,OAC9BmG,KAAK,cAAe,KACpBA,KAAK,KAAI,SAAAlZ,GAAC,OAAIA,EAAE+S,UAAW,EAAE,MAC7BlO,MAAK,SAAA7E,GAAC,iBAAQzB,WAAWyB,EAAEzD,KAAKqU,YAAYC,QAAQ,GAA9C,SACP2I,EAAUP,OAAO,QAChBC,KAAK,QAAQ,SAAAlZ,GAAC,OAAI6X,EAAU7X,GAAK,MAAQ,QACzCkZ,KAAK,KAAK,SAAAlZ,GAAC,OAAIA,EAAE+S,UAAY,GAAG,MAChCmG,KAAK,KAAK,SAAAlZ,GAAC,OAAIA,EAAE+S,SAAW,EAAI,OAChCmG,KAAK,eAAe,SAAAlZ,GAAC,OAAIA,EAAE+S,SAAW,SAAW,WACjDlO,MAAK,SAAA7E,GAAC,OAAIvK,EAAMuK,EAAEzD,SACZid,KAEZN,KAAK,aAAa,SAAAlZ,GAAC,0BAAiB+X,EAAO/X,EAAEtH,GAAG,GAA7B,YAAmCsf,EAAOhY,EAAEvH,GAAG,GAA/C,QAExB,OAAOsgB,EAAInG,OAGb,SAAS8G,EAAM/B,EAAIC,EAAMxe,GAOhB,IAAD,yDAAJ,GAAI,IANNye,iBAMM,MANM,kBAAM,GAMZ,MALNC,kBAKM,MALO,GAKP,MAJNnc,aAIM,MAJC,IAID,MAHNoc,cAGM,MAHG,SAAC1e,GAAD,OAAO,GAAK,GAAFA,GAGb,MAFN2e,cAEM,MAFG,SAAC3e,GAAD,MAAS,GAAFA,GAEV,MADN6e,kBACM,MADM,GACN,EAEFC,EAAa,IACbC,EAAG,IACHC,EAAG,GACHC,EAAWC,OAAoB9f,GAAE,SAAAuH,GAAC,OAAK+X,EAAO/X,EAAEtH,MAAKA,GAAE,SAAAsH,GAAC,OAAKgY,EAAOhY,EAAEvH,MACtE+f,EAAMD,OAAUE,SAAS,CAACL,EAAGC,KACjCV,EAAMa,EAAIb,IAENe,MAAK,SAAS1Y,GAAKA,EAAEtH,EAAIsH,EAAE2Y,MAAQR,KAEvC,IAAIS,EAAKC,IACLC,GAAMF,EACVjB,EAAIe,MAAK,SAAA1Y,GACHA,EAAEvH,EAAIqgB,IAAIA,EAAK9Y,EAAEvH,GACjBuH,EAAEvH,EAAImgB,IAAIA,EAAK5Y,EAAEvH,MAGvB,IAAMsgB,EAAMR,KAAUhD,EAAOyD,SACxBC,OAAO,OACPC,KAAK,UAAW,CAAC,EAAG,EAAGvd,EAAQmd,EAAKF,EAAU,EAALR,IACzCc,KAAK,KAAKtB,GACVsB,KAAK,QAAQhB,GACbtc,MAAM,WAAY,WAEjB6M,EAAIsQ,EAAIE,OAAO,KAChBC,KAAK,cAAe,cACpBA,KAAK,YAAa,IAClBA,KAAK,YAHA,oBAG0BpB,EAH1B,YAGwCM,EAAKQ,EAH7C,MAKGnQ,EAAEwQ,OAAO,KACnBC,KAAK,OAAQ,QACbA,KAAK,SAAU,QACfA,KAAK,iBAAkB,IACvBA,KAAK,eAAgB,KACrBC,UAAU,QACV5c,KAAKob,EAAI2B,SACTrf,KAAK,QACHif,KAAK,UAAU,SAAAlZ,GAAC,OAAI6X,EAAU7X,EAAE4W,SAAWiB,EAAU7X,EAAEnD,QAAU,MAAQ,QACzEqc,KAAK,kBAAkB,SAAAlZ,GAAC,OAAI6X,EAAU7X,EAAE4W,SAAWiB,EAAU7X,EAAEnD,QAAU,EAAI,QAC7Eqc,KAAK,IAAKZ,GAEF7P,EAAEwQ,OAAO,KACnBC,KAAK,kBAAmB,SACxBA,KAAK,eAAgB,GACrBC,UAAU,KACV5c,KAAKob,EAAI4B,eACTtf,MAAK,SAAAmf,GACE,IAAII,EAAYJ,EACfH,OAAO,KACPC,KAAK,QAAS,QACfM,EAAUP,OAAO,QAChBC,KAAK,QAAS,KACdA,KAAK,SAAS,IACdA,KAAK,QAAS,SACfM,EAAUP,OAAO,QAChBC,KAAK,SAAS,SAAAlZ,GAAC,OAAIA,EAAEzD,KAAKqU,cAC1BsI,KAAK,SAAS,IACdA,KAAK,QAAS,QACdA,KAAK,QAAO,SAAAlZ,GAAC,OAAIyW,EAASzW,MAC3BwZ,EAAUP,OAAO,QAChBC,KAAK,QAAS,KACdA,KAAK,SAAS,IACdA,KAAK,QAAS,SACdO,GAAG,SAAQ,SAACzZ,EAAE7G,GAAH,OAAOke,EAASrX,EAAE7G,MAC9BqgB,EAAUP,OAAO,QAChBC,KAAK,KAAK,SAAAlZ,GAAC,OAAIA,EAAE+S,SAAW,EAAE,OAC9BmG,KAAK,cAAe,KACpBA,KAAK,KAAI,SAAAlZ,GAAC,OAAIA,EAAE+S,UAAW,EAAE,MAC7BlO,MAAK,SAAA7E,GAAC,iBAAQzB,WAAWyB,EAAEzD,KAAKqU,YAAYC,QAAQ,GAA9C,SACP2I,EAAUP,OAAO,QAChBC,KAAK,QAAQ,SAAAlZ,GAAC,OAAI6X,EAAU7X,GAAK,MAAQ,QACzCkZ,KAAK,KAAK,SAAAlZ,GAAC,OAAIA,EAAE+S,UAAY,GAAG,MAChCmG,KAAK,KAAK,SAAAlZ,GAAC,OAAIA,EAAE+S,SAAW,EAAI,OAChCmG,KAAK,eAAe,SAAAlZ,GAAC,OAAIA,EAAE+S,SAAW,SAAW,WACjDlO,MAAK,SAAA7E,GAAC,OAAIvK,EAAMuK,EAAEzD,SACnBid,EAAUP,OAAO,UAChBC,KAAK,KAAI,SAAClZ,GAAD,OAAMA,EAAE6V,OAAQ,EAAE,KAC3BqD,KAAK,OAAO,QACZA,KAAK,MAAK,SAAClZ,GAAD,OAAMA,EAAE6V,OAAQ,GAAG,KAC7BqD,KAAK,MAAM,SAAClZ,EAAE7G,GAAO,MAAO,IAAIwI,SAAS3B,EAAEvH,GAAGgR,WAAW9H,SAAS3B,EAAEtH,GAAG+Q,cACvEgQ,GAAG,aAAa,SAAClS,EAAD,GAAiB,IAARxN,EAAO,oBAACyf,EAAUG,OAAO,KAAKhY,SAAS5H,EAAEtB,GAAGgR,WAAW9H,SAAS5H,EAAErB,GAAG+Q,YAAY7N,MAAM,OAAO,UACvH6d,GAAG,YAAa,SAAClS,EAAD,GAAiB,IAARxN,EAAO,oBAACyf,EAAUG,OAAO,KAAKhY,SAAS5H,EAAEtB,GAAGgR,WAAW9H,SAAS5H,EAAErB,GAAG+Q,YAAY7N,MAAM,OAAO,WACvH6d,GAAG,SAAS,SAACzZ,EAAE7G,GAAH,OAASqe,EAAYre,EAAEC,MACpCogB,EAAUP,OAAO,SAChBC,KAAK,cAAa,SAAClZ,GAAD,OAAMA,EAAE6V,OAAQ,iDAAiD,QACnFqD,KAAK,SAAS,SAAClZ,GAAD,OAAMA,EAAE6V,OAAQ,EAAG,KACjCqD,KAAK,UAAU,SAAClZ,GAAD,OAAMA,EAAE6V,OAAQ,EAAE,KACjCqD,KAAK,KAAI,SAAClZ,GAAD,OAAMA,EAAE6V,OAAQ,GAAG,KAC5BqD,KAAK,KAAI,SAAClZ,GAAD,OAAMA,EAAE6V,QAAS,EAAE,KAC5BqD,KAAK,QAAQ,SACEM,EAAUP,OAAO,UAChCC,KAAK,IAAK,GACVtd,MAAM,QAAO,SAAAoE,GAAC,OAAIA,EAAEzD,KAAK6W,OAAO,OAAO,eACvC8F,KAAK,MAAM,SAAClZ,GAAD,OAAMA,EAAE6V,OAAQ,GAAI,MAC/BqD,KAAK,MAAM,SAAClZ,EAAE7G,GAAO,MAAO,IAAIwI,SAAS3B,EAAEvH,GAAGgR,WAAW9H,SAAS3B,EAAEtH,GAAG+Q,cACvEgQ,GAAG,aAAa,SAAClS,EAAD,GAAiB,IAARxN,EAAO,qBACV,IAAlBA,EAAEwC,KAAK6W,QAAiBoG,EAAUG,OAAO,KAAKhY,SAAS5H,EAAEtB,GAAGgR,WAAW9H,SAAS5H,EAAErB,GAAG+Q,YAAY7N,MAAM,OAAO,WAElH6d,GAAG,YAAa,SAAClS,EAAD,GAAiB,IAARxN,EAAO,qBACV,IAAlBA,EAAEwC,KAAK6W,QAAiBoG,EAAUG,OAAO,KAAKhY,SAAS5H,EAAEtB,GAAGgR,WAAW9H,SAAS5H,EAAErB,GAAG+Q,YAAY7N,MAAM,OAAO,gBAElH6d,GAAG,SAAS,SAACzZ,EAAE7G,GAAH,OAAS+d,EAAW/d,EAAEC,MAUnC,OATAogB,EAAUP,OAAO,SAChBC,KAAK,aAAa,gDAClBA,KAAK,QAAS,IACdA,KAAK,SAAU,IACfA,KAAK,KAAI,SAAClZ,GAAD,OAAMA,EAAE6V,OAAQ,GAAG,MAC5BqD,KAAK,KAAK,GACVA,KAAK,QAAQ,SACdM,EAAUP,OAAO,SAChBpU,MAAK,SAAA7E,GAAC,gBAAOzB,WAAWyB,EAAEzD,KAAKqU,YAAYC,QAAQ,GAA7C,sBAA6DtS,WAAWyB,EAAEzD,KAAKoU,YAC/E6I,KAEZN,KAAK,aAAa,SAAAlZ,GAAC,0BAAiB+X,EAAO/X,EAAEtH,GAAG,GAA7B,YAAmCsf,EAAOhY,EAAEvH,GAAG,GAA/C,QACxB,OAAOsgB,EAAInG,OAGb,IAAMwE,EAAa,WAGT,IAAD,yDAAP,GAAO,IAFPW,cAEO,MAFE,SAAC1e,GAAD,OAAO,GAAK,GAAFA,GAEZ,MADP2e,cACO,MADE,SAAC3e,GAAD,MAAS,GAAFA,GACT,EACPkf,KAAA,cAA2BqB,SAC3B,cAAc5jB,OAAOC,KAAK6d,EAAWd,OAArC,eAA4C,CAAvC,IAAI7Z,EAAC,KACJ0gB,EAAItB,KAAazE,EAAWd,MAAM7Z,GAAG2gB,WAAW,SAAS9Z,GAAG,OAAOA,EAAE+S,YACzE2G,EAAMG,EAAD,aAAS1gB,GAAIA,EAAE,CAClB4e,OAAS7C,EAAMnd,OAAOuB,OAAS,EAAG,SAACD,GAAD,OAAK,IAAM,GAAFA,GAAM0e,EACjDC,OAASA,EACTE,WAAY,cAGhBK,KAAA,eAA4BqB,SAC5B,IAXO,iBAWF,IAAIzgB,EAAC,KACJvD,EAAMkY,cAAc3H,QAAO,SAACnG,GAAD,OAAMA,EAAEnI,SAAWmc,EAAYhB,MAAM7Z,GAAG2gB,UAAUtD,cAAa,KAC5F+B,KAAA,eAAqBpf,IAAKygB,SAE1BF,EADQnB,KAAavE,EAAYhB,MAAM7Z,GAAG2gB,WAAW,SAAS9Z,GAAG,OAAOA,EAAE+S,YACrE,cAAU5Z,GAAIA,EAAE,CACnB+e,WAAY,iBALlB,MAAcliB,OAAOC,KAAK+d,EAAYhB,OAAtC,eAA8C,KAoDhD,SAAS+G,EAAcC,EAAcC,EAAMC,EAAKC,EAAMC,EAAgBC,EAAiBC,EAAYC,EAAOC,EAAOC,EAAMC,GACrHnN,GAAQ0M,EAAMC,EAAKC,EAAMzD,EAA2B0D,EAAgBC,GAAkBC,GAAapW,MAAK,SAACC,GACvG,GAAGA,EAAI,CAEL,IAFK,EAEDwW,EAAY/kB,EAAMmZ,UAAU5I,QAAO,SAACnG,GAAD,OAAMA,EAAEqF,cAAgB6U,KAAO,GAClEU,EAAgB,GAHf,cAIYzW,GAJZ,yBAII0W,EAJJ,QAKCrE,EAAa,KACjB,GAAa,IAAV2D,GAAeQ,EAAU,CAC1B,IAAIpD,EAAcoD,EAAU/Q,aAAazD,QAAO,SAAChB,GAAD,OAAQA,EAAE2E,SAAUL,aAAgBoR,EAAK7Y,MAAOyH,cAAc,GAC3G8N,IAAYf,EAAYe,EAAYxN,iBAEzC,GAAc,IAAVoQ,GAA8B,gBAAfU,EAAK7Y,OAAqC,IAAVmY,GAA8B,OAAf3D,GAAsC,gBAAfqE,EAAK7Y,MAAyB,CACrH,IAAIiG,EAAItF,KAAKoT,MAAMpT,KAAKC,UAAUgT,EAAciF,EAAD,cAAab,GAAgBO,EAAOH,EAAgB5D,EAAW8D,EAAYI,KAC1HE,EAAcviB,KAAK4P,KARvB,2BAAsB,IAJjB,8BAeL,IAAI6S,EAAU,GACd,GAAGL,EACDA,EAAMM,YAAYR,EAAOK,QAEtB,GAAkB,IAAfF,EACN,IAAI,IAAIrhB,EAAE,EAAEA,EAAEuhB,EAActhB,OAAOD,IACjCyhB,EAAUzhB,GAAG,IAAImZ,GAAUoI,EAAcvhB,IAI7C,IAAI2hB,EAAQ,cAAUhB,EAAc,GAChCiB,EAAY1J,EAAMpL,QAAO,SAACnG,GAAD,OAAMA,EAAEmR,OAAO6J,KAC5C,GAAGC,EAAU,IAAML,EAActhB,OAAO,GACtC,GAAG2hB,EAAU,GAAG3I,cAAc,CAC5B,IAD4B,EACxBnZ,EAAI,EADoB,cAEVyhB,GAFU,IAE5B,2BAAgC,CAAC,IAAxBtH,EAAuB,QAC3BmH,EACDV,EAAcC,EAAc,EAAEiB,EAAU,GAAGjO,KAAKiO,EAAU,GAAG3I,cAAc2I,EAAU,GAAGza,KAAK8S,EAAM3b,MAAMsjB,EAAU,GAAG7J,iBAAiBkJ,EAAYhH,EAAMkH,EAAOC,EAAMC,GAEjJ,IAAfA,GACNX,EAAcC,EAAc,EAAEiB,EAAU,GAAGjO,KAAKiO,EAAU,GAAG3I,cAAc2I,EAAU,GAAGza,KAAK8S,EAAM3b,MAAMsjB,EAAU,GAAG7J,iBAAiBkJ,EAAYhH,EAAMna,EAAE2hB,EAAU3hB,GAAGuhB,GAE5KvhB,GAAG,GATyB,oCAa5B,GAAkB,IAAfuhB,EACD,GAAW,OAARD,EAAa,CACd,IAAIS,EAAUllB,OAAOgQ,OAAO,GAAG8N,EAAWd,OAC1CkI,EAAQV,GAAUC,EAClB1G,GAAc,SAAC1N,GAAD,mBAAC,eAASA,GAAV,IAAY2M,MAAMkI,YAGhCnH,GAAc,SAAC1N,GAAD,mBAAC,eAASA,GAAV,IAAY2M,MAAM8H,YAG/B,GAAkB,IAAfJ,GACHD,GAASD,EAAO,CACjB,IAAIU,EAAUllB,OAAOgQ,OAAO,GAAGgO,EAAYhB,OAC3CkI,EAAQV,GAAUC,EAClBxG,GAAe,SAAC5N,GAAD,mBAAC,eAASA,GAAV,IAAY2M,MAAMkI,aAMvC,GAAkB,IAAfR,EACD,GAAGF,GAAUC,EAAM,CACjB,IAAIS,EAAUllB,OAAOgQ,OAAO,GAAG8N,EAAWd,OAC1CkI,EAAQV,GAAUC,EAClB1G,GAAc,SAAC1N,GAAD,mBAAC,eAASA,GAAV,IAAY2M,MAAMkI,YAGhCnH,GAAc,SAAC1N,GAAD,mBAAC,eAASA,GAAV,IAAY2M,MAAM8H,YAG/B,GAAkB,IAAfJ,GACHD,GAASD,EAAO,CACjB,IAAIU,EAAUllB,OAAOgQ,OAAO,GAAGgO,EAAYhB,OAC3CkI,EAAQV,GAAUC,EAClBxG,GAAe,SAAC5N,GAAD,mBAAC,eAASA,GAAV,IAAY2M,MAAMkI,YA8B7C,SAAS3I,EAAW4I,GAClB,IAAIC,EAAkBzZ,SAASwZ,EAAaE,OAAO,IAC/ClK,EAAOI,EAAMpL,QAAO,SAACnG,GAAD,OAAMA,EAAEmR,OAAOgK,KACvC,GAAmB,UAAhBA,EAAwB,CACzB,IADyB,EACrBG,EAAO,GACPC,EAAK5Y,KAAKoT,MAAMpT,KAAKC,UAAUsS,EAAMnd,SACrCyjB,EAAO,EAHc,cAIJD,GAJI,IAIzB,2BAAwB,CAAC,IAAhBE,EAAe,QAClBC,EAAS1lB,OAAOgQ,OAAO,GAAGyV,GAC1BxT,EAAI2N,EAAc8F,EAAQ,QAAQ,KAAK,KAAMA,EAAQ7jB,OAAO6jB,EAAQ7jB,OAAO,GAC/EyjB,EAAKE,GAAM,IAAIhJ,GAAUvK,GACzBuT,GAAM,GARiB,8BAUzBvH,GAAe,SAAC5N,GAAD,MAAM,CAAE2M,MAAMsI,EAAMzH,MAAOxN,EAAEwN,SAE9C,GAAG1C,EAAK,GACN,GAAmB,UAAhBgK,EAAwB,CACzBpH,GAAc,SAAC1N,GAAD,MAAM,CAAE2M,MAAM,GAAIa,MAAOxN,EAAEwN,SACzC,cAAc7d,OAAOC,KAAK+d,EAAYhB,OAAtC,eAA6C,CAAxC,IAAwC,EAApC7Z,EAAC,KACJwiB,EAAU3lB,OAAOgQ,OAAO,GAAG,CAACgO,EAAYhB,MAAM7Z,KAC9CyiB,EAAQ5H,EAAYhB,MAAM7Z,GAAGsa,gBAArB,cAA4C2H,EAAgB,GAAIpH,EAAYhB,MAAM7Z,GAAG2gB,WAFtD,cAG3B8B,GAH2B,IAG3C,IAAI,EAAJ,qBAAsB,CAAC,IAAfC,EAAc,QACpB9B,EAAcqB,EAAgBjK,EAAK,GAAGnE,KAAKmE,EAAK,GAAGmB,cAAcnB,EAAK,GAAG3Q,KAAK,GAAG2Q,EAAK,GAAGC,iBAAiByK,EAAKpL,WAAWoL,EAAK1iB,EAAEwiB,EAAQ,GAAG,IAJnG,oCAS3C,CACF,cAAc3lB,OAAOC,KAAK6d,EAAWd,OAArC,eAA4C,CAAvC,IAAuC,EAAnC7Z,EAAC,KACJwiB,EAAU3lB,OAAOgQ,OAAO,GAAG,CAAC8N,EAAWd,MAAM7Z,KAC7CyiB,EAAQ9H,EAAWd,MAAM7Z,GAAGsa,gBAApB,cAA2C2H,EAAgB,GAAItH,EAAWd,MAAM7Z,GAAG2gB,WAFrD,cAG1B8B,GAH0B,IAG1C,IAAI,EAAJ,qBAAsB,CAAC,IAAfC,EAAc,QACpB9B,EAAcqB,EAAgBjK,EAAK,GAAGnE,KAAKmE,EAAK,GAAGmB,cAAcnB,EAAK,GAAG3Q,KAAKqb,EAAKlkB,MAAMwZ,EAAK,GAAGC,iBAAiByK,EAAKpL,WAAWoL,EAAK1iB,EAAEwiB,EAAQ,GAAG,IAJ5G,+BAO5C,cAAc3lB,OAAOC,KAAK+d,EAAYhB,OAAtC,eAA6C,CAAxC,IAAwC,EAApC7Z,EAAC,KACJwiB,EAAU3lB,OAAOgQ,OAAO,GAAG,CAACgO,EAAYhB,MAAM7Z,KAC9CyiB,EAAQ5H,EAAYhB,MAAM7Z,GAAGsa,gBAArB,cAA4C2H,EAAgB,GAAIpH,EAAYhB,MAAM7Z,GAAG2gB,WAFtD,cAG3B8B,GAH2B,IAG3C,IAAI,EAAJ,qBAAsB,CAAC,IAAfC,EAAc,QACpB9B,EAAcqB,EAAgBjK,EAAK,GAAGnE,KAAKmE,EAAK,GAAGmB,cAAcnB,EAAK,GAAG3Q,KAAKqb,EAAKlkB,MAAMwZ,EAAK,GAAGC,iBAAiByK,EAAKpL,WAAWoL,EAAK1iB,EAAEwiB,EAAQ,GAAG,IAJ3G,iCAgCnD,OAtNA1gB,qBAAU,WACRmc,MACA,CAACtD,EAAWd,MAAMgB,EAAYhB,QA+HhC/X,qBAAU,WACR,IAAI6gB,EAAYvK,EAAMpL,QAAO,SAACnG,GAAD,MAAe,UAATA,EAAEmR,QAAiB,GACtD,GAAG+D,EAAMnd,QAAU+jB,EAAUxJ,cAC3B,cAActc,OAAOC,KAAK+d,EAAYhB,OAAtC,eAA6C,CAAxC,IAAI7Z,EAAC,KACJwiB,EAAU3lB,OAAOgQ,OAAO,GAAG,CAACgO,EAAYhB,MAAM7Z,KAC9C4iB,EAAU/lB,OAAOgQ,OAAO,GAAGgO,EAAYhB,MAAM7Z,GAAG2gB,WACpDC,EAAc,EAAE+B,EAAU9O,KAAK8O,EAAUxJ,cAAcwJ,EAAUtb,KAAK,GAAGsb,EAAU1K,iBAAiB2K,EAAQtL,WAAWsL,EAAQ5iB,EAAEwiB,EAAQ,GAAG,MAGhJ,CAAC3H,EAAYH,OAEf5Y,qBAAU,WACR,IAAI6gB,EAAYvK,EAAMpL,QAAO,SAACnG,GAAD,MAAe,UAATA,EAAEmR,QAAiB,GACnD2K,EAAUxJ,eACTyH,EAAc,EAAE+B,EAAU9O,KAAK8O,EAAUxJ,cAAcwJ,EAAUtb,KAAK,GAAGsb,EAAU1K,iBAAiB,OAAO,KAAK,KAAK,KAAK,KAE9H,CAAC0C,EAAWD,OAsEd,gCACE,sBAAK3Y,UAAU,oBAAf,UACA,gCACE,wBAAQA,UAAU,gBAAgB6B,QAAS,YA7nB3B,WAClBwb,KAAA,sBAAmCqB,SACnC,cAAc5jB,OAAOC,KAAK6d,EAAWd,OAArC,eAA4C,CAAvC,IAAI7Z,EAAC,KAERue,EADQa,KAAazE,EAAWd,MAAM7Z,GAAG2gB,WAAW,SAAS9Z,GAAG,OAAOA,EAAE+S,YAC5D,cAAU5Z,GAAIA,EAAE,CAC3B4e,OAASniB,EAAMkY,cAAcxU,OAAQ,EAAG,SAACD,GAAD,OAAO,IAAM,GAAFA,GAAO,SAACA,GAAD,OAAO,GAAK,GAAFA,GACpE4e,WAAYriB,EAAMkY,cAAcxU,OAAQ,EAAG,SAACD,GAAD,OAAY,IAAIA,EAAE,EAAX,KAAc,SAACA,GAAD,OAAQ,IAAIA,EAAE,GAC9E6e,WAAY,sBAEhBK,KAAA,uBAAoCqB,SACpC,IAVwB,iBAUnB,IAAIzgB,EAAC,KACJvD,EAAMkY,cAAc3H,QAAO,SAACnG,GAAD,OAAMA,EAAEnI,SAAWmc,EAAYhB,MAAM7Z,GAAG2gB,UAAUtD,cAAa,IAE5FkB,EADQa,KAAavE,EAAYhB,MAAM7Z,GAAG2gB,WAAW,SAAS9Z,GAAG,OAAOA,EAAE+S,YAC7D,eAAW5Z,GAAIA,EAAE,CAC5B8e,WAAYriB,EAAMkY,cAAcxU,OAAQ,EAAG,SAACD,GAAD,OAAY,IAAIA,EAAE,EAAX,KAAc,SAACA,GAAD,OAAQ,IAAIA,EAAE,GAC9E6e,WAAY,wBALlB,MAAcliB,OAAOC,KAAK+d,EAAYhB,OAAtC,eAA8C,IAS9C,cAAchd,OAAOC,KAAK6d,EAAWd,OAArC,eAA4C,CAAvC,IAAI7Z,EAAC,KACRwa,EAAQ,QAAD,OAASxa,GAAT,yBAAgCA,GAAK,CAC1C6iB,MAAO,EACPC,OAAQ,MACRC,QAAS,IACTC,UAAU,EACVC,OAAQ,KACRzgB,MAAM,IACN0gB,UAAW,IACVnY,MAAK,SAAAoY,OAGV,cAActmB,OAAOC,KAAK+d,EAAYhB,OAAtC,eAA6C,CAAxC,IAAI7Z,EAAC,KACRwa,EAAQ,SAAD,OAAUxa,GAAV,+BAAuCA,GAAK,CACjD6iB,MAAO,EACPC,OAAQ,MACRC,QAAS,IACTC,UAAU,EACVC,OAAQ,KACRzgB,MAAM,IACN0gB,UAAW,IACVnY,MAAK,SAAAoY,QAqlB0CC,IAAlD,SAAkE,cAAC,KAAD,MAClE,wBAAQrhB,UAAU,gBAAgB6B,QAAS,WAzB7C0U,EAAS,CACP,CAACN,KAAK,QAASmB,cAAe,KAAM9R,KAAM,KAAMoJ,aAAc,GAAIjK,IAAK,EAAGC,IAAK,IAAOiC,SAAU,KAAMnK,MAAM,KAAM8Z,aAAa,UAAWxE,KAAK,EAAGoE,iBAAiB,GAAIgE,aAAa,IACpL,CAACjE,KAAK,QAASmB,cAAe,KAAM9R,KAAM,KAAMoJ,aAAc,GAAIjK,IAAK,EAAGC,IAAK,IAAOiC,SAAU,KAAMnK,MAAM,KAAM8Z,aAAa,UAAWxE,KAAK,EAAGoE,iBAAiB,GAAIgE,aAAa,IACpL,CAACjE,KAAK,QAASmB,cAAe,KAAM9R,KAAM,KAAMoJ,aAAc,GAAIjK,IAAK,EAAGC,IAAK,IAAOiC,SAAU,KAAMnK,MAAM,KAAM8Z,aAAa,UAAWxE,KAAK,EAAGoE,iBAAiB,GAAIgE,aAAa,IACpL,CAACjE,KAAK,QAASmB,cAAe,KAAM9R,KAAM,KAAMoJ,aAAc,GAAIjK,IAAK,EAAGC,IAAK,IAAOiC,SAAU,KAAMnK,MAAM,KAAM8Z,aAAa,UAAWxE,KAAK,EAAGoE,iBAAiB,GAAIgE,aAAa,MAEtLD,EAAS,CAAChE,KAAK,QAAQpZ,OAAO,KAC9Bgc,EAAc,CAACf,MAAM,GAAGa,KAAK,KAC7BI,EAAe,CAACjB,MAAM,GAAGa,KAAK,KAC9B0E,KAAA,cAA2BqB,SAC3BrB,KAAA,eAA4BqB,SAC5BrB,KAAa,sBAAsBqB,SACnCrB,KAAa,uBAAuBqB,UAalC,SAA8D,cAAC,IAAD,SAE7D1E,EAAMnd,OAAOuB,OAAS,EACrB,8BACE,qBAAM4B,UAAU,YACT,KAGTqW,EAAMtZ,KAAI,SAAAkZ,GACR,OACE,gCACKlN,EAAakN,EAAKA,MACnB,sBAAKjW,UAAU,QAAf,UACGwa,EAAqBvE,EAAKA,KAAKA,EAAKiE,cACrC,wBACAla,UAAU,eACV6B,QAAS,WAzuBuBuY,EAAoB,CAACnF,MAAK,EAAKgB,KA0uBjCA,KAH9B,SAME,cAAC,KAAD,eAOd,wBAAQqL,KAAK,SAASthB,UAAU,iBAAiB6B,QAAU,kBArC/C,WACd,IAAI0f,EAAU,QAASlL,EAAMjY,OAAO,GAAGmQ,WACvCgI,EAAS,GAAD,mBAAKF,GAAL,CAAW,CAACJ,KAAKsL,EAASnK,cAAe,KAAM1I,aAAa,GAAIpJ,KAAM,KAAMb,IAAK,EAAGC,IAAK,IAAMiC,SAAU,KAAMnK,MAAM,KAAM8Z,aAAa,UAAWxE,KAAK,EAAGoE,iBAAiB,OAmCjHsL,IAAjE,kBAEF,qBAAKC,IAAKpH,EAAQ5X,GAAG,WACrB,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAAM,uBAC5Y,qBAAKgf,IAAKlH,IACV,cAAC,GAAD,CAAiBtF,KAAMA,EAAKA,KAAMD,QAASA,EAAS3T,KAAM4T,EAAK5T,KAAMqN,aAAcuG,EAAKvG,aAAc6G,WAAYN,EAAKM,WAAYC,aAAcP,EAAKO,aAAc3B,UAAWnZ,EAAMmZ,YACrL,cAAC,GAAD,CAAmBoB,KAAMkF,EAAiBlF,KAAMD,QAASoF,EAAqBnE,KAAMkE,EAAiBlE,KAAMM,SAAUA,EAAUF,MAAOA,EAAOgB,WAAYA,QCvzB9IqK,GA5BS,SAAChnB,GAErB,OACI,gCACI,cAACmR,EAAA,EAAD,UACI,0CAAanR,EAAM+B,MAAME,YAE7B,cAACkP,EAAA,EAAD,UACI,eAACI,EAAA,EAAD,CAAK0B,GAAI,GAAT,UACI,eAAC9B,EAAA,EAAD,WACI,uBACA,qBAAK7L,UAAU,QAAf,SACI,wDAAwBtF,EAAM+B,MAAMgZ,YAExC,uBACA,qBAAKzV,UAAU,QAAf,SACI,6CAAgBqD,WAAW3I,EAAM+B,MAAMiZ,YAAYC,QAAQ,GAA3D,qBAGR,cAAC,GAAD,CAA0BtU,KAAM3G,EAAM+B,MAAMklB,YAAYjnB,EAAM+B,MAAMklB,YAAY,GAAI9N,UAAWnZ,EAAMmZ,YACrG,wBAAQ7T,UAAU,kBAAlB,6BCuFL4hB,GAxGA,WAEb,MAAyBjnB,mBAAS,CAACkZ,UAAU,GAAIxM,UAAU,GAAIlD,OAAQ,CAAC,qBAAqB,UAAU,aAAa,4BAAyB,2BAA2B,YAAY,QAAQ,QAAQ,QAAQ,SAAS,8BAA2B,gCAAhP,mBAAOgV,EAAP,KAAa0I,EAAb,KACA,EAA0ClnB,mBAAS,IAAnD,mBAAOiY,EAAP,KAAsBC,EAAtB,KACA,EAAwBlY,mBAAS,IAAjC,mBAAO8V,EAAP,KAAaC,EAAb,KACA,EAAwC/V,mBAAS,IAAjD,mBAAO4V,EAAP,KAAqBC,EAArB,KACA,EAAsB7V,mBAAS,IAA/B,mBAAYgW,GAAZ,WACA,EAAwBhW,mBAAS,CAACL,OAAM,EAAMmC,MAAM,KAApD,mBAAOwY,EAAP,KAAaD,EAAb,KACA,EAA8Bra,mBAAS,IAAvC,mBAAOmY,EAAP,KAAgBgP,EAAhB,KAEM/M,EAAc,kBAAMC,EAAQ,CAAC1a,OAAM,EAAMmC,MAAM,MAyBrD,SAASslB,EAAShV,GAChB,IAAIxP,EAAIwP,EAAEvQ,MAAMuQ,EAAEvQ,MAAMuQ,EAAEtC,OAC1B,MAAO,CAAEnQ,MAAOiD,EAAGhD,MAAOgD,GAG5BwC,qBAAU,WACRgJ,IAAeC,MAAK,SAACC,GACnB,IAAI8D,EAlBR,SAAiBrQ,EAAKsQ,GAQrB,OAPgBtQ,EAAIuQ,QAAO,SAAUC,EAAKC,GAKvC,OAJKD,EAAIC,EAAaH,MACpBE,EAAIC,EAAaH,IAAa,IAEhCE,EAAIC,EAAaH,IAAW7P,KAA5B,2BAAqCgQ,GAArC,IAAmD/P,KAAM+P,EAAY,eAAmB,IAAIA,EAAY,UACjGD,IACP,IAWQE,CAAQnE,EAAK,kBACjBvM,EAAM,GACV,IAAK,IAAI4P,KAAOS,EACVA,EAAEM,eAAef,IACnB5P,EAAIS,KACF,CACE2D,MAAOwL,EACPhK,OAAQyK,EAAET,GACV9P,MAAQuQ,EAAET,GAAKvP,KAAI,SAAAQ,GACjB,OAAOwkB,EAASxkB,QAM1BskB,GAAS,SAAA1W,GAAC,kCAASgO,GAAT,IAAgB9R,UAAU3K,EAAKmX,UAAW5K,YAErD,IAUH,OACE,sBAAKjJ,UAAU,WAAf,UACE,cAAC,GAAD,CAAgB8S,QAASA,EAASG,WA5DnB,SAACrY,GAAD,OAAeoa,EAAQ,CAAC1a,OAAM,EAAKmC,MAAM7B,KA4DE2H,WA1D5C,SAACvF,GACfwT,EAAgBxT,GAChB0T,EAAQ,oBAwD0E1Q,UAAU,MAAM6S,iBAAkBA,EAAkBD,cAAeA,IACrJ,sBAAK5S,UAAU,QAAf,UACE,cAAC,GAAD,CAAM4S,cAAeA,EAAemJ,eAAgB5C,EAAM9R,UAAWA,UAAW8R,EAAM9R,UAAUtK,KAAI,SAAAQ,GAAC,OAZjF,SAACA,GACzB,MAAO,CAAEjD,MAAOiD,EAAEuD,MAAOvG,MAAOgD,EAAEuD,OAW2E6T,CAAkBpX,MAAK4G,OAAQgV,EAAMhV,OAAOpH,KAAI,SAAAQ,GAAC,OARhI,SAACA,GAC/B,MAAO,CAAEjD,MAAOiD,EAAGhD,MAAOgD,GAOwIykB,CAAwBzkB,MAAKsW,UAAWsF,EAAMtF,YAC5M,qBAAK7T,UAAW,kBAAkByQ,EAAlC,SACE,sBAAKzQ,UAAW,qCAAsCyQ,EAAtD,UACE,wBAAQ5O,QAAS,kBAAM6O,EAAQ,KAAK1Q,UAAU,mBAA9C,eACA,qBAAKA,UAAU,qBAAf,SACE,cAAC,GAAD,CAAiBvD,MAAO8T,EAAcsD,UAAWsF,EAAMtF,UAAWzD,aA5D1D,SAACpT,GACjB2T,EAAO3T,GACPwT,EAAgB,IAChBE,EAAQ,KAyD8FF,gBAAiBA,cAKvH,eAAC0E,GAAA,EAAD,CAAOD,KAAMA,EAAK3a,MAAO6a,OAAQJ,EAAjC,UACE,cAACG,GAAA,EAAMlH,OAAP,CAAcoH,aAAW,EAAzB,SACE,cAACF,GAAA,EAAMG,MAAP,+BAEF,eAACH,GAAA,EAAMjH,KAAP,iEAA0DgH,EAAKxY,MAAME,OAArE,OACA,eAACuY,GAAA,EAAMW,OAAP,WACE,cAACxH,EAAA,EAAD,CAAQ0B,QAAQ,YAAYlO,QAASkT,EAArC,sBAGA,cAAC1G,EAAA,EAAD,CAAQ0B,QAAQ,SAASlO,QAAS,WAChCigB,EAAW7M,EAAKxY,OAChBsY,KAFF,sCCrGK,IC+DAkN,OAvDf,WACE,OACE,eAAC,IAAD,WACE,qBAAKjiB,UAAU,MAAf,SACE,qBAAKA,UAAU,gDAAf,SACE,sBAAKA,UAAU,kBAAf,UACE,mBAAGA,UAAU,eAAb,gBACA,wBACEA,UAAU,iBACVwC,KAAK,SACL,iBAAe,WACf,iBAAe,uBACf,gBAAc,sBACd,gBAAc,QACd,aAAW,oBAPb,SASE,sBAAMxC,UAAU,0BAElB,qBAAKA,UAAU,2BAA2ByC,GAAG,sBAA7C,SACE,qBAAIzC,UAAU,kCAAd,UACE,oBAAIA,UAAU,WAAd,SACE,cAAC,IAAD,CAAMA,UAAU,kBAAkB,eAAa,OAAOkiB,GAAG,IAAzD,sBAIF,oBAAIliB,UAAU,WAAd,SACE,cAAC,IAAD,CAAMA,UAAU,WAAWkiB,GAAG,eAA9B,oCAIF,oBAAIliB,UAAU,WAAd,SACE,cAAC,IAAD,CAAMA,UAAU,WAAWkiB,GAAG,kBAA9B,uCAIF,oBAAIliB,UAAU,WAAd,SACE,cAAC,IAAD,CAAMA,UAAU,WAAWkiB,GAAG,eAA9B,0DASZ,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,UAAWT,KACjC,cAAC,IAAD,CAAOO,OAAK,EAACC,KAAK,eAAeC,UAAWzc,IAC5C,cAAC,IAAD,CAAOuc,OAAK,EAACC,KAAK,kBAAkBC,UAAW/R,IAC/C,cAAC,IAAD,CAAO6R,OAAK,EAACC,KAAK,eAAeC,UAAWpR,W,OCnDpDqR,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFve,SAASC,eAAe,W","file":"static/js/main.97db4b0b.chunk.js","sourcesContent":["export const nacimientoVars = [\r\n  {\r\n    value: \"pesocat\",\r\n    label: \"peso (cat)\",\r\n  },\r\n  {\r\n    value: \"ERN_Peso\",\r\n    label: \"peso\",\r\n  },\r\n  {\r\n    value: \"ERN_Talla\",\r\n    label: \"talla\",\r\n  },\r\n  {\r\n    value: \"ERN_PC\",\r\n    label: \"perímetro cefálico\",\r\n  },\r\n  {\r\n    value: \"RCIUpesoFenton\",\r\n    label: \"RCIUpesoFenton\",\r\n  },\r\n  {\r\n    value: \"RCIUfentonpesotalla\",\r\n    label: \"RCIUfentonpesotalla\",\r\n  },\r\n  {\r\n    value: \"RCIUfentonpesotallaPC\",\r\n    label: \"RCIUfentonpesotallaPC\",\r\n  },\r\n  {\r\n    value: \"RCIUtalla\",\r\n    label: \"RCIUtalla\",\r\n  },\r\n  {\r\n    value: \"RCIUPC\",\r\n    label: \"RCIUPC\",\r\n  },\r\n  {\r\n    value: \"ERN_A_1min\",\r\n    label: \"APGAR 1 mn\",\r\n  },\r\n  {\r\n    value: \"PA_LugarNacimiento\",\r\n    label: \"Lugar del nacimiento\",\r\n  },\r\n  {\r\n    value: \"ERN_AdaptNeonatal\",\r\n    label: \"adaptacion neonatal inmediata\",\r\n  },\r\n  {\r\n    value: \"ERN_Sexo\",\r\n    label: \"sexo\",\r\n  },\r\n  {\r\n    value: \"ERN_A_5min\",\r\n    label: \"APGAR 5 mn\",\r\n  },\r\n  {\r\n    value: \"ERN_A_10min\",\r\n    label: \"APGAR 10 mn\",\r\n  },\r\n  {\r\n    value: \"apgarcat1\",\r\n    label: \"APGAR 1 mn (cat)\",\r\n  },\r\n  {\r\n    value: \"apgarcat5\",\r\n    label: \"APGAR 5 mn (cat)\",\r\n  },\r\n  {\r\n    value: \"gestacat\",\r\n    label: \"edad gestacional (\\ncat)\",\r\n  },\r\n  {\r\n    value: \"V7\",\r\n    label: \"Fecha de\\nnacimiento\",\r\n  },\r\n  {\r\n    value: \"anoxia5mn\",\r\n    label: \"Hubo grado de anoxia\\n(5 mn de vida)\",\r\n  },\r\n  {\r\n    value: \"ERN_LubchencoFenton\",\r\n    label: \"Lubchenco según edad gest. Y peso\",\r\n  },\r\n  {\r\n    value: \"HD_RhNino\",\r\n    label: \"Grupo Rh niño\",\r\n  },\r\n  {\r\n    value: \"menosde1001\",\r\n    label: \"peso < 1000gr\",\r\n  },\r\n  {\r\n    value: \"PESO1500G\",\r\n    label: \"peso <= 1500gr\",\r\n  },\r\n  {\r\n    value: \"menosde31sem\",\r\n    label: \"menos de 30 semanas\",\r\n  },\r\n  {\r\n    value: \"surfactante\",\r\n    label: \"recibió surfactante y menos o igual a 32 semanas\",\r\n  },\r\n  {\r\n    value: \"Nearterm\",\r\n    label: \"near term 34\\nsemanas o más\",\r\n  },\r\n  {\r\n    value: \"ERN_FUM\",\r\n    label: \"fecha última menstruación\",\r\n  },\r\n  {\r\n    value: \"ERN_Ballard\",\r\n    label: \"edad gestacional (Ballard)\",\r\n  },\r\n  {\r\n    value: \"ERN_Eco\",\r\n    label: \"edad gestacional (por ecografía)\",\r\n  },\r\n  {\r\n    value: \"ERN_Remision\",\r\n    label: \"Fue remitido en otra institución\",\r\n  },\r\n  {\r\n    value: \"ERN_sepsis\",\r\n    label: \"sepsis\",\r\n  },\r\n  {\r\n    value: \"BPN\",\r\n    label: \"a termino de BPN\",\r\n  },\r\n  {\r\n    value: \"ANOCAT\",\r\n    label: \"año nacimiento\",\r\n  },\r\n];\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { CSVLink, CSVDownload } from \"react-csv\";\r\nimport {\r\n  VictoryBar,\r\n  VictoryChart,\r\n  VictoryAxis,\r\n  VictoryTheme,\r\n  VictoryGroup,\r\n  VictoryLegend,\r\n  VictoryScatter,\r\n  VictoryTooltip,\r\n} from \"victory\";\r\nimport Select from \"react-select\";\r\nimport GroupDetailSidebar from \"./groupDetailSidebar\";\r\nimport { nacimientoVars } from \"../data/nacimientovars\";\r\nconst csvData = [\r\n  [\"firstname\", \"lastname\", \"email\"],\r\n  [\"Ahmed\", \"Tomi\", \"ah@smthing.co.com\"],\r\n  [\"Raed\", \"Labes\", \"rl@smthing.co.com\"],\r\n  [\"Yezzi\", \"Min l3b\", \"ymin@cocococo.com\"],\r\n];\r\n\r\nconst Groupdetail = (props) => {\r\n  const [headers, setheaders] = useState(\r\n    props.groupInfo != null && props.groupInfo != undefined\r\n      ? Object.keys(props.groupInfo.info[0])\r\n      : []\r\n  );\r\n\r\n  const [groupsInfo, setgroupsInfo] = useState(\r\n    props.groupInfo != null && props.groupInfo != undefined\r\n      ? props.groupInfo.info\r\n      : []\r\n  );\r\n  const [dataToGraph, setdataToGraph] = useState([]);\r\n  const [dataToGraphlvl2, setdataToGraphlvl2] = useState([]);\r\n  const [labelsTG, setlabelsTG] = useState([]);\r\n  const [selectedBar, setselectedBar] = useState(null);\r\n  const [analisisVars, setanalisisVars] = useState(\"\");\r\n  const [dataToDownload, setdataToDownload] = useState([]);\r\n  const [resumenDownload, setresumenDownload] = useState([]);\r\n  const [additionalVars, setadditionalVars] = useState([\r\n    nacimientoVars[1].value,\r\n  ]);\r\n  const [avtg, setavtg] = useState([]);\r\n\r\n  const handleBarSelection = (etapa, grupo) => {\r\n    let arr = [props.groupInfo.nombre, etapa, grupo];\r\n    setselectedBar([...arr]);\r\n  };\r\n\r\n  const formatjson = () => {\r\n    let arr = [];\r\n    let grupos = [];\r\n    let grupos2 = [];\r\n    if (props.groupInfo != null) {\r\n      props.groupInfo.info.map((item) => {\r\n        if (!grupos.includes(item.labels)) {\r\n          grupos.push(item.labels);\r\n        }\r\n      });\r\n      grupos.map((grupo) => {\r\n        grupos2.push({ name: `${grupo}` });\r\n      });\r\n      grupos.map((grupo) => {\r\n        let arrporgrupo = [];\r\n        props.groupInfo.info.map((item) => {\r\n          if (grupo == item.labels) {\r\n            let jsonobj = {\r\n              x: `${item.etapa}`,\r\n              y: item.count,\r\n              label: item.count,\r\n              etapa: `${item.etapa}`,\r\n              group: `${item.labels}`,\r\n            };\r\n            arrporgrupo.push(jsonobj);\r\n          }\r\n        });\r\n        arr.push(arrporgrupo);\r\n      });\r\n    }\r\n    setlabelsTG([...grupos2]);\r\n    setdataToGraph([...arr]);\r\n  };\r\n\r\n  const formatjsonlevel2 = (backresponse) => {\r\n    let arr = [];\r\n    let grupos = [];\r\n    let etapasGrupos = [\"semana 40\", \"mes 3\", \"mes 6\", \"mes 9\", \"mes 12\"];\r\n\r\n    backresponse.datos.map((item) => {\r\n      if (!grupos.includes(item.labels)) {\r\n        grupos.push(item.labels);\r\n      }\r\n    });\r\n    grupos.sort();\r\n    grupos.map((grupo) => {\r\n      let defaultArr = [];\r\n      for (let i = 0; i < etapasGrupos.length; i++) {\r\n        let index = -1;\r\n        for (let j = 0; j < backresponse.datos.length; j++) {\r\n          if (\r\n            etapasGrupos[i] == backresponse.datos[j].etapa &&\r\n            grupo == backresponse.datos[j].labels\r\n          )\r\n            index = j;\r\n        }\r\n        let jsonobj = null;\r\n        if (index != -1) {\r\n          jsonobj = backresponse.datos[index];\r\n        } else {\r\n          jsonobj = {\r\n            etapa: etapasGrupos[i],\r\n            count: 0,\r\n            labels: grupo,\r\n            etapanum: etapasGrupos[i],\r\n          };\r\n          let arrAV = analisisVars.split(\"--\");\r\n          arrAV.map((v) => {\r\n            jsonobj[v] = 0;\r\n          });\r\n        }\r\n\r\n        defaultArr.push(jsonobj);\r\n      }\r\n\r\n      arr.push(defaultArr);\r\n    });\r\n    setdataToGraphlvl2([...arr]);\r\n    setavtg(backresponse.additional[0]);\r\n    setdataToDownload([...backresponse.list]);\r\n    setresumenDownload([...backresponse.summary]);\r\n    alert(\"Busqueda realizada\");\r\n  };\r\n\r\n  const handleGroupHistory = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        \"https://pgkmc.herokuapp.com/analisis/getgrouphistory/\" +\r\n          selectedBar[0] +\r\n          \"/\" +\r\n          selectedBar[1] +\r\n          \"/\" +\r\n          selectedBar[2] +\r\n          \"/\" +\r\n          analisisVars +\r\n          \"/\" +\r\n          additionalVars.join(\"-\") +\r\n          \"\"\r\n      );\r\n      const jsonData = await response.json();\r\n\r\n      formatjsonlevel2(jsonData);\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const handleAnalisisVars = () => {\r\n    let arr = \"\";\r\n    if (props.groupInfo != null && props.groupInfo != undefined) {\r\n      Object.keys(props.groupInfo.info[0]).map((header) => {\r\n        if (header.startsWith(\"maximo\")) {\r\n          const myArray = header.split(\"maximo\");\r\n          if (arr == \"\") {\r\n            arr = arr + myArray[1];\r\n          } else {\r\n            arr = arr + \"--\" + myArray[1];\r\n          }\r\n        }\r\n      });\r\n      setanalisisVars(arr);\r\n    }\r\n  };\r\n\r\n  const handleDeleteGroup = async (nombre) => {\r\n    try {\r\n      const response = await fetch(\r\n        \"https://pgkmc.herokuapp.com/analisis/deleteGroup/\" + nombre,\r\n        { method: \"DELETE\" }\r\n      );\r\n      window.location.reload();\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    formatjson();\r\n    setdataToGraphlvl2([]);\r\n    setselectedBar(null);\r\n    setdataToDownload([]);\r\n    setresumenDownload([]);\r\n    handleAnalisisVars();\r\n  }, [props]);\r\n\r\n  return (\r\n    <div className={props.visibility}>\r\n      {props.groupInfo == null ? (\r\n        <h3>Analisis Grupo</h3>\r\n      ) : (\r\n        <div className=\"my-5\">\r\n          <GroupDetailSidebar\r\n            groupInfo={props.groupInfo}\r\n            numberLimit={labelsTG.length - 1}\r\n          />\r\n          {analisisVars.split(\"--\").map((av) => {\r\n            return <span className=\"badge bg-primary mx-2\">{av}</span>;\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col-12 col-md-7\">\r\n          <VictoryChart\r\n            theme={VictoryTheme.material}\r\n            domainPadding={{ x: 50, y: 50 }}\r\n            height={400}\r\n            width={500}\r\n          >\r\n            <VictoryAxis style={{ tickLabels: { angle: -60 } }} />\r\n            <VictoryAxis dependentAxis theme={VictoryTheme.material} />\r\n            <VictoryLegend\r\n              x={125}\r\n              y={10}\r\n              title=\"Clusters\"\r\n              centerTitle\r\n              orientation=\"horizontal\"\r\n              gutter={20}\r\n              style={{ border: { stroke: \"black\" } }}\r\n              colorScale={\"qualitative\"}\r\n              data={labelsTG}\r\n            />\r\n            <VictoryGroup\r\n              horizontal\r\n              offset={10}\r\n              style={{ data: { width: 8 } }}\r\n              colorScale={\"qualitative\"}\r\n            >\r\n              {dataToGraph.map((dtg) => {\r\n                return (\r\n                  <VictoryBar\r\n                    key={`dataof${dtg[0].y}`}\r\n                    barWidth={8}\r\n                    events={[\r\n                      {\r\n                        target: \"data\",\r\n                        eventHandlers: {\r\n                          onClick: () => {\r\n                            return [\r\n                              {\r\n                                target: \"data\",\r\n                                mutation: (props) => {\r\n                                  const fill = props.style && props.style.fill;\r\n                                  if (fill != \"black\") {\r\n                                    handleBarSelection(\r\n                                      props.datum.etapa,\r\n                                      props.datum.group\r\n                                    );\r\n                                  }\r\n                                },\r\n                              },\r\n                            ];\r\n                          },\r\n                        },\r\n                      },\r\n                    ]}\r\n                    data={dtg}\r\n                  />\r\n                );\r\n              })}\r\n            </VictoryGroup>\r\n          </VictoryChart>\r\n        </div>\r\n        <div className=\"col-12 col-md-5 my-3\">\r\n          {selectedBar == null ? (\r\n            <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <h5 className=\"card-title\">Barra Seleccionada</h5>\r\n                <hr />\r\n                <p className=\"card-text\">No se ha seleccionado ninguna barra</p>\r\n              </div>\r\n              <div className=\"card-footer text-muted\">\r\n                Permite buscar los individuos de la barra seleccionada en que\r\n                grupo quedaron en las demás etapas\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <h5 className=\"card-title\">Barra Seleccionada</h5>\r\n                <hr />\r\n\r\n                <p className=\"card-text\">\r\n                  <b>Nombre Grupo:</b> {selectedBar[0]}\r\n                </p>\r\n                <p className=\"card-text\">\r\n                  <b>Etapa:</b> {selectedBar[1]}\r\n                </p>\r\n                <p className=\"card-text\">\r\n                  <b>Grupo de Cluster:</b> {selectedBar[2]}\r\n                </p>\r\n                <p className=\"card-text\">*Variables al nacer</p>\r\n                <Select\r\n                  isMulti\r\n                  name=\"colors\"\r\n                  options={nacimientoVars}\r\n                  defaultValue={[nacimientoVars[1]]}\r\n                  className=\"basic-multi-select my-2\"\r\n                  classNamePrefix=\"select\"\r\n                  onChange={(value) => {\r\n                    let values = [];\r\n                    value.map((selectItem) => {\r\n                      values.push(selectItem.value);\r\n                    });\r\n                    setadditionalVars([...values]);\r\n                  }}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-success\"\r\n                  onClick={() => handleGroupHistory()}\r\n                >\r\n                  Buscar\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <hr />\r\n      {dataToGraphlvl2.length == 0 ? (\r\n        <div></div>\r\n      ) : (\r\n        <div>\r\n          <div className=\"row\">\r\n            <div className=\"accordion col-12\" id=\"accordionPanelsStayOpenlvl2\">\r\n              <div className=\"accordion-item\">\r\n                <h2\r\n                  className=\"accordion-header\"\r\n                  id=\"panelsStayOpen-headingHystory\"\r\n                >\r\n                  <button\r\n                    className=\"accordion-button\"\r\n                    type=\"button\"\r\n                    data-bs-toggle=\"collapse\"\r\n                    data-bs-target=\"#panelsStayOpen-collapseOne\"\r\n                    aria-expanded=\"true\"\r\n                    aria-controls=\"panelsStayOpen-collapseOne\"\r\n                  >\r\n                    Histórico\r\n                  </button>\r\n                </h2>\r\n                <div\r\n                  id=\"panelsStayOpen-collapseOne\"\r\n                  className=\"accordion-collapse collapse show\"\r\n                  aria-labelledby=\"panelsStayOpen-headingOne\"\r\n                >\r\n                  <div className=\"accordion-body row\">\r\n                    <div className=\"col-12 col-md-6\">\r\n                      <VictoryChart\r\n                        theme={VictoryTheme.material}\r\n                        domainPadding={{ x: 50, y: 50 }}\r\n                        height={400}\r\n                        width={400}\r\n                      >\r\n                        <VictoryAxis style={{ tickLabels: { angle: -60 } }} />\r\n                        <VictoryAxis\r\n                          dependentAxis\r\n                          theme={VictoryTheme.material}\r\n                        />\r\n                        <VictoryLegend\r\n                          x={125}\r\n                          y={10}\r\n                          title=\"Clusters\"\r\n                          centerTitle\r\n                          orientation=\"horizontal\"\r\n                          gutter={20}\r\n                          style={{ border: { stroke: \"black\" } }}\r\n                          colorScale={\"qualitative\"}\r\n                          data={labelsTG}\r\n                        />\r\n                        <VictoryGroup\r\n                          horizontal\r\n                          offset={10}\r\n                          style={{ data: { width: 8 } }}\r\n                          colorScale={\"qualitative\"}\r\n                        >\r\n                          {dataToGraphlvl2.map((dtg) => {\r\n                            return (\r\n                              <VictoryBar\r\n                                barWidth={8}\r\n                                key={`lvl2dataof${dtg.count}`}\r\n                                data={dtg}\r\n                                x=\"etapa\"\r\n                                y=\"count\"\r\n                                labels={({ datum }) => `${datum.count}`}\r\n                              />\r\n                            );\r\n                          })}\r\n                        </VictoryGroup>\r\n                      </VictoryChart>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-6\">\r\n                      <div className=\"card\">\r\n                        <div className=\"card-body\">\r\n                          <p>\r\n                            Para descargar los datos de como se dividieron los\r\n                            individuos:\r\n                          </p>\r\n                          <CSVLink\r\n                            data={dataToDownload}\r\n                            filename={\"datos_grupo.csv\"}\r\n                          >\r\n                            Haga click acá\r\n                          </CSVLink>\r\n                          <p>\r\n                            Para descargar el resumen de como se dividieron los\r\n                            individuos:\r\n                          </p>\r\n                          <CSVLink\r\n                            data={resumenDownload}\r\n                            filename={\"datos_grupo_resumen.csv\"}\r\n                          >\r\n                            Haga click acá\r\n                          </CSVLink>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"accordion-item\">\r\n                <h2\r\n                  className=\"accordion-header\"\r\n                  id=\"panelsStayOpen-headingVars\"\r\n                >\r\n                  <button\r\n                    className=\"accordion-button collapsed\"\r\n                    type=\"button\"\r\n                    data-bs-toggle=\"collapse\"\r\n                    data-bs-target=\"#panelsStayOpen-collapseTwo\"\r\n                    aria-expanded=\"false\"\r\n                    aria-controls=\"panelsStayOpen-collapseTwo\"\r\n                  >\r\n                    Variables de Analisis\r\n                  </button>\r\n                </h2>\r\n                <div\r\n                  id=\"panelsStayOpen-collapseTwo\"\r\n                  className=\"accordion-collapse collapse\"\r\n                  aria-labelledby=\"panelsStayOpen-headingTwo\"\r\n                >\r\n                  <div className=\"accordion-body\">\r\n                    <div className=\"row\">\r\n                      {analisisVars.split(\"--\").map((av) => {\r\n                        return (\r\n                          <div className=\"col-12 col-md-6\" key={`lvl2${av}`}>\r\n                            Gráfica {av}\r\n                            <VictoryChart\r\n                              theme={VictoryTheme.material}\r\n                              domainPadding={{ x: 50, y: 50 }}\r\n                              height={400}\r\n                              width={400}\r\n                            >\r\n                              <VictoryAxis\r\n                                style={{ tickLabels: { angle: -60 } }}\r\n                              />\r\n                              <VictoryAxis\r\n                                dependentAxis\r\n                                theme={VictoryTheme.material}\r\n                                fixLabelOverlap={true}\r\n                                tickCount={4}\r\n                              />\r\n\r\n                              <VictoryGroup\r\n                                horizontal\r\n                                offset={10}\r\n                                style={{ data: { width: 8 } }}\r\n                                colorScale={\"qualitative\"}\r\n                              >\r\n                                {dataToGraphlvl2.map((dtg) => {\r\n                                  return (\r\n                                    <VictoryBar\r\n                                      barWidth={8}\r\n                                      key={`lvl2dataof${dtg.count}`}\r\n                                      data={dtg}\r\n                                      x=\"etapa\"\r\n                                      y={av}\r\n                                      labels={({ datum }) =>\r\n                                        eval(\"datum.\" + av)\r\n                                      }\r\n                                      labelComponent={<VictoryTooltip />}\r\n                                    />\r\n                                  );\r\n                                })}\r\n                              </VictoryGroup>\r\n                            </VictoryChart>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"accordion-item\">\r\n                <h2\r\n                  className=\"accordion-header\"\r\n                  id=\"panelsStayOpen-headingNacimiento\"\r\n                >\r\n                  <button\r\n                    className=\"accordion-button collapsed\"\r\n                    type=\"button\"\r\n                    data-bs-toggle=\"collapse\"\r\n                    data-bs-target=\"#panelsStayOpen-collapseThree\"\r\n                    aria-expanded=\"false\"\r\n                    aria-controls=\"panelsStayOpen-collapseThree\"\r\n                  >\r\n                    Variables de Nacimiento\r\n                  </button>\r\n                </h2>\r\n                <div\r\n                  id=\"panelsStayOpen-collapseThree\"\r\n                  className=\"accordion-collapse collapse\"\r\n                  aria-labelledby=\"panelsStayOpen-headingThree\"\r\n                >\r\n                  <div className=\"accordion-body\">\r\n                    <div className=\"row\">\r\n                      {additionalVars.map((addv) => {\r\n                        let avl = \"\";\r\n                        let artg = [];\r\n\r\n                        nacimientoVars.map((avli) => {\r\n                          if (avli.value == addv) {\r\n                            avl = avli.label;\r\n                          }\r\n                        });\r\n                        Object.entries(avtg).map((entry) => {\r\n                          if (entry[0].startsWith(addv)) {\r\n                            if (entry[0].includes(\"MIN\")) {\r\n                              artg.push({ x: \"MIN\", y: parseFloat(entry[1]) });\r\n                            } else if (entry[0].includes(\"MAX\")) {\r\n                              artg.push({ x: \"MAX\", y: parseFloat(entry[1]) });\r\n                            } else {\r\n                              artg.push({ x: \"AVG\", y: parseFloat(entry[1]) });\r\n                            }\r\n                          }\r\n                        });\r\n                        return (\r\n                          <div className=\"col-12 col-md-4\" key={`${addv}`}>\r\n                            <h5>Gráfica de {avl}</h5>\r\n                            <VictoryChart\r\n                              theme={VictoryTheme.material}\r\n                              domainPadding={{ x: 50, y: 50 }}\r\n                              height={400}\r\n                              width={400}\r\n                            >\r\n                              <VictoryBar\r\n                                barRatio={0.8}\r\n                                style={{\r\n                                  data: { fill: \"#c43a31\" },\r\n                                }}\r\n                                data={artg}\r\n                              />\r\n                            </VictoryChart>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"row\">\r\n        <div className=\"col-12 col-md-3 offset-md-9\">\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-danger mx-4\"\r\n                onClick={() => handleDeleteGroup(props.groupInfo.nombre)}\r\n              >\r\n                Eliminar Grupo\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Groupdetail;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Sidebar from \"react-sidebar\";\r\nimport \"./detailsidebar.css\";\r\n\r\nconst GroupDetailSidebar = (props) => {\r\n  const [sidebarOpen, setsidebarOpen] = useState(false);\r\n  const [groupDetail, setGroupDetail] = useState([]);\r\n\r\n  const calculateDetail = () => {\r\n    if (props.groupInfo != null && props.groupInfo != undefined) {\r\n      let arr = [];\r\n      let etapas = [];\r\n      props.groupInfo.info.map((item) => {\r\n        if (!etapas.includes(item.etapa)) {\r\n          etapas.push(item.etapa);\r\n        }\r\n      });\r\n      etapas.map((etapa) => {\r\n        let aux = [];\r\n        props.groupInfo.info.map((item) => {\r\n          if (etapa == item.etapa) {\r\n            aux.push(item);\r\n          }\r\n        });\r\n        arr.push(aux);\r\n      });\r\n      setGroupDetail([...arr]);\r\n    }\r\n  };\r\n  const onSetSidebarOpen = (open) => {\r\n    setsidebarOpen(open);\r\n  };\r\n\r\n  const resetInputValues = () => {\r\n    let etapasArr = [\"semana 40\", \"mes 3\", \"mes 6\", \"mes 9\", \"mes 12\"];\r\n    etapasArr.map((item) => {\r\n      if (document.getElementById(`cambio1${item}`) != null)\r\n        document.getElementById(`cambio1${item}`).value = 0;\r\n      if (document.getElementById(`cambio2${item}`) != null)\r\n        document.getElementById(`cambio2${item}`).value = 0;\r\n    });\r\n  };\r\n\r\n  const handleUpdate = async (etapa, cambio1, cambio2) => {\r\n    if (cambio1 != \"\" && cambio2 != \"\") {\r\n      if (cambio1 !== cambio2) {\r\n        try {\r\n          const response = await fetch(\r\n            \"https://pgkmc.herokuapp.com/analisis/handleGroupUpdate/\" +\r\n              props.groupInfo.nombre +\r\n              \"/\" +\r\n              etapa +\r\n              \"/\" +\r\n              cambio1 +\r\n              \"/\" +\r\n              cambio2\r\n          );\r\n          const jsonData = await response.json();\r\n          window.location.reload();\r\n          alert(\r\n            \"Ya se realizó el cambio, seleccione el grupo\" +\r\n              props.groupInfo.nombre\r\n          );\r\n        } catch (err) {\r\n          console.error(err.message);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    resetInputValues();\r\n    calculateDetail();\r\n  }, [props]);\r\n\r\n  return (\r\n    <Sidebar\r\n      sidebar={\r\n        <div className=\"my-2 mx-2\">\r\n          <h4>Información de los Clusters</h4>\r\n          <hr />\r\n          {groupDetail.map((etapa) => {\r\n            return (\r\n              <div key={`${etapa[0].etapa}`}>\r\n                <div className=\"card\">\r\n                  <div className=\"card-body tableContainer\">\r\n                    <h6>{etapa[0].etapa}</h6>\r\n                    <table className=\"table\">\r\n                      <thead>\r\n                        <tr>\r\n                          {Object.keys(etapa[0]).map((header) => {\r\n                            if (header != \"etapa\") {\r\n                              return (\r\n                                <th scope=\"col\" key={`header${header}`}>\r\n                                  {header}\r\n                                </th>\r\n                              );\r\n                            }\r\n                          })}\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {etapa.map((element) => {\r\n                          return (\r\n                            <tr key={`row${element.labels}`}>\r\n                              {Object.entries(element).map((entry) => {\r\n                                if (entry[0] != \"etapa\") {\r\n                                  return (\r\n                                    <td key={`${entry[0]}-${entry[1]}`}>\r\n                                      {entry[1]}\r\n                                    </td>\r\n                                  );\r\n                                }\r\n                              })}\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                    <div className=\"row my-4\">\r\n                      <div className=\"offset-1 col-2\">\r\n                        <input\r\n                          id={`cambio1${etapa[0].etapa}`}\r\n                          type=\"number\"\r\n                          className=\"form-control \"\r\n                          aria-label=\"firstToChange\"\r\n                          min={0}\r\n                          max={props.numberLimit}\r\n                        />\r\n                      </div>\r\n                      <span className=\"col-1 py-auto\">\r\n                        <svg\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                          width=\"16\"\r\n                          height=\"16\"\r\n                          fill=\"currentColor\"\r\n                          className=\"bi bi-arrow-left-right\"\r\n                          viewBox=\"0 0 16 16\"\r\n                        >\r\n                          <path\r\n                            fillRule=\"evenodd\"\r\n                            d=\"M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z\"\r\n                          />\r\n                        </svg>\r\n                      </span>\r\n                      <div className=\"col-2\">\r\n                        <input\r\n                          id={`cambio2${etapa[0].etapa}`}\r\n                          type=\"number\"\r\n                          className=\"form-control \"\r\n                          aria-label=\"secondToChange\"\r\n                          min={0}\r\n                          max={props.numberLimit}\r\n                        />\r\n                      </div>\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-success col-3\"\r\n                        onClick={() =>\r\n                          handleUpdate(\r\n                            etapa[0].etapa,\r\n                            document.getElementById(`cambio1${etapa[0].etapa}`)\r\n                              .value,\r\n                            document.getElementById(`cambio2${etapa[0].etapa}`)\r\n                              .value\r\n                          )\r\n                        }\r\n                      >\r\n                        Cambiar\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      }\r\n      open={sidebarOpen}\r\n      onSetOpen={onSetSidebarOpen}\r\n      styles={{ sidebar: { background: \"white\", width: \"50%\" } }}\r\n      pullRight={true}\r\n    >\r\n      <div className=\"row mx-2 my-4\">\r\n        <div className=\"col-10 align-self-start\">\r\n          <h3>Analisis Grupo {props.groupInfo.nombre}</h3>\r\n        </div>\r\n        <div className=\" col-2 float-right\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={() => onSetSidebarOpen(true)}\r\n          >\r\n            Info. Clusters\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Sidebar>\r\n  );\r\n};\r\n\r\nexport default GroupDetailSidebar;\r\n","export const enviromentvars = [\r\n  {\r\n    label: \"situación pareja\",\r\n    value: \"CSP_SituaPareja\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"tipo de vivienda\",\r\n    value: \"CSP_TipoVivienda\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"Escolaridad madre\",\r\n    value: \"CSP_EscolaridadMadre\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"Situación laboral madre\",\r\n    value: \"CSP_SituacionLaboralMadre\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"Escolaridad padre\",\r\n    value: \"CSP_EscolaridadPadre\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"Situación laboral padre\",\r\n    value: \"CSP_SituacionLaboralPadre\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"Ingreso Mensual\",\r\n    value: \"CSP_IngresoMensual\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Distancia vivienda\",\r\n    value: \"CSP_DistanciaVivienda\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"Personas que viven en el hogar con el ingreso\",\r\n    value: \"CSP_numPersVivenIngMen\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Nutrición familiar\",\r\n    value: \"CSP_NutricionFam\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"embarazo deseado\",\r\n    value: \"CSP_EmbarazoDeseado\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"embarazo planificado\",\r\n    value: \"embbajoplanificacion\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"Peso de la madre\",\r\n    value: \"CP_PesoMadre\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Talla de la madre\",\r\n    value: \"CP_TallaMadre\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Peso del padre\",\r\n    value: \"CP_PesoPadre\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Talla del padre\",\r\n    value: \"CP_TallaPadre\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"hay niños menores de 5 años en el hogar\",\r\n    value: \"ninosmenosde5anos\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"percapita\\nmensual\",\r\n    value: \"percapita\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"percapita mensual (cat)\",\r\n    value: \"percapindic\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"Escolaridad madre\\nsimpl.\",\r\n    value: \"educmadresimplificada\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"Escolaridad padre\\nsimpl.\",\r\n    value: \"educpadresimplificada\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"edad materna\",\r\n    value: \"CP_edadmaterna\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"edad madre\\ncategorizada\",\r\n    value: \"edadmatcat\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"Sistema de Salud\",\r\n    value: \"SSalud\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"Número de embarazos (con este)\",\r\n    value: \"CP_Gestacion\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Número de partos\",\r\n    value: \"CP_Paridad\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Número de cesáreas\",\r\n    value: \"CP_PartoCesarea\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Número de emb. ectópicos\",\r\n    value: \"CP_Ectopico\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Número de nacidos vivos\",\r\n    value: \"CP_NacidoVivo\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Número de prematuros\",\r\n    value: \"CP_Prematuro\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Número de mortinatos\",\r\n    value: \"CP_Mortinato\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Número de emb. planificados con hormonas\",\r\n    value: \"CP_Hormonales\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"Número de emb. planificados con DIU\",\r\n    value: \"CP_DIU\",\r\n    tipo: 1,\r\n  },\r\n  {\r\n    label: \"tuvo embarazos\\nbajo DIU\",\r\n    value: \"embarazoplanifDIU\",\r\n    tipo: 2,\r\n  },\r\n  {\r\n    label: \"tuvo embarazos\\nbajo hormonas\",\r\n    value: \"embarazoplanifhormonal\",\r\n    tipo: 2,\r\n  },\r\n];\r\n\r\nexport const envaroptions = [\r\n  {\r\n    nombre: \"CSP_SituaPareja\",\r\n    options: [\r\n      { value: 1, label: \"sola con apoyo\" },\r\n      { value: 2, label: \"sola sin apoyo\" },\r\n      { value: 3, label: \"pareja estable\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"CSP_TipoVivienda\",\r\n    options: [\r\n      { value: 1, label: \"rural\" },\r\n      { value: 2, label: \"urbana\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"CSP_EscolaridadMadre\",\r\n    options: [\r\n      { value: 1, label: \"primaria completa o no\" },\r\n      { value: 2, label: \"primaria incompleta\" },\r\n      { value: 3, label: \"secundaria completa o no\" },\r\n      { value: 4, label: \"secundaria incompleta\" },\r\n      { value: 5, label: \"tecnica completa o no\" },\r\n      { value: 6, label: \"tecnica incompleta\" },\r\n      { value: 7, label: \"universitaria completa o no\" },\r\n      { value: 8, label: \"universitaria incompleta\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"CSP_SituacionLaboralMadre\",\r\n    options: [\r\n      { value: 1, label: \"con empleo\" },\r\n      { value: 2, label: \"sin empleo\" },\r\n      { value: 3, label: \"ama de casa\" },\r\n      { value: 4, label: \"estudiante\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"CSP_EscolaridadPadre\",\r\n    options: [\r\n      { value: 1, label: \"primaria completa o no\" },\r\n      { value: 2, label: \"primaria incompleta\" },\r\n      { value: 3, label: \"secundaria completa o no\" },\r\n      { value: 4, label: \"secundaria incompleta\" },\r\n      { value: 5, label: \"tecnica completa o no\" },\r\n      { value: 6, label: \"tecnica incompleta\" },\r\n      { value: 7, label: \"universitaria completa o no\" },\r\n      { value: 8, label: \"universitaria incompleta\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"CSP_SituacionLaboralPadre\",\r\n    options: [\r\n      { value: 0, label: \"NA\" },\r\n      { value: 1, label: \"con empleo\" },\r\n      { value: 2, label: \"sin empleo\" },\r\n      { value: 3, label: \"estudiante\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"CSP_DistanciaVivienda\",\r\n    options: [\r\n      { value: 1, label: \"hasta una hora de transporte\" },\r\n      { value: 2, label: \"de 1 a 2 horas de transporte\" },\r\n      { value: 3, label: \"mas de 2 horas pero en la ciudad\" },\r\n      { value: 4, label: \"fuera de la ciudad\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"CSP_NutricionFam\",\r\n    options: [\r\n      { value: 1, label: \"buena (3 comidas y 2 refrigerios)\" },\r\n      { value: 2, label: \"apenas suficiente (3 comidas)\" },\r\n      { value: 3, label: \"insuficiente (2 comidas)\" },\r\n      { value: 4, label: \"severamente insuficiente (1 comida)\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"CSP_EmbarazoDeseado\",\r\n    options: [\r\n      { value: 0, label: \"no\" },\r\n      { value: 1, label: \"si\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"embbajoplanificacion\",\r\n    options: [\r\n      { value: 0, label: \"no\" },\r\n      { value: 1, label: \"si\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"ninosmenosde5anos\",\r\n    options: [\r\n      { value: 0, label: \"no\" },\r\n      { value: 1, label: \"si\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"percapindic\",\r\n    options: [\r\n      { value: 1, label: \"hasta 1 SM percapita mensual\" },\r\n      { value: 2, label: \"hasta 2 SM percapita mensual\" },\r\n      { value: 3, label: \"hasta 3 SM percapita mensual\" },\r\n      { value: 4, label: \"mas de 3 SM percapita mensual\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"edadmatcat\",\r\n    options: [\r\n      { value: 1, label: \"adolescente\" },\r\n      { value: 2, label: \"normal\" },\r\n      { value: 3, label: \"mas de 35 años\" },\r\n    ],\r\n  },\r\n  {\r\n    nombre: \"SSalud\",\r\n    options: [\r\n      { value: 0, label: \"prepagada\" },\r\n      { value: 2, label: \"contributivo\" },\r\n      { value: 3, label: \"subsidiado\" },\r\n    ],\r\n  },\r\n];\r\n","const analisisvars = [\r\n  {\r\n    label: \"Nutpesowho\",\r\n    value: \"Nutpesowho\",\r\n  },\r\n  {\r\n    label: \"Número de consultas desde la etapa anterior\",\r\n    value: \"Número de consultas desde la etapa anterior\",\r\n  },\r\n  {\r\n    label: \"asistencia\",\r\n    value: \"asistencia\",\r\n  },\r\n  {\r\n    label: \"Tiene Oxígeno ambulatorio\",\r\n    value: \"Tiene Oxígeno ambulatorio\",\r\n  },\r\n  {\r\n    label: \"readmisiones desde la etapa anterior\",\r\n    value: \"readmisiones desde la etapa anterior\",\r\n  },\r\n  {\r\n    label: \"talla\",\r\n    value: \"talla\",\r\n  },\r\n  {\r\n    label: \"Palivizumab\",\r\n    value: \"Palivizumab\",\r\n  },\r\n  {\r\n    label: \"Hierro\",\r\n    value: \"Hierro\",\r\n  },\r\n  {\r\n    label: \"consultas\",\r\n    value: \"consultas\",\r\n  },\r\n  {\r\n    label: \"Leche artificial\",\r\n    value: \"Leche artificial\",\r\n  },\r\n  {\r\n    label: \"peso\",\r\n    value: \"peso\",\r\n  },\r\n  {\r\n    label: \"Enfermedad Respiratoria crónica\",\r\n    value: \"Enfermedad Respiratoria crónica\",\r\n  },\r\n  {\r\n    label: \"Antireflujo\",\r\n    value: \"Antireflujo\",\r\n  },\r\n  {\r\n    label: \"Leche humana y artificial\",\r\n    value: \"Leche humana y artificial\",\r\n  },\r\n  {\r\n    label: \"Días totales rehospitalización\",\r\n    value: \"Días totales rehospitalización\",\r\n  },\r\n  {\r\n    label: \"Oxígendependencia\",\r\n    value: \"Oxígendependencia\",\r\n  },\r\n  {\r\n    label: \"Leche humana\",\r\n    value: \"Leche humana\",\r\n  },\r\n  {\r\n    label: \"alimentación\",\r\n    value: \"alimentación\",\r\n  },\r\n  {\r\n    label: \"perímetro cefálico\",\r\n    value: \"perímetro cefálico\",\r\n  },\r\n  {\r\n    label: \"examen neurológico\",\r\n    value: \"examen neurológico\",\r\n  },\r\n  {\r\n    label: \"número de rehospitalizaciones\",\r\n    value: \"número de rehospitalizaciones\",\r\n  },\r\n];\r\n\r\nexport default analisisvars;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./sidebar/sidebar.css\";\r\nimport data from \"./sidebar/fakedatagroups\";\r\nimport Groupdetail from \"./groupdetail\";\r\nimport Select from \"react-select\";\r\nimport { enviromentvars, envaroptions } from \"../data/enviromentvarsdata\";\r\nimport analisisvars from \"../data/analisisvarsdata\";\r\n\r\nlet populationList = [...enviromentvars];\r\nlet populationVarList = [...populationList];\r\nlet standardPopulationVarList = [];\r\nlet analisisList = [...analisisvars];\r\nlet analisisVarList = [...analisisList];\r\nlet standardAnalisisVarList = [];\r\n\r\nconst GroupManage = () => {\r\n  const [grupos, setGrupos] = useState([]);\r\n  const [grupoClicked, setgrupoClicked] = useState(null);\r\n  const [selectValue, setSelectValue] = useState(null);\r\n  const [inputCatFields, setInputCatFields] = useState([]);\r\n  const [calculatedCluster, setCalculatedCluster] = useState([]);\r\n\r\n  const handleChange = (value) => {\r\n    setSelectValue(value);\r\n  };\r\n\r\n  const handleChangeCat = (name, value) => {\r\n    let arr = [];\r\n    inputCatFields.map((field) => {\r\n      if (field.variable != name) {\r\n        arr.push(field);\r\n      }\r\n    });\r\n    let valor;\r\n    if (value == null) {\r\n      valor = null;\r\n    } else {\r\n      valor = value.value;\r\n    }\r\n    setInputCatFields([\r\n      ...arr,\r\n      {\r\n        variable: name,\r\n        limiteinf: null,\r\n        limitesup: null,\r\n        igual: valor,\r\n        tipo: 2,\r\n      },\r\n    ]);\r\n  };\r\n\r\n  const handleVarAddingPopulation = (pvariable) => {\r\n    if (pvariable != null) {\r\n      let index;\r\n      populationVarList.map((item) => {\r\n        if (pvariable.value == item.value) {\r\n          standardPopulationVarList.push(pvariable);\r\n          index = populationVarList.indexOf(pvariable);\r\n          setSelectValue(null);\r\n        }\r\n      });\r\n      let arr = [];\r\n      for (let i = 0; i < populationVarList.length; i++) {\r\n        if (i != index) {\r\n          arr.push(populationVarList[i]);\r\n        }\r\n      }\r\n      populationVarList = arr;\r\n    }\r\n  };\r\n\r\n  const handleVarDeletingPopulation = (pvariable) => {\r\n    if (pvariable != null) {\r\n      let arr2 = [];\r\n      inputCatFields.map((field) => {\r\n        if (field.variable != pvariable.label) {\r\n          arr2.push(field);\r\n        }\r\n      });\r\n      setInputCatFields(arr2);\r\n      let index;\r\n      standardPopulationVarList.map((item) => {\r\n        if (pvariable.value == item.value) {\r\n          populationVarList.push(pvariable);\r\n          index = standardPopulationVarList.indexOf(pvariable);\r\n          setSelectValue(null);\r\n        }\r\n      });\r\n      let arr = [];\r\n      for (let i = 0; i < standardPopulationVarList.length; i++) {\r\n        if (i != index) {\r\n          arr.push(standardPopulationVarList[i]);\r\n        }\r\n      }\r\n      standardPopulationVarList = arr;\r\n    }\r\n  };\r\n\r\n  const handleVarAddingAnalisis = (pvariable) => {\r\n    if (pvariable != null) {\r\n      let index;\r\n      analisisVarList.map((item) => {\r\n        if (pvariable.value == item.value) {\r\n          standardAnalisisVarList.push(pvariable);\r\n          index = analisisVarList.indexOf(pvariable);\r\n          setSelectValue(null);\r\n        }\r\n      });\r\n      let arr = [];\r\n      for (let i = 0; i < analisisVarList.length; i++) {\r\n        if (i != index) {\r\n          arr.push(analisisVarList[i]);\r\n        }\r\n      }\r\n      analisisVarList = arr;\r\n    }\r\n  };\r\n\r\n  const handleVarDeletingAnalisis = (pvariable) => {\r\n    if (pvariable != null) {\r\n      let index;\r\n      standardAnalisisVarList.map((item) => {\r\n        if (pvariable.value == item.value) {\r\n          analisisVarList.push(pvariable);\r\n          index = standardAnalisisVarList.indexOf(pvariable);\r\n          setSelectValue(null);\r\n        }\r\n      });\r\n      let arr = [];\r\n      for (let i = 0; i < standardAnalisisVarList.length; i++) {\r\n        if (i != index) {\r\n          arr.push(standardAnalisisVarList[i]);\r\n        }\r\n      }\r\n      standardAnalisisVarList = arr;\r\n    }\r\n  };\r\n\r\n  const getnumfieldsdata = async () => {\r\n    let arr = [];\r\n    standardPopulationVarList.map((item) => {\r\n      let down;\r\n      let up;\r\n      if (item.tipo == 1) {\r\n        down = parseInt(\r\n          document.getElementById(`lowerlimit${item.label}`).value\r\n        );\r\n        if (down != down) {\r\n          down = null;\r\n        }\r\n\r\n        up = parseInt(document.getElementById(`upperlimit${item.label}`).value);\r\n\r\n        if (up != up) {\r\n          up = null;\r\n        }\r\n\r\n        let jobj = {\r\n          variable: item.value,\r\n          limiteinf: down,\r\n          limitesup: up,\r\n          igual: null,\r\n          tipo: 1,\r\n        };\r\n        if (up != null || down != null) {\r\n          arr.push(jobj);\r\n        }\r\n      }\r\n    });\r\n    inputCatFields.map((field) => {\r\n      arr.push(field);\r\n    });\r\n    let ng = document.getElementById(\"nombre1\").value;\r\n    if (ng == \"\") {\r\n      ng = \"grupo sin nombre\";\r\n    }\r\n\r\n    let cNum = document.getElementById(\"inputNumberClusters\").value;\r\n    if (cNum == \"\") {\r\n      cNum = \"1\";\r\n    }\r\n    let variablesanalisisarr = [];\r\n    standardAnalisisVarList.map((item) => {\r\n      variablesanalisisarr.push(item.value);\r\n    });\r\n    let postbody = {\r\n      nombregrupo: ng,\r\n      variables: arr,\r\n      analisis: {\r\n        clusterNum: parseInt(cNum),\r\n        variables: variablesanalisisarr,\r\n      },\r\n    };\r\n\r\n    populationVarList = [...populationList];\r\n    standardPopulationVarList = [];\r\n    setInputCatFields([]);\r\n    try {\r\n      const body = postbody;\r\n      const response = await fetch(\r\n        \"https://pgkmc.herokuapp.com/analisis/clusteringGroups\",\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(body),\r\n        }\r\n      );\r\n      const jsonData = await response.json();\r\n\r\n      setCalculatedCluster([...jsonData]);\r\n\r\n      getGruposCluster();\r\n      alert(\"Grupo creado: revise la lista de grupos\");\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const getGruposCluster = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        \"https://pgkmc.herokuapp.com/analisis/getallclustergroups\"\r\n      );\r\n      const jsonData = await response.json();\r\n\r\n      setGrupos([...jsonData[\"datos\"]]);\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getGruposCluster();\r\n  }, []);\r\n  return (\r\n    <div className=\"row  mx-1\">\r\n      <div className=\"px-1 my-2 sidebarwidth card col-3\">\r\n        <div className=\"card-body\">\r\n          <div className=\"row my-2 \">\r\n            <h3 className=\"col-8\">Grupos</h3>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-success col-4\"\r\n              onClick={() => {\r\n                setgrupoClicked(null);\r\n              }}\r\n            >\r\n              Crear\r\n            </button>\r\n          </div>\r\n          <div className=\"gestionGrupos \">\r\n            {grupos.map((grupo) => {\r\n              return (\r\n                <div className=\"row my-2 lenghtgrupos\" key={grupo.nombre}>\r\n                  <div className=\"col\">\r\n                    <button\r\n                      className=\"btn btn-light buttongrupos\"\r\n                      onClick={() => {\r\n                        setgrupoClicked(grupo);\r\n                      }}\r\n                    >\r\n                      {grupo.nombre}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"col-9 card px-1 my-2 \">\r\n        <div className=\"card-body\">\r\n          {grupoClicked == null ? (\r\n            //Crear grupo\r\n            <div>\r\n              <h1>Crear grupo</h1>\r\n              <form>\r\n                <div className=\"my-1 row\">\r\n                  <label htmlFor=\"nombre1\" className=\"col-2 col-form-label\">\r\n                    Nombre de grupo\r\n                  </label>\r\n                  <div className=\"col-10\">\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      id=\"nombre1\"\r\n                      placeholder=\"Ejemplo: Analisis de IMC\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <hr />\r\n                <div>\r\n                  <h4>Delimitar Población</h4>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-5 offset-1\">\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-danger\"\r\n                        data-bs-toggle=\"modal\"\r\n                        data-bs-target=\"#removeVarsPopulationModal\"\r\n                      >\r\n                        del Vars\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"col-5 \">\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-success\"\r\n                        data-bs-toggle=\"modal\"\r\n                        data-bs-target=\"#addVarsPopulationModal\"\r\n                      >\r\n                        add Vars\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    {standardPopulationVarList.map((vname) => {\r\n                      if (vname.tipo == 1) {\r\n                        return (\r\n                          <div className=\"mb-3\" key={vname.label}>\r\n                            <div>\r\n                              <h5>{vname.label}</h5>\r\n                            </div>\r\n                            <div className=\"row\">\r\n                              <div className=\"col-4  namevar\">\r\n                                <p className=\"align-middle\">Desde:</p>\r\n                              </div>\r\n                              <div className=\"col-8 \">\r\n                                <input\r\n                                  type=\"number\"\r\n                                  id={`lowerlimit${vname.label}`}\r\n                                  className=\"form-control\"\r\n                                  aria-describedby=\"lowerlimit\"\r\n                                />\r\n                              </div>\r\n                              <div className=\"col-4 \">\r\n                                <p className=\"align-middle\">Hasta:</p>\r\n                              </div>\r\n                              <div className=\"col-8 \">\r\n                                <input\r\n                                  type=\"number\"\r\n                                  id={`upperlimit${vname.label}`}\r\n                                  className=\"form-control\"\r\n                                  aria-describedby=\"upperlimit\"\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                            <hr />\r\n                          </div>\r\n                        );\r\n                      } else {\r\n                        let temp = envaroptions.find(\r\n                          (element) => element.nombre == vname.value\r\n                        );\r\n                        return (\r\n                          <div className=\"mb-3\" key={vname.label}>\r\n                            <div>\r\n                              <h5>{vname.label}</h5>\r\n                            </div>\r\n                            <Select\r\n                              isClearable={true}\r\n                              onChange={(value) => {\r\n                                handleChangeCat(vname.value, value);\r\n                              }}\r\n                              aria-labelledby=\"aria-label\"\r\n                              inputId=\"aria-example-input\"\r\n                              name=\"aria-live-color\"\r\n                              options={temp.options}\r\n                            />\r\n                            <hr />\r\n                          </div>\r\n                        );\r\n                      }\r\n                    })}\r\n                  </div>\r\n                </div>\r\n                <hr />\r\n                <div>\r\n                  <h4>Determinar variables</h4>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-5 offset-1\">\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-danger\"\r\n                        data-bs-toggle=\"modal\"\r\n                        data-bs-target=\"#removeVarsAnalisisModal\"\r\n                      >\r\n                        del Vars\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"col-5 \">\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-success\"\r\n                        data-bs-toggle=\"modal\"\r\n                        data-bs-target=\"#addVarsAnalisisModal\"\r\n                      >\r\n                        add Vars\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row my-3\">\r\n                    <div className=\"col-4\">\r\n                      <ul>\r\n                        {standardAnalisisVarList.map((vname) => {\r\n                          return (\r\n                            <li\r\n                              key={`analisisList-${vname.label}`}\r\n                              id={`analisisListItem-${vname.label}`}\r\n                              className=\"analisisListItem\"\r\n                            >\r\n                              {vname.label}\r\n                            </li>\r\n                          );\r\n                        })}\r\n                      </ul>\r\n                    </div>\r\n                    <div className=\"col-8\">\r\n                      <div className=\"row\">\r\n                        <label\r\n                          htmlFor=\"inputNumberClusters\"\r\n                          className=\"col-4 col-form-label\"\r\n                        >\r\n                          Número de Clusters\r\n                        </label>\r\n                        <div className=\"col-8\">\r\n                          <input\r\n                            type=\"number\"\r\n                            className=\"form-control\"\r\n                            id=\"inputNumberClusters\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-success\"\r\n                  onClick={() => {\r\n                    getnumfieldsdata();\r\n                  }}\r\n                >\r\n                  Generar grupos\r\n                </button>\r\n              </form>\r\n              <Groupdetail groupInfo={grupoClicked} visibility={\"d-none\"} />\r\n\r\n              <hr />\r\n            </div>\r\n          ) : (\r\n            //Detail del grupo\r\n            <Groupdetail groupInfo={grupoClicked} visibility={\"\"} />\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/*-------------------------------------------------MODAL------------------------------------------------*/}\r\n      {/*-------------------------------------------------MODAL------------------------------------------------*/}\r\n      {/*-------------------------------------------------MODAL------------------------------------------------*/}\r\n      {/*-------------------------------------------------MODAL------------------------------------------------*/}\r\n      {/*-------------------------------------------------MODAL------------------------------------------------*/}\r\n      {/*--------------------------------MODAL add variables to population-------------------------------------*/}\r\n      <div\r\n        className=\"modal fade\"\r\n        id=\"addVarsPopulationModal\"\r\n        tabIndex=\"-1\"\r\n        aria-labelledby=\"addVarsPopulationModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h6 className=\"modal-title\" id=\"addVarsPopulationModalLabel\">\r\n                Agregar Variables\r\n              </h6>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <Select\r\n                isClearable={true}\r\n                onChange={(value) => {\r\n                  handleChange(value);\r\n                }}\r\n                aria-labelledby=\"aria-label\"\r\n                inputId=\"aria-example-input\"\r\n                name=\"aria-live-color\"\r\n                options={populationVarList}\r\n                id=\"selectAddVarPopulation\"\r\n              />\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                data-bs-dismiss=\"modal\"\r\n                className=\"btn btn-primary\"\r\n                onClick={() => {\r\n                  handleVarAddingPopulation(selectValue);\r\n                }}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/*--------------------------------MODAL remove variables to population-------------------------------------*/}\r\n      <div\r\n        className=\"modal fade\"\r\n        id=\"removeVarsPopulationModal\"\r\n        tabIndex=\"-1\"\r\n        aria-labelledby=\"removeVarsPopulationModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h6 className=\"modal-title\" id=\"removeVarsPopulationModalLabel\">\r\n                Quitar Variables\r\n              </h6>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <Select\r\n                isClearable={true}\r\n                onChange={(value) => {\r\n                  handleChange(value);\r\n                }}\r\n                aria-labelledby=\"aria-label\"\r\n                inputId=\"aria-example-input\"\r\n                name=\"aria-live-color\"\r\n                options={standardPopulationVarList}\r\n              />\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                data-bs-dismiss=\"modal\"\r\n                className=\"btn btn-primary\"\r\n                onClick={() => {\r\n                  handleVarDeletingPopulation(selectValue);\r\n                }}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/*--------------------------------MODAL add variables to analisis-------------------------------------*/}\r\n      <div\r\n        className=\"modal fade\"\r\n        id=\"addVarsAnalisisModal\"\r\n        tabIndex=\"-1\"\r\n        aria-labelledby=\"addVarsAnalisisModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h6 className=\"modal-title\" id=\"addVarsAnalisisModalLabel\">\r\n                Agregar Variables\r\n              </h6>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <Select\r\n                isClearable={true}\r\n                onChange={(value) => {\r\n                  handleChange(value);\r\n                }}\r\n                aria-labelledby=\"aria-label\"\r\n                inputId=\"aria-example-input\"\r\n                name=\"aria-live-color\"\r\n                options={analisisVarList}\r\n                id=\"selectAddVarAnalisis\"\r\n              />\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                data-bs-dismiss=\"modal\"\r\n                className=\"btn btn-primary\"\r\n                onClick={() => {\r\n                  handleVarAddingAnalisis(selectValue);\r\n                }}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/*--------------------------------MODAL remove variables to analisis-------------------------------------*/}\r\n      <div\r\n        className=\"modal fade\"\r\n        id=\"removeVarsAnalisisModal\"\r\n        tabIndex=\"-1\"\r\n        aria-labelledby=\"removeVarsAnalisisModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h6 className=\"modal-title\" id=\"removeVarsAnalisisModalLabel\">\r\n                Quitar Variables\r\n              </h6>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <Select\r\n                isClearable={true}\r\n                onChange={(value) => {\r\n                  handleChange(value);\r\n                }}\r\n                aria-labelledby=\"aria-label\"\r\n                inputId=\"aria-example-input\"\r\n                name=\"aria-live-color\"\r\n                options={standardAnalisisVarList}\r\n              />\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                data-bs-dismiss=\"modal\"\r\n                className=\"btn btn-primary\"\r\n                onClick={() => {\r\n                  handleVarDeletingAnalisis(selectValue);\r\n                }}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GroupManage;\r\n","const API_URL = \"https://pgkmc.herokuapp.com/variables\";\r\nconst ALL_URL = `${API_URL}/all`;\r\nconst UPDATE_URL = (nombre_variable) => `${API_URL}/update/${nombre_variable}`;\r\n\r\nexport const getVariables = async () => {\r\n  return fetch(ALL_URL).then((res) => {\r\n    return res.json();\r\n  });\r\n};\r\n\r\nexport const updateVariable = async (name, body) => {\r\n  return fetch(UPDATE_URL(name), {\r\n    method: \"PUT\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(body),\r\n  })\r\n    .then(status)\r\n    .then((res) => res.json())\r\n    .catch(function (error) {\r\n      console.log(\"Error\", error);\r\n    });\r\n};\r\n\r\nfunction status(response) {\r\n  if (response.ok) {\r\n    return response;\r\n  }\r\n  return response.json().then((res) => Promise.reject(res));\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Select from \"react-select\";\r\nimport { Table, Button, Accordion, Container, Form, Row, Col } from 'react-bootstrap';\r\nimport { propTypes } from \"react-bootstrap/esm/Image\";\r\nimport { Formik, Field, ErrorMessage, FieldArray } from \"formik\";\r\n\r\n\r\n\r\n\r\nconst VariableFilter = (props) => {\r\n\r\n    const [filterData, setFilterData] = useState({text:\"\",tipo:0,tiempo: \"\"});\r\n\r\n\r\n    const filt = (d) =>{\r\n        if(d){\r\n        let textoCond = true;\r\n        if(filterData.text !== \"\"){\r\n            let f = filterData.text.toLowerCase();\r\n            textoCond = d.nombre_real?d.nombre_real.toLowerCase().includes(f):false || d.unidad? d.unidad.toLowerCase().includes(f):false || d.etiqueta?d.etiqueta.toLowerCase().includes(f):false || d.nombre_general?d.nombre_general.toLowerCase().includes(f):false;\r\n        }\r\n        let tipoCond = true;\r\n        if(filterData.tipo !== 0){\r\n            tipoCond = parseInt(d.tipo) === parseInt(filterData.tipo)\r\n        }\r\n        let tiempoCond = true;\r\n        if(filterData.tiempo !== \"\"){\r\n            tiempoCond = d.etapa === filterData.tiempo  || d.evento === filterData.tiempo || d.evento_inicial === filterData.tiempo || d.evento_final === filterData.tiempo;\r\n        }\r\n        return textoCond && tipoCond && tiempoCond\r\n        }\r\n    };\r\n\r\n    useEffect(()=>{\r\n        if(props.reales){\r\n            let newArr = Object.assign([], props.reales);\r\n            let rta = [];\r\n            for (let i = 0; i < newArr.length; i++){\r\n                let copia = Object.assign(newArr[i].values);\r\n                copia = copia.filter(filt);\r\n                if (copia.length > 0){\r\n                    newArr[i].values = copia;\r\n                    rta.push(newArr[i]);\r\n                }\r\n            }\r\n            props.setVariables((s)=>({...s,filtradas:rta}));\r\n        }\r\n    },\r\n    [filterData]);\r\n\r\n    const geteventosTemporales = (etapas) => {\r\n        return (\r\n          <Select\r\n            onChange={(value) => {\r\n                setFilterData((s)=>({...s,tiempo:value.value}));\r\n            }}\r\n            className=\"select-optional\"\r\n            isClearable={true}\r\n            aria-labelledby=\"aria-label\"\r\n            inputId=\"aria-example-input\"\r\n            name=\"aria-live-color\"\r\n            placeholder=\"etapa/evento\"\r\n            options={etapas}\r\n            />\r\n        );\r\n    };\r\n\r\n    const handleSubmit = (values,i,o) => {};\r\n\r\n    return(\r\n        <div>\r\n            <Formik\r\n                onSubmit={handleSubmit}\r\n                initialValues={{\r\n                tipo: 0,\r\n                }}\r\n              >\r\n              {({ handleSubmit, handleChange, values, errors, setFieldValue }) => (\r\n                <Form noValidate onSubmit={handleSubmit}>\r\n                    <Row>\r\n                        <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalNombreGeneral\">\r\n                            <Col sm={12}>\r\n                            <Form.Control\r\n                            type=\"text\"\r\n                            name=\"nombre_general\"\r\n                            onKeyPress={(event) => {\r\n                                if (event.key === \"Enter\") {\r\n                                    setFilterData((s)=>({...s,text:event.target.value}));\r\n                                }\r\n                            }}\r\n                            placeholder={\"Buscar\"} />\r\n                            </Col>\r\n                        </Form.Group>\r\n                    </Row>\r\n                    <Row>\r\n                        <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalTipo\">\r\n                            <Form.Label column sm={4}>\r\n                                Tipo\r\n                            </Form.Label>\r\n                            <Col sm={8}>\r\n                                <Form.Check\r\n                                type=\"radio\"\r\n                                label=\"Categórica\"\r\n                                name=\"tipo\"\r\n                                id=\"formHorizontalRadiosTipo1\"\r\n                                onChange={(d)=>{\r\n                                    console.log(\"SELECTED\");\r\n                                    if(d.target.checked===true){\r\n                                        setFilterData((s)=>({...s,tipo:2}));\r\n                                    }\r\n                                    else{\r\n                                        setFilterData((s)=>({...s,tipo:0}));\r\n                                    }\r\n                                }}\r\n                                />\r\n                                <Form.Check\r\n                                type=\"radio\"\r\n                                label=\"Numérica\"\r\n                                name=\"tipo\"\r\n                                id=\"formHorizontalRadiosTipo2\"\r\n                                onChange={(d)=>{\r\n                                    if(d.target.checked===true){\r\n                                        setFilterData((s)=>({...s,tipo:1}));\r\n                                    }\r\n                                    else{\r\n                                        setFilterData((s)=>({...s,tipo:0}));\r\n                                    }\r\n                                }}\r\n                                />\r\n                            </Col>\r\n                        </Form.Group>\r\n                    </Row>\r\n                    <Row>\r\n                        <p>Evento/etapa:</p>\r\n                        {geteventosTemporales(props.etapas)}\r\n                    </Row>\r\n                </Form>\r\n              )}\r\n              </Formik>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VariableFilter;","import React, { useState, useEffect } from \"react\";\r\nimport { Table, Button, Accordion, Container, Row, Col } from 'react-bootstrap';\r\nimport { getVariables } from \"../../services/variablesUtils.js\";\r\nimport { AiTwotoneEdit } from \"react-icons/ai\";\r\nimport VariableFilter from \"../variables/VariableFilter.js\";\r\n\r\n\r\nconst VariablesList = (props) => {\r\n\r\n    const [variables, setVariables] = useState({reales:[],filtradas:[],etapas:[]});\r\n\r\n    useEffect(()=>{\r\n        if(props.aux){\r\n            if(props.aux.nombre_real){\r\n                let clon = variables.reales;\r\n                for(let titl of clon){\r\n                    for(let j=0;j <titl.values.length; j++){\r\n                        if (titl.values[j].nombre_real===props.aux.nombre_real){\r\n                            titl.values[j] = props.aux;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                let clon2 = variables.filtradas;\r\n                for(let title of clon2){\r\n                    for(let i=0; i< title.values.length; i++){\r\n                        if (title.values[i].nombre_real===props.aux.nombre_real){\r\n                            title.values[i] = props.aux;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                setVariables((s)=>({...s, filtradas:clon2,reales:clon}));\r\n            }\r\n        }\r\n    },[props.aux]);\r\n\r\n    function groupBy(arr, criteria) {\r\n        const newObj = arr.reduce(function (acc, currentValue) {\r\n        if (!acc[currentValue[criteria]]) {\r\n            acc[currentValue[criteria]] = [];\r\n        }\r\n        acc[currentValue[criteria]].push({...currentValue, name: currentValue[\"nombre_general\"]+\" \"+currentValue[\"evento\"]});\r\n        return acc;\r\n    }, {});\r\n    return newObj;\r\n    };\r\n\r\n    useEffect(()=>{\r\n        getVariables().then((res) => {\r\n            let r = groupBy(res, \"nombre_general\");\r\n            var arr = [];\r\n            for (var key in r) {\r\n                if (r.hasOwnProperty(key)) {\r\n                arr.push( {\r\n                    title: key,values: r[key] } );\r\n                }\r\n            }\r\n            let etap = {};\r\n            for (let g of res){\r\n                if (g.evento){\r\n                    etap[g.evento] = g.evento;\r\n                }\r\n                else if(g.etapa){\r\n                    etap[g.etapa] = g.etapa;\r\n                }\r\n            }\r\n            setVariables((s)=>({...s,reales:arr,filtradas:arr,etapas:Object.keys(etap).map(t=>{\r\n                return { value: t, label: t };\r\n            })}));\r\n        });\r\n    },[]);\r\n    \r\n    return(\r\n        <div className=\"marginLeftTitle\">\r\n        <Container fluid>\r\n            <Row>\r\n                <Col md={8}>\r\n                <br/><br/>\r\n                <h3>Lista de variables</h3>\r\n                <br/><br/>\r\n                    <Accordion>\r\n                    {\r\n                    variables.filtradas.map(\r\n                        val => { \r\n                        return <Accordion.Item eventKey={val.title}>\r\n                        <Accordion.Header>\r\n                            <div className=\"fases\">\r\n                                <div className=\"ac-item\">{val.title}</div>\r\n                            </div>\r\n                        </Accordion.Header>\r\n                        <Accordion.Body>\r\n                            <Table bordered hover>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th></th>\r\n                                        <th>Nombre real</th>\r\n                                        <th>Evento</th>\r\n                                        <th>Tipo</th>\r\n                                        <th>Unidad</th>\r\n                                        <th>Etiqueta</th>\r\n                                        <th>Evento inicial</th>\r\n                                        <th>Evento final</th>\r\n                                        <th>Etapa</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {val.values.map(variable => {\r\n                                    return <tr>\r\n                                        <td><Button onClick={() => props.selectItem(variable)}><AiTwotoneEdit/></Button></td>\r\n                                        <td>{variable.nombre_real}</td>\r\n                                        <td>{variable.evento}</td>\r\n                                        {variable.tipo === 1? <td>numérica</td>:<td>categórica</td>}\r\n                                        <td>{variable.unidad}</td>\r\n                                        <td>{variable.etiqueta}</td>\r\n                                        <td>{variable.evento_inicial}</td>\r\n                                        <td>{variable.evento_final}</td>\r\n                                        <td>{variable.etapa}</td>\r\n                                    </tr>\r\n                                    })}\r\n                                </tbody>\r\n                            </Table>\r\n                        </Accordion.Body>\r\n                    </Accordion.Item>;\r\n                    })}\r\n                    </Accordion>\r\n                </Col>\r\n                <Col md={4}>\r\n                    <br/><br/>\r\n                    <h3>Filtrar</h3>\r\n                    <br/><br/>\r\n                    <VariableFilter etapas={variables.etapas} reales={variables.reales} variables={variables} setVariables={setVariables} />\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VariablesList;","import React, { useState, useEffect } from \"react\";\r\nimport { Row, Col, Form, Button, Table, Alert } from 'react-bootstrap';\r\nimport {ImCancelCircle} from 'react-icons/im';\r\nimport { Formik , FieldArray} from \"formik\";\r\nimport {GrClose} from \"react-icons/gr\";\r\nimport {AiOutlinePlus} from \"react-icons/ai\";\r\nimport { updateVariable } from \"../../services/variablesUtils.js\";\r\n\r\n/**\r\nonSubmit={handleSubmit}\r\n            initialValues={{\r\n            nombre_real:props.item.nombre_real,\r\n            evento: props.item.evento,\r\n            etiqueta: props.item.etiqueta,\r\n            etapa : props.item.etapa,\r\n            evento_inicial: props.item.evento_inicial,\r\n            evento_final: props.item.evento_final,\r\n            nombre_general:props.item.nombre_general,\r\n            tipo: props.item.tipo,\r\n            unidad:props.item.unidad,\r\n            acumulado: props.item.acumulado,\r\n            significados: props.item.significados\r\n */\r\nconst VariableEdit = (props) => {\r\n\r\n    const [etiquetas, setEtiquetas] = useState(props.item.etiqueta?(props.item.etiqueta).toString().split(\"|\"):[]);\r\n    const [significados, setSignificados] = useState(props.item.significados?props.item.significados:[]);\r\n    const [sigact, setSigAct] = useState({valor_db:\"\",valor_traducido:\"\"})\r\n    const addEtiqueta = (tag) => {setEtiquetas([...etiquetas,tag])};\r\n\r\n    const addSignificado = () => {\r\n        setSignificados([...significados,sigact]);\r\n    };\r\n\r\n    useEffect(()=>{\r\n    },[significados]);\r\n\r\n    const modifySignificado = (key,sig,i) => {\r\n        let newArr = Object.assign([],significados);\r\n        if( key === \"valor_db\") newArr[i].valor_db = sig;\r\n        if( key === \"valor_traducido\") newArr[i].valor_traducido = sig; \r\n        setSignificados(newArr);\r\n    };\r\n\r\n    const modifySignificadoActual = (key,sig) => {\r\n        let temp = Object.assign({},sigact);\r\n        if(key === \"valor_db\") temp.valor_db=sig;\r\n        else if(key === \"valor_traducido\") temp.valor_traducido=sig;\r\n        setSigAct(temp);\r\n    };\r\n\r\n    const removeSignificado = (i) => {\r\n        let newArr = Object.assign([],significados);\r\n        newArr.splice(i,1);\r\n        setSignificados(newArr);\r\n    };\r\n\r\n    const removeEtiqueta = (i) => {\r\n        let newArr = Object.assign([],etiquetas);\r\n        newArr.splice(i,1);\r\n        setEtiquetas(newArr);\r\n    };\r\n\r\n    const handleSubmit = (values) => {};\r\n\r\n    const handleButtonClick = (values) => {\r\n        let dir = {\r\n            nombre_real:values.nombre_real,\r\n            evento: values.evento,\r\n            etiqueta: etiquetas.join(\"|\"),\r\n            etapa : values.etapa,\r\n            evento_inicial: values.evento_inicial,\r\n            evento_final: values.evento_final,\r\n            nombre_general:values.nombre_general,\r\n            tipo: values.tipo,\r\n            unidad:values.unidad,\r\n            acumulado: values.acumulado,\r\n            significados:significados\r\n        }\r\n        updateVariable(props.item.nombre_real,dir).then((res)=>{\r\n            props.unSelectItem(res);\r\n        });\r\n    };\r\n\r\n    useEffect(()=>{\r\n        setEtiquetas(props.item.etiqueta?(props.item.etiqueta).toString().split(\"|\"):[]);\r\n        setSignificados(props.item.significados?props.item.significados:[]);\r\n    },[props.item]);\r\n\r\n    const getOptionsEtapas = (defaultVal, selectvalue, handleChange, pName) => {\r\n        return (\r\n        <Form.Select name={pName} defaultValue={defaultVal} value={selectvalue} onChange={handleChange}>\r\n            <option selected={defaultVal === null} value={null}></option>\r\n            <option selected={defaultVal === \"entorno\"} value={\"entorno\"}>entorno</option>\r\n            <option selected={defaultVal === \"parto y post-parto\"} value={\"parto y post-parto\"}>parto y post-parto</option>\r\n            <option selected={defaultVal === \"nacimiento\"} value={\"nacimiento\"}>nacimiento</option>\r\n            <option selected={defaultVal === \"salida hospitalización\"} value={\"salida hospitalización\"}>salida hospitalización</option>\r\n            <option selected={defaultVal === \"entrada Programa canguro\"} value={\"entrada Programa canguro\"}>entrada Programa canguro</option>\r\n            <option selected={defaultVal === \"semana 40\"} value={\"semana 40\"}>semana 40</option>\r\n            <option selected={defaultVal === \"mes 3\"} value={\"mes 3\"}>mes 3</option>\r\n            <option selected={defaultVal === \"mes 6\"} value={\"mes 6\"}>mes 6</option>\r\n            <option selected={defaultVal === \"mes 9\"} value={\"mes 9\"}>mes 9</option>\r\n            <option selected={defaultVal === \"mes 12\"} value={\"mes 12\"}>mes 12</option>\r\n            <option selected={defaultVal === \"entrada posición canguro\"} value={\"entrada posición canguro\"}>entrada posición canguro</option>\r\n            <option selected={defaultVal === \"salida posición canguro\"} value={\"salida posición canguro\"}>salida posición canguro</option>\r\n        </Form.Select>\r\n        );\r\n    };\r\n\r\n    return(\r\n        <Formik\r\n            enableReinitialize\r\n            onSubmit={handleSubmit}\r\n            initialValues={props.item}\r\n        >\r\n        {({ handleSubmit, handleChange, values, errors }) => (\r\n        <Form noValidate onSubmit={handleSubmit}>\r\n            <h1>{props.title}</h1>\r\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalNombreGeneral\">\r\n                <Form.Label column sm={4}>\r\n                Nombre general\r\n                </Form.Label>\r\n                <Col sm={8}>\r\n                <Form.Control\r\n                type=\"text\"\r\n                value={values.nombre_general}\r\n                name=\"nombre_general\"\r\n                onChange={handleChange}\r\n                placeholder={values.nombre_general?values.nombre_general:\"Ingresar nombre general\"} />\r\n                </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalNombreReal\">\r\n                <Form.Label column sm={4}>\r\n                Nombre real\r\n                </Form.Label>\r\n                <Col sm={8}>\r\n                <Form.Control\r\n                type=\"text\"\r\n                name=\"nombre_real\"\r\n                onChange={handleChange}\r\n                value={values.nombre_real}\r\n                placeholder={values.nombre_real?values.nombre_real:\"Ingresar nombre real\"} />\r\n                </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalAcumulado\">\r\n                <Form.Label column sm={4}>\r\n                Acumulado\r\n                </Form.Label>\r\n                <Col sm={8}>\r\n                <Form.Control type=\"text\"\r\n                value={values.acumulado}\r\n                onChange={handleChange}\r\n                name=\"acumulado\"\r\n                placeholder={values.acumulado === 1 ?\"si\":\"no\"} />\r\n                </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalUnidad\">\r\n                <Form.Label column sm={4}>\r\n                Unidad\r\n                </Form.Label>\r\n                <Col sm={8}>\r\n                <Form.Control type=\"text\"\r\n                value={values.unidad}\r\n                name=\"unidad\"\r\n                onChange={handleChange}\r\n                placeholder={values.unidad?values.unidad:\"Ingresar unidad\"} />\r\n                </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formGridState\">\r\n                <Form.Label column sm={4}>Evento</Form.Label>\r\n                <Col sm={8}>\r\n                {\r\n                    getOptionsEtapas(values.evento?values.evento:\"\",values.evento, handleChange,\"evento\")\r\n                }\r\n                </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className=\"mb-3\"  controlId=\"formGridState\">\r\n                <Form.Label column sm={4}>Evento inicial</Form.Label>\r\n                <Col sm={8}>\r\n                {\r\n                     getOptionsEtapas(values.evento_inicial?values.evento_inicial:\"\",values.evento_inicial,handleChange,\"evento_inicial\")\r\n                }\r\n                </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formGridState\">\r\n                <Form.Label column sm={4}>Evento final</Form.Label>\r\n                <Col sm={8}>\r\n                {\r\n                     getOptionsEtapas(values.evento_final?values.evento_final:\"\",values.evento_final,handleChange,\"evento_final\")\r\n                }\r\n                </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalEtapa\">\r\n                <Form.Label column sm={4}>\r\n                Etapa\r\n                </Form.Label>\r\n                <Col sm={8}>\r\n                <Form.Control type=\"text\"\r\n                onChange={handleChange}\r\n                name=\"etapa\"\r\n                placeholder={values.etapa?values.etapa:\"Ingresar etapa\"} />\r\n                </Col>\r\n            </Form.Group>\r\n\r\n            <fieldset>\r\n                <Form.Group as={Row} className=\"mb-3\">\r\n                <Form.Label as=\"legend\" column sm={4}>\r\n                    Tipo\r\n                </Form.Label>\r\n                <Col sm={8}>\r\n                    <Form.Check\r\n                    type=\"radio\"\r\n                    value={values.tipo}\r\n                    label=\"numérica\"\r\n                    onChange={handleChange}\r\n                    name=\"tipo\"\r\n                    id=\"formHorizontalRadios1\"\r\n                    checked={values.tipo === 1}\r\n                    />\r\n                    <Form.Check\r\n                    type=\"radio\"\r\n                    onChange={handleChange}\r\n                    label=\"categórica\"\r\n                    value={values.tipo}\r\n                    name=\"tipo\"\r\n                    id=\"formHorizontalRadios2\"\r\n                    checked={values.tipo === 2}\r\n                    />\r\n                    <Form.Check\r\n                    type=\"radio\"\r\n                    value={values.tipo}\r\n                    label=\"fecha\"\r\n                    onChange={handleChange}\r\n                    name=\"tipo\"\r\n                    id=\"formHorizontalRadios3\"\r\n                    checked={values.tipo === 3}\r\n                    />\r\n                </Col>\r\n                </Form.Group>\r\n            </fieldset>\r\n\r\n            <Form.Group as={Row} className=\"mb-4\" controlId=\"formHorizontalEtiqueta2\">\r\n                <Col sm={4}></Col>\r\n                <Col sm={8}>\r\n                    <Table>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Valor en Base de datos</th>\r\n                                <th>Significado</th>\r\n                                <th></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {significados.map((x,i)=>{\r\n                            return (\r\n                                <>\r\n                                <tr key={x.valor_db}>\r\n                                    <td>\r\n                                        <Form.Control\r\n                                        type=\"number\"\r\n                                        value={x.valor_db}\r\n                                        onKeyPress={(event) => {\r\n                                            if (event.key === \"Enter\") {\r\n                                                modifySignificado(\"valor_db\",event.target.value,i);\r\n                                            }\r\n                                        }}\r\n                                        onChange={handleChange}\r\n                                        placeholder={x.valor_db ? x.valor_db:\"N/A\"} />\r\n                                    </td>\r\n                                    <td>\r\n                                        <Form.Control type=\"text\"\r\n                                        onKeyPress={(event) => {\r\n                                            if (event.key === \"Enter\") {\r\n                                                modifySignificado(\"valor_traducido\",event.target.value,i);\r\n                                            }\r\n                                        }}\r\n                                        placeholder={x.valor_traducido ? x.valor_traducido:\"N/A\"}\r\n                                        />\r\n                                    </td>\r\n                                    <td>\r\n                                        <button className=\"settingsCancel\" onClick={() => {removeSignificado(i)}}><GrClose/></button>\r\n                                    </td>\r\n                                </tr>\r\n                                </>\r\n                            );\r\n                        })}\r\n                        <tr key={\"last\"}>\r\n                            <td>\r\n                                <Form.Control\r\n                                type=\"number\"\r\n                                onChange={(event)=>{\r\n                                    modifySignificadoActual(\"valor_db\",event.target.value);\r\n                                }}\r\n                                placeholder=\"Ingresar valor\" />\r\n                            </td>\r\n                            <td>\r\n                                <Form.Control\r\n                                type=\"text\"\r\n                                onChange={(event)=>{\r\n                                    modifySignificadoActual(\"valor_traducido\",event.target.value);\r\n                                }}\r\n                                placeholder=\"Ingresar significado\" />\r\n                            </td>\r\n                            <td>\r\n                                <button className=\"settingsAdd\" onClick={() => {addSignificado()}}><AiOutlinePlus/></button>\r\n                            </td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </Table>\r\n                </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalEtiqueta\">\r\n                <Form.Label column sm={4}>\r\n                Etiqueta\r\n                </Form.Label>\r\n                <Col sm={8}>\r\n                {etiquetas.map((et,i) =>{\r\n                    return(\r\n                        <Alert key={i} variant=\"primary\">\r\n                            {et}\r\n                            <span className=\"cancel-etiqueta\" onClick={()=>{removeEtiqueta(i)}}><a><GrClose/></a></span>\r\n                        </Alert>\r\n                    )\r\n                } \r\n                )}\r\n                <Form.Control\r\n                type=\"text\"\r\n                onKeyPress={(event) => {\r\n                    if (event.key === \"Enter\") {\r\n                        addEtiqueta(event.target.value);\r\n                    }\r\n                }}\r\n                onChange={handleChange}\r\n                placeholder=\"Ingresar nueva etiqueta\" />\r\n                </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className=\"mb-3\">\r\n                <Col sm={{ span: 10, offset: 2 }}>\r\n                <Button type=\"button\" onClick={() => handleButtonClick(values)}>{props.title}</Button>\r\n                </Col>\r\n            </Form.Group>\r\n        </Form>\r\n    )}\r\n    </Formik>\r\n    );\r\n};\r\n\r\nexport default VariableEdit;","import React, { useState, useEffect } from \"react\";\r\nimport VariablesList from \"./variables/VariablesList.js\";\r\nimport VariableEdit from \"./variables/VariableEdit.js\";\r\nimport { Row, Col, Container } from 'react-bootstrap';\r\nimport DropdownItem from \"react-bootstrap/esm/DropdownItem\";\r\n\r\n\r\nconst VariableManage = () => {\r\n\r\n    const [selectedItem, setSelectedItem] = useState({});\r\n    const [hide, setHide] = useState(\"\");\r\n    const [aux, setAux] = useState({});\r\n\r\n    const selectItem= (item) => {\r\n        setSelectedItem(item);\r\n        setHide(\"hideEditDisplay\");\r\n    };\r\n\r\n    const unSelectItem= (item) => {\r\n        setAux(item);\r\n        setSelectedItem({});\r\n        setHide(\"\");\r\n    };\r\n\r\n    return(\r\n        <div className=\"variableList\">\r\n            <VariablesList setAux={setAux} aux={aux} selectItem={selectItem}/>\r\n            <div className={\"fixedEditPanel \"+hide}>\r\n                <div className={\"scroll-panel variableEditAbsolute \" +hide}>\r\n                    <button onClick={() => setHide(\"\")} className=\"cancelEditButton\">X</button>   \r\n                    <div className=\"marginEditAbsolute\">\r\n                        <VariableEdit title={\"Editar\"} item={selectedItem} unSelectItem={unSelectItem} setSelectedItem={setSelectedItem}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VariableManage;","const API_URL = \"https://pgkmc.herokuapp.com/temas\";\r\nconst ALL_URL = `${API_URL}/all`;\r\nconst ALLVARS_URL = `${API_URL}/allvariables`;\r\n\r\nexport const getTemasVariables = async () => {\r\n  return fetch(ALLVARS_URL).then((res) => {\r\n    return res.json();\r\n  });\r\n};\r\n\r\nexport const getTemas = async () => {\r\n  return fetch(ALL_URL).then((res) => {\r\n    return res.json();\r\n  });\r\n};\r\n","import { getTemas, getTemasVariables } from \"../../services/temasUtils.js\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Table, Button, Accordion, Container, Row, Col } from 'react-bootstrap';\r\nimport {BsTrash} from \"react-icons/bs\";\r\n\r\nconst TemasList = (props) => {\r\n\r\n    const [temas, setTemas] = useState([]);\r\n\r\n    function groupBy(arr, criteria) {\r\n        const newObj = arr.reduce(function (acc, currentValue) {\r\n        if (!acc[currentValue[criteria]]) {\r\n            acc[currentValue[criteria]] = [];\r\n        }\r\n        acc[currentValue[criteria]].push({...currentValue, name: currentValue[\"nombre_general\"]+\" \"+currentValue[\"evento\"]});\r\n        return acc;\r\n    }, {});\r\n    return newObj;\r\n    };\r\n\r\n    const replaceTitle = (x,y) => {\r\n        x.title = y.nombre;\r\n        return x;\r\n    };\r\n\r\n    useEffect(()=>{\r\n            getTemas().then((res2) => {\r\n                setTemas(res2);\r\n            });\r\n    },[]);\r\n\r\n    return(\r\n        <Container fluid>\r\n            <Row>\r\n                <Col md={7}>\r\n                    <Accordion>\r\n                    {\r\n                    temas.map(\r\n                        val => { \r\n                        return <Accordion.Item eventKey={val.nombre}>\r\n                        <Accordion.Header>\r\n                            <div className=\"fases\">\r\n                                <div className=\"ac-item\">{val.nombre}</div>\r\n                            </div>\r\n                        </Accordion.Header>\r\n                        <Accordion.Body>\r\n                            <Table bordered hover>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th className=\"first-column\"></th>\r\n                                        <th>Nombre general</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {val.variables.map(variable => {\r\n                                    return <tr>\r\n                                        <td className=\"first-column\"><Button variant=\"light\" onClick={() => props.selectItem(variable)}><BsTrash/></Button></td>\r\n                                        <td>{variable.nombre_general}</td>\r\n                                    </tr>\r\n                                    })}\r\n                                </tbody>\r\n                            </Table>\r\n                        </Accordion.Body>\r\n                    </Accordion.Item>;\r\n                    })}\r\n                    </Accordion>\r\n                </Col>\r\n                <Col md={4}></Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n\r\n};\r\n\r\nexport default TemasList;","import React, { useState, useEffect } from \"react\";\r\nimport { Row, Col, Container } from 'react-bootstrap';\r\nimport TemasList from \"./temas/TemasList.js\";\r\n\r\n\r\n\r\nconst TemasManage = () => {\r\n    const [selectedItem, setSelectedItem] = useState({});\r\n    const [hide, setHide] = useState(\"\");\r\n\r\n    const selectItem= (item) => {\r\n        setSelectedItem(item);\r\n        setHide(\"hideEditDisplay\");\r\n    };\r\n\r\n    return(\r\n        <div className=\"variableList\">\r\n            <TemasList selectItem={selectItem}/>\r\n            <div className=\"fixedEditPanel\">\r\n            <div className={\"scroll-panel variableEditAbsolute \" +hide}>\r\n            </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TemasManage;","import React, { useState, useEffect } from \"react\";\r\nimport { ArrowsAngleContract } from \"react-bootstrap-icons\";\r\n\r\nimport Select from \"react-select\";\r\n\r\nconst colourOptions = [\r\n  { value: \"ocean\", label: \"Ocean\" },\r\n  { value: \"blue\", label: \"Blue\" },\r\n  { value: \"purple\", label: \"Purple\" },\r\n  { value: \"red\", label: \"Red\" },\r\n  { value: \"orange\", label: \"Orange\" },\r\n  { value: \"yellow\", label: \"Yellow\" },\r\n  { value: \"green\", label: \"Green\" },\r\n  { value: \"forest\", label: \"Forest\" },\r\n  { value: \"slate\", label: \"Slate\" },\r\n  { value: \"silver\", label: \"Silver\" },\r\n];\r\n\r\nlet originalState = [\r\n  { value: \"IQ12\", label: \"IQ12\", tipo: \"C\" },\r\n  { value: \"IQ6\", label: \"IQ6\", tipo: \"C\" },\r\n  { value: \"Estudios\", label: \"Estudios\", tipo: \"C\" },\r\n  { value: \"PC\", label: \"PC\", tipo: \"N\" },\r\n  { value: \"Peso\", label: \"Peso\", tipo: \"N\" },\r\n  { value: \"Talla\", label: \"Talla\", tipo: \"N\" },\r\n  { value: \"Ali\", label: \"Ali\", tipo: \"C\" },\r\n];\r\n\r\nlet fullList = [...originalState];\r\n\r\nlet standardVars = [];\r\n\r\nconst Groupform = () => {\r\n  const [selectValue, setSelectValue] = useState(null);\r\n  const [fList, setFList] = useState(fullList);\r\n  const [inputCatFields, setInputCatFields] = useState([]);\r\n\r\n  const handleChange = (value) => {\r\n    setSelectValue(value);\r\n  };\r\n\r\n  const handleChangeCat = (name, value) => {\r\n    let arr = [];\r\n    inputCatFields.map((field) => {\r\n      if (field.variable != name) {\r\n        arr.push(field);\r\n      }\r\n    });\r\n    let valor;\r\n    if (value == null) {\r\n      valor = null;\r\n    } else {\r\n      valor = value.value;\r\n    }\r\n    setInputCatFields([\r\n      ...arr,\r\n      {\r\n        variable: name,\r\n        limiteinf: null,\r\n        limitesup: null,\r\n        igual: valor,\r\n        tipo: \"C\",\r\n      },\r\n    ]);\r\n  };\r\n\r\n  const handleVarAdding = (pvariable) => {\r\n    if (pvariable != null) {\r\n      let index;\r\n      fList.map((item) => {\r\n        if (pvariable.value == item.value) {\r\n          standardVars.push(pvariable);\r\n          index = fList.indexOf(pvariable);\r\n          setSelectValue(null);\r\n\r\n          setFList(fullList);\r\n        }\r\n      });\r\n      let arr = [];\r\n      for (let i = 0; i < fList.length; i++) {\r\n        if (i != index) {\r\n          arr.push(fList[i]);\r\n        }\r\n      }\r\n      setFList(arr);\r\n    }\r\n  };\r\n\r\n  const handleVarDeleting = (pvariable) => {\r\n    if (pvariable != null) {\r\n      let arr2 = [];\r\n      inputCatFields.map((field) => {\r\n        if (field.variable != pvariable.label) {\r\n          arr2.push(field);\r\n        }\r\n      });\r\n      setInputCatFields(arr2);\r\n      let index;\r\n      standardVars.map((item) => {\r\n        if (pvariable.value == item.value) {\r\n          fList.push(pvariable);\r\n\r\n          index = standardVars.indexOf(pvariable);\r\n          setSelectValue(null);\r\n        }\r\n      });\r\n      let arr = [];\r\n      for (let i = 0; i < standardVars.length; i++) {\r\n        if (i != index) {\r\n          arr.push(standardVars[i]);\r\n        }\r\n      }\r\n      standardVars = arr;\r\n    }\r\n  };\r\n\r\n  const getnumfieldsdata = () => {\r\n    let arr = [];\r\n    standardVars.map((item) => {\r\n      let down;\r\n      let up;\r\n      if (item.tipo == \"N\") {\r\n        down = parseInt(\r\n          document.getElementById(`lowerlimit${item.label}`).value\r\n        );\r\n        if (down != down) {\r\n          down = null;\r\n        }\r\n\r\n        up = parseInt(document.getElementById(`upperlimit${item.label}`).value);\r\n\r\n        if (up != up) {\r\n          up = null;\r\n        }\r\n\r\n        let jobj = {\r\n          variable: item.label,\r\n          limiteinf: down,\r\n          limitesup: up,\r\n          igual: null,\r\n          tipo: \"N\",\r\n        };\r\n        if (up != null || down != null) {\r\n          arr.push(jobj);\r\n        }\r\n      }\r\n    });\r\n    inputCatFields.map((field) => {\r\n      arr.push(field);\r\n    });\r\n    let ng = document.getElementById(\"nombre1\").value;\r\n    if (ng == \"\") {\r\n      ng = \"grupo sin nombre\";\r\n    }\r\n    let postbody = {\r\n      nombregrupo: ng,\r\n      variables: arr,\r\n    };\r\n    console.log(postbody);\r\n    console.log(arr);\r\n    document.getElementById(\"nombre1\").value = \"\";\r\n    fullList = [...originalState];\r\n    setFList(fullList);\r\n    standardVars = [];\r\n  };\r\n\r\n  useEffect(() => {}, []);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"\">\r\n        <h5>Crear Grupo</h5>\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col-5 offset-1\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-danger\"\r\n            data-bs-toggle=\"modal\"\r\n            data-bs-target=\"#exampleModal1\"\r\n          >\r\n            del Vars\r\n          </button>\r\n        </div>\r\n        <div className=\"col-5 \">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-success\"\r\n            data-bs-toggle=\"modal\"\r\n            data-bs-target=\"#exampleModal\"\r\n          >\r\n            add Vars\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <form>\r\n        <div className=\"groupform\">\r\n          <div className=\"innerformcontent\">\r\n            <div className=\"mb-3\">\r\n              <h5>Nombre del grupo</h5>\r\n              <input\r\n                className=\"form-control\"\r\n                type=\"text\"\r\n                id=\"nombre1\"\r\n                aria-describedby=\"emailHelp\"\r\n              />\r\n            </div>\r\n            {standardVars.map((vname) => {\r\n              if (vname.tipo == \"N\") {\r\n                return (\r\n                  <div className=\"mb-3\" key={vname.label}>\r\n                    <div>\r\n                      <h5>{vname.label}</h5>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                      <div className=\"col-4  namevar\">\r\n                        <p className=\"align-middle\">Desde:</p>\r\n                      </div>\r\n                      <div className=\"col-8 \">\r\n                        <input\r\n                          type=\"number\"\r\n                          id={`lowerlimit${vname.label}`}\r\n                          className=\"form-control\"\r\n                          aria-describedby=\"lowerlimit\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"col-4 \">\r\n                        <p className=\"align-middle\">Hasta:</p>\r\n                      </div>\r\n                      <div className=\"col-8 \">\r\n                        <input\r\n                          type=\"number\"\r\n                          id={`upperlimit${vname.label}`}\r\n                          className=\"form-control\"\r\n                          aria-describedby=\"upperlimit\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <hr />\r\n                  </div>\r\n                );\r\n              } else {\r\n                return (\r\n                  <div className=\"mb-3\" key={vname.label}>\r\n                    <div>\r\n                      <h5>{vname.label}</h5>\r\n                    </div>\r\n                    <Select\r\n                      isClearable={true}\r\n                      onChange={(value) => {\r\n                        handleChangeCat(vname.label, value);\r\n                      }}\r\n                      aria-labelledby=\"aria-label\"\r\n                      inputId=\"aria-example-input\"\r\n                      name=\"aria-live-color\"\r\n                      options={colourOptions}\r\n                    />\r\n                    <hr />\r\n                  </div>\r\n                );\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <button\r\n        type=\"\"\r\n        className=\"btn btn-primary\"\r\n        onClick={() => {\r\n          getnumfieldsdata();\r\n        }}\r\n      >\r\n        Submit\r\n      </button>\r\n      {/*-------------------------------------------------MODAL------------------------------------------------*/}\r\n      {/*-------------------------------------------------MODAL------------------------------------------------*/}\r\n      {/*-------------------------------------------------MODAL------------------------------------------------*/}\r\n      {/*-------------------------------------------------MODAL------------------------------------------------*/}\r\n      {/*-------------------------------------------------MODAL------------------------------------------------*/}\r\n      <div\r\n        className=\"modal fade\"\r\n        id=\"exampleModal\"\r\n        tabIndex=\"-1\"\r\n        aria-labelledby=\"exampleModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h6 className=\"modal-title\" id=\"exampleModalLabel\">\r\n                Agregar Variables\r\n              </h6>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <Select\r\n                isClearable={true}\r\n                onChange={(value) => {\r\n                  handleChange(value);\r\n                }}\r\n                aria-labelledby=\"aria-label\"\r\n                inputId=\"aria-example-input\"\r\n                name=\"aria-live-color\"\r\n                options={fList}\r\n                id=\"selectagregarvariable\"\r\n              />\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                data-bs-dismiss=\"modal\"\r\n                className=\"btn btn-primary\"\r\n                onClick={() => {\r\n                  handleVarAdding(selectValue);\r\n                }}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        className=\"modal fade\"\r\n        id=\"exampleModal1\"\r\n        tabIndex=\"-1\"\r\n        aria-labelledby=\"exampleModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h6 className=\"modal-title\" id=\"exampleModalLabel\">\r\n                Quitar Variables\r\n              </h6>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <Select\r\n                isClearable={true}\r\n                onChange={(value) => {\r\n                  handleChange(value);\r\n                }}\r\n                aria-labelledby=\"aria-label\"\r\n                inputId=\"aria-example-input\"\r\n                name=\"aria-live-color\"\r\n                options={standardVars}\r\n              />\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                data-bs-dismiss=\"modal\"\r\n                className=\"btn btn-primary\"\r\n                onClick={() => {\r\n                  handleVarDeleting(selectValue);\r\n                }}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Groupform;\r\n","const API_URL = \"https://pgkmc.herokuapp.com/grupos\";\r\nconst ALL_URL = `${API_URL}/all`;\r\nconst CLUSTERALL_URL = `${API_URL}/clusterall`;\r\nconst CREATE_URL = `${API_URL}/create`;\r\nconst DELETE_URL = (gID) => `${API_URL}/delete/${gID}`;\r\nconst DELETE_CLUSTER_URL = (gID) => `${API_URL}/deletecluster/${gID}`;\r\nconst BINS_URL = (bins, variable, tipo, grupoescogido) =>\r\n  `${API_URL}/nivel/${bins}/${variable}/${tipo}/${grupoescogido}`;\r\n\r\nexport const getGruposCluster = async () => {\r\n  return fetch(CLUSTERALL_URL).then((res) => {\r\n    return res.json();\r\n  });\r\n};\r\n\r\nexport const getGrupos = async () => {\r\n  return fetch(ALL_URL).then((res) => {\r\n    return res.json();\r\n  });\r\n};\r\n\r\nexport const deleteGrupo = async (gId) => {\r\n  return fetch(DELETE_URL(gId), {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then(status)\r\n    .then((res) => {\r\n      return res.json();\r\n    });\r\n};\r\n\r\nexport const deleteGrupoCluster = async (gId) => {\r\n  return fetch(DELETE_CLUSTER_URL(gId), {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then(status)\r\n    .then((res) => {\r\n      return res.json();\r\n    });\r\n};\r\n\r\nexport const getBins = async (\r\n  bins,\r\n  variable,\r\n  tipo,\r\n  conditions,\r\n  grupoescogido\r\n) => {\r\n  return fetch(BINS_URL(bins, variable, tipo, grupoescogido), {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(conditions),\r\n  })\r\n    .then(status)\r\n    .then((res) => res.json())\r\n    .catch(function (error) {\r\n      console.log(\"Error\", error);\r\n    });\r\n};\r\n\r\nexport const createGroup = async (conditions) => {\r\n  return fetch(CREATE_URL, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(conditions),\r\n  }).then((res) => {\r\n    return res.json();\r\n  });\r\n};\r\n\r\nfunction status(response) {\r\n  if (response.ok) {\r\n    return response;\r\n  }\r\n  return response.json().then((res) => Promise.reject(res));\r\n}\r\n","import React, { useState, useEffect  } from \"react\";\r\nimport \"./sidebar.css\";\r\nimport Groupform from \"./groupform\";\r\nimport {GrFormNextLink} from \"react-icons/gr\";\r\nimport {BsCheckLg} from \"react-icons/bs\";\r\nimport {AiFillDelete, AiFillEdit} from \"react-icons/ai\";\r\nimport { deleteGrupo, deleteGrupoCluster } from \"../../services/gruposUtils.js\"\r\n\r\nconst GroupsItem = (props) => {\r\n  const [selected, setSelected] = useState(false);\r\n  const [selectedEdit, setSelectedEdit] = useState(false);\r\n\r\n  const removeGroupFromnTree = () =>{\r\n    setSelected(false);\r\n    let newArr = Object.assign([],props.groupsCluster);\r\n    newArr = newArr.filter((d)=>(d.id !== props.id && d.nombre !== props.name));\r\n    props.setGroupsCluster(newArr);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(props.deleted.nombre === props.groupInfo.nombre && props.deleted.id === props.groupInfo.id){\r\n      if(selected){//antes de eliminarlo lo saca del tree\r\n        removeGroupFromnTree();\r\n      }\r\n      removeGroupFromDatabase();\r\n    }\r\n  }, [props.deleted]);\r\n\r\n  /**\r\n   * <button\r\n          className={props.grupoClicked? ( props.grupoClicked.nombre === props.name ? \"btn btn-primary buttongrupos\":\"btn btn-light buttongrupos\"):\"btn btn-light buttongrupos\"}\r\n          onClick={() => {\r\n              if(props.grupoClicked){\r\n                if(props.grupoClicked.nombre === props.name){\r\n                  props.handleClick({nombre:\"\"});\r\n                }\r\n                else{\r\n                  props.handleClick(props.groupInfo);\r\n                }\r\n              }\r\n              else{\r\n                props.handleClick({nombre:\"\"});\r\n              }\r\n          }}\r\n        >\r\n          {props.name}\r\n        </button>\r\n   */\r\n\r\n  const removeGroupFromDatabase = () =>{\r\n    if(props.tipo ===\"manual\"){\r\n      setSelected(false);\r\n      deleteGrupo(props.id).then((res)=>{\r\n        if(res[\"res\"]===\"group deleted successfuly\"){\r\n          props.eliminarFunc(props.id,props.name,props.tipo);\r\n        }\r\n        else{\r\n          //indicarle al usuario que no se pudo eliminar el grupo\r\n        }\r\n      })\r\n    }\r\n    else if(props.tipo ===\"cluster\"){\r\n      setSelected(false);\r\n      deleteGrupoCluster(props.id).then((res)=>{\r\n        if(res[\"res\"]===\"group deleted successfuly\"){\r\n          props.eliminarFunc(props.id,props.name,props.tipo);\r\n        }\r\n        else{\r\n          //indicarle al usuario que no se pudo eliminar el grupo\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  return(\r\n    <div className=\"row my-2 lenghtgrupos\" key={props.name}>\r\n      <div className=\"col-12 fases\">\r\n        <button\r\n        className=\"btn btn-light\"\r\n        title=\"Eliminar grupo\"\r\n        onClick={() =>{\r\n          props.handleShow(props.groupInfo);\r\n        }}>\r\n          <AiFillDelete/>\r\n        </button>\r\n        <button\r\n        className={selectedEdit? \"btn btn-primary\":\"btn btn-light\"}\r\n        title=\"Editar grupo\"\r\n        onClick={() =>{\r\n          /**\r\n          if(selectedEdit){\r\n            setSelectedEdit(false);\r\n            hideEditPanel();\r\n          }\r\n          else{\r\n            setSelectedEdit(true);\r\n            showEditPanel();\r\n          }*/\r\n          if(props.grupoClicked){\r\n            if(props.grupoClicked.nombre === props.name){\r\n              props.handleClick({nombre:\"\"});\r\n            }\r\n            else{\r\n              props.handleClick(props.groupInfo);\r\n            }\r\n          }\r\n          else{\r\n            props.handleClick({nombre:\"\"});\r\n          }\r\n\r\n\r\n        }}>\r\n          <AiFillEdit/>\r\n        </button>\r\n        <button\r\n        title=\"Añadir al arbol\"\r\n        className={selected? \"btn btn-danger buttongrupos\":\"btn btn-light buttongrupos\"}\r\n        onClick={() => {\r\n          if(selected){\r\n            removeGroupFromnTree();\r\n          }\r\n          else{\r\n            setSelected(true);\r\n            props.setGroupsCluster(s=>([...s,props.groupInfo]));\r\n          }\r\n        }}\r\n        >\r\n          {props.name}{\" \"}{selected ? <BsCheckLg/>:<GrFormNextLink/>}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GroupsItem;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./sidebar.css\";\r\nimport GroupsItem from \"./groupsItem\";\r\nimport Groupform from \"./groupform\";\r\nimport data from \"./fakedatagroups\";\r\nimport {getGrupos, getGruposCluster} from \"../../services/gruposUtils.js\";\r\n\r\nconst SidebarContent = (props) => {\r\n  const [grupoClicked, setgrupoClicked] = useState({nombre:\"\"});\r\n  const [grupos,setGrupos] = useState({grupos:[],grupos_cluster:[]});\r\n\r\n  useEffect(() => {\r\n    getGrupos().then((res) => {\r\n      setGrupos(s => ({...s, grupos: res}));\r\n    });\r\n    getGruposCluster().then((res) => {\r\n      setGrupos(s => ({...s, grupos_cluster: res}));\r\n    });\r\n  }, []);\r\n\r\n  const removeFromOriginalList = (id,name,tipo) => {\r\n    if(tipo===\"manual\"){\r\n      let newArr = Object.assign([],grupos.grupos);\r\n      newArr = newArr.filter((d)=>(d.id !== id && d.nombre !== name));\r\n      setGrupos(s => ({...s, grupos: newArr}));\r\n    }\r\n    else if(tipo===\"cluster\"){\r\n      let newArr = Object.assign([],grupos.grupos_cluster);\r\n      newArr = newArr.filter((d)=>(d.id !== id && d.nombre !== name));\r\n      setGrupos(s => ({...s, grupos_cluster: newArr}));\r\n    }\r\n  };\r\n\r\n  const handleClick = (grupo) => {\r\n    if(grupoClicked.nombre === grupo.nombre || grupo.nombre===\"\" ){\r\n      setgrupoClicked({nombre:\"\"});\r\n      props.selectItem((s)=>({nombre:\"\"}));\r\n    }\r\n    else{\r\n      setgrupoClicked(grupo);\r\n      props.selectItem((s)=>(grupo));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mx-1 my-2 sidebarwidth card\">\r\n      <div className=\"card-body\">\r\n        <div className=\"row my-2 \">\r\n          <h3 className=\"col-8\">Grupos</h3>\r\n        </div>\r\n        <div className=\"grouplist \">\r\n          <p className=\"subtitleSidebar\">Grupos creados manualmente</p>\r\n          {grupos.grupos.map((grupo) => {\r\n            return (\r\n              <GroupsItem\r\n                groupsCluster={props.groupsCluster}\r\n                setGroupsCluster={props.setGroupsCluster}\r\n                name={grupo.nombre}\r\n                id={grupo.id}\r\n                key={grupo.nombre}\r\n                handleClick={handleClick}\r\n                grupoClicked={grupoClicked}\r\n                groupInfo={grupo}\r\n                deleted={props.deleted}\r\n                handleShow={props.handleShow}\r\n                tipo={\"manual\"}\r\n                eliminarFunc={removeFromOriginalList}\r\n              />\r\n            );\r\n          })}\r\n          <p className=\"subtitleSidebar\">Grupos creados con clusters</p>\r\n          {grupos.grupos_cluster.map((grupo) => {\r\n            return (\r\n              <GroupsItem\r\n                groupsCluster={props.groupsCluster}\r\n                setGroupsCluster={props.setGroupsCluster}\r\n                name={grupo.nombre}\r\n                handleShow={props.handleShow}\r\n                handleClick={handleClick}\r\n                grupoClicked={grupoClicked}\r\n                id={grupo.id}\r\n                deleted={props.deleted}\r\n                tipo={\"cluster\"}\r\n                key={grupo.nombre}\r\n                groupInfo={grupo}\r\n                eliminarFunc={removeFromOriginalList}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n        <hr />\r\n        <Groupform />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SidebarContent;\r\n","import React from \"react\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport Select from \"react-select\";\r\nimport {Row, Col, Form} from 'react-bootstrap';\r\nimport RangeSlider from \"../tree/RangeSlider.js\";\r\nimport Slider, { createSliderWithTooltip } from 'rc-slider';\r\n\r\n\r\nconst ConditionPanelCrearGrupo = (props) => {\r\n\r\n    const Range = createSliderWithTooltip(Slider.Range);\r\n\r\n    const transformToSelect = (x) =>{\r\n        return { value: x, label: x };\r\n    };\r\n\r\n    useEffect(() => {\r\n    }, [props.data]);\r\n\r\n    const getSelect = (listaCondiciones, seleccionado) => {\r\n        return (\r\n          <Select\r\n            isMulti={true}\r\n            isDisabled={true}\r\n            className=\"select-optional\"\r\n            isClearable={true}\r\n            aria-labelledby=\"aria-label\"\r\n            inputId=\"aria-example-input\"\r\n            name=\"aria-live-color\"\r\n            defaultValue={seleccionado}\r\n            options={listaCondiciones}\r\n            />\r\n        );\r\n    };\r\n\r\n\r\n    const getSliders = (limiteinf, limitesup, igual, nombre) => {\r\n        let nombre_final = nombre;\r\n        let etapa_final = \"\";\r\n        if(props.data_real){\r\n            let lissta = props.data_real.filter((d)=>(d.nombre_real === nombre));\r\n            if(lissta[0]){\r\n                nombre_final = lissta[0].nombre_general;\r\n                etapa_final = lissta[0].evento?lissta[0].evento:lissta[0].etapa;\r\n            }\r\n        }\r\n        if(igual || (limitesup && limiteinf)){\r\n            return (\r\n                <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalUnidad\">\r\n                    <Form.Label column sm={5}>\r\n                        <p className=\"bigtext\">{nombre_final}</p>\r\n                        <p className=\"smalltext\">{etapa_final}</p>\r\n                    </Form.Label>\r\n                    <Col sm={7}>\r\n                        <Row>\r\n                            <Range allowCross={false}\r\n                            value={[igual?igual:limiteinf, igual?igual:limitesup]}\r\n                            min={igual?igual-100:limitesup-100}\r\n                            max={igual?igual+50:limitesup+50}\r\n                            disabled={false}\r\n                            step={5}\r\n                            onChange={()=>{}}\r\n                            onAfterChange={value => {}}\r\n                            />\r\n                        </Row>\r\n                        <Row>\r\n                            <div>\r\n                                <div className=\"left\">\r\n                                    <div className=\"fases\">\r\n                                        <p className=\"margin-right\">Min:</p>\r\n                                        <Form.Control\r\n                                        type=\"number\"\r\n                                        name=\"min\"\r\n                                        size=\"sm\"\r\n                                        value={igual?igual:limiteinf}\r\n                                        className=\"size-small\"\r\n                                        width=\"50px\"\r\n                                        onChange={() => {}}/>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"right\">\r\n                                    <div className=\"fases\">\r\n                                        <p className=\"margin-right\">Max:</p>\r\n                                            <Form.Control\r\n                                            type=\"number\"\r\n                                            value={igual?igual:limitesup}\r\n                                            name=\"max\"\r\n                                            size=\"sm\"\r\n                                            width=\"50px\"\r\n                                            className=\"right size-small\"\r\n                                            onChange={(x,i) => {}}/>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Row>\r\n                    </Col>\r\n                </Form.Group>);\r\n        }\r\n        else{\r\n            return (<div className=\"fases\">\r\n                    <Form.Control disabled type=\"text\" placeholder=\"N/A\" />\r\n                </div>);\r\n        }\r\n    };\r\n\r\n    const getInputText = (nombre,valor) => {\r\n        if(valor === null || valor === undefined) valor = \"N/A\";\r\n        let p = valor.toString().split(\"|\");\r\n        let sigs = [];\r\n        let lissta = [];\r\n        let nombre_final = nombre;\r\n        let etapa_final = \"\";\r\n        if(props.data_real){\r\n            lissta = props.data_real.filter((d)=>(d.nombre_real === nombre));\r\n            if(lissta[0]){\r\n                sigs = lissta[0].significados;\r\n                nombre_final = lissta[0].nombre_general;\r\n                etapa_final = lissta[0].evento?lissta[0].evento:lissta[0].etapa;\r\n            }\r\n        }\r\n        p = p.map((x)=>{\r\n            let found = sigs.filter((d)=>(parseInt(d.valor_db) === parseInt(x)))[0];\r\n            if(found){\r\n                return found.valor_traducido;\r\n            }\r\n            else return x;\r\n        });\r\n\r\n        /**\r\n        if(props.significados){\r\n            p = p.map((x)=>{\r\n                let found = props.significados.filter((d)=>(parseInt(d.valor_db) === parseInt(x)))[0];\r\n                if(found){\r\n                    return found.valor_traducido;\r\n                }\r\n                else return x;\r\n            });\r\n        }*/\r\n        let p2 = p.map(x =>transformToSelect(x));\r\n        return (\r\n        <Form>\r\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalUnidad\">\r\n                <Form.Label column sm={5}>\r\n                    <p className=\"bigtext\">{nombre_final}</p>\r\n                    <p className=\"smalltext\">{etapa_final}</p>\r\n                </Form.Label>\r\n                <Col sm={6}>\r\n                    {getSelect(p2,p2)}\r\n                </Col>\r\n            </Form.Group>\r\n        </Form>\r\n        );\r\n    };\r\n\r\n    return(\r\n        <div>\r\n            <h5>{props.data? props.data.length > 0? \"Condiciones\": \"\": \"\"}</h5>\r\n            {props.data.map(c => {return <div>\r\n                {c.tipo === 1?\r\n                <div>\r\n                    <Form>\r\n                        {getSliders(c.limiteinf,c.limitesup,c.igual,c.variable)}\r\n                    </Form>\r\n                </div>:null}\r\n                {c.tipo === 2?getInputText(c.variable,c.igual):null}\r\n            </div>})}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ConditionPanelCrearGrupo;","import {Modal, Button, Container, Row, Col, Form} from 'react-bootstrap';\r\nimport React, { useState } from \"react\";\r\nimport {createGroup} from \"../../services/gruposUtils.js\";\r\nimport ConditionPanelCrearGrupo from \"../tree/ConditionPanelCrearGrupo.js\";\r\nimport { Formik } from \"formik\";\r\n\r\n\r\nconst CreateGroupTree = (props) => {\r\n\r\n    const handleClose = () => props.setShow(s=> ({...s,show:false}));\r\n\r\n    const handleSubmit = (values) => {\r\n      let request = {\r\n                nombregrupo: values.nombre,\r\n                variables: props.data,\r\n                datasource: props.datasource\r\n              };\r\n      createGroup(request).then((res)=>{\r\n        console.log(\"SUBMIT\", res);\r\n        handleClose();\r\n      });\r\n    };\r\n\r\n    return (\r\n        <>    \r\n          <Modal show={props.show} onHide={handleClose} size=\"lg\">\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>Agregar grupo</Modal.Title>\r\n            </Modal.Header>\r\n            <Formik\r\n                onSubmit={handleSubmit}\r\n                initialValues={{\r\n                nombre: \"\",\r\n                }}\r\n            >\r\n            {({ handleSubmit, handleChange, values, errors }) => (\r\n            <Form noValidate onSubmit={handleSubmit}>\r\n              <Modal.Body className=\"show-grid\">\r\n                <Container>\r\n                  <Row>\r\n                    <Col md={7}>\r\n                      <Row>\r\n                        <h5>Información del grupo:</h5>\r\n                        <p>Conteo: {props.estadisticas.conteo}</p>\r\n                        <p>Porcentaje: {parseFloat(props.estadisticas.percentage).toFixed(2)}%</p>\r\n                      </Row>\r\n                      <Row>\r\n                        <ConditionPanelCrearGrupo data_real={props.data_real} data={props.data} significados={props.significados}/> \r\n                      </Row>\r\n                    </Col>\r\n                    <Col md={5}>\r\n                      <Form.Group as={Row} className=\"mb-3\" controlId=\"formGridState\">\r\n                        <Form.Label>Nombre del grupo</Form.Label>\r\n                        <Form.Control\r\n                        required\r\n                        type=\"text\"\r\n                        name=\"nombre\"\r\n                        value={values.nombre}\r\n                        onChange={handleChange}\r\n                        placeholder=\"nombre del grupo\"\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                  </Row>\r\n                </Container>\r\n              </Modal.Body>\r\n              <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={handleClose}>\r\n                  Cancelar\r\n                </Button>\r\n                <Button variant=\"primary\" type=\"submit\">\r\n                  Guardar grupo\r\n                </Button>\r\n              </Modal.Footer>\r\n            </Form>\r\n            )}\r\n            </Formik>\r\n          </Modal>\r\n        </>\r\n      );\r\n};\r\n\r\nexport default CreateGroupTree;","import {Modal, Button, Form, Row, Col, Alert} from 'react-bootstrap';\r\nimport React, { useState, useEffect } from \"react\";\r\nimport RangeSlider from \"../tree/RangeSlider.js\";\r\nimport Select from \"react-select\";\r\nimport { FcTreeStructure } from 'react-icons/fc';\r\nimport { Formik, Field, ErrorMessage, FieldArray } from \"formik\";\r\nimport * as Yup from 'yup';\r\nimport Slider, { createSliderWithTooltip } from 'rc-slider';\r\n\r\n\r\nconst FaseSettingsModal = (props) => {\r\n\r\n    const Range = createSliderWithTooltip(Slider.Range);\r\n\r\n      const [listaOpciones, setListaOpciones] = useState([]);\r\n\r\n      const transformToSelect = (x) =>{\r\n          return { value: x.valor_db , label: x.valor_traducido };\r\n      };\r\n\r\n      const transformToSelect2 = (x) =>{\r\n        return { value: x, label: x };\r\n    };\r\n\r\n      const changeSelect = (i,x) => {\r\n        let info = (x.name).toString().split(\"|\");\r\n        let index = parseInt(info[0]);\r\n        let key = info[1]\r\n        let newArr = Object.assign([],props.fase.estructura_grupo);\r\n        if(key === \"igual\"){\r\n          newArr[index].igual = i.map(y => {return (y.value).toString()}).join(\"|\");\r\n          newArr[index].limiteinf = null;\r\n          newArr[index].limitesup = null;\r\n        }\r\n        changeEstructuraGrupo(newArr);\r\n      };\r\n\r\n      const changeTipoDivision = (value) =>{\r\n        let newArr = Object.assign([],props.fases);\r\n        for(let i=0; i<newArr.length; i++){\r\n          if(newArr[i].fase === props.fase.fase){\r\n            newArr[i].tipodivision = value;\r\n            break;\r\n          }\r\n        }\r\n        props.setFases(newArr);\r\n      };\r\n\r\n      const handleButtonClick = (values) =>{\r\n        let newArr = Object.assign([],props.fases);\r\n        for(let i=0; i<newArr.length; i++){\r\n          if(newArr[i].fase === props.fase.fase){\r\n            if(newArr[i].limiteinf === newArr[i].limitesup){\r\n              newArr[i].igual = newArr[i].limiteinf;\r\n              newArr[i].limiteinf = null;\r\n              newArr[i].limitesup = null;\r\n            }\r\n            if(props.fase.tipodivision !== \"default\"){\r\n              newArr[i].tipodivision=props.fase.tipodivision;\r\n              newArr[i].estructura_grupo=props.fase.estructura_grupo;\r\n            }\r\n            newArr[i].bins = props.fase.bins;\r\n          }\r\n        }\r\n        props.setFases(newArr);\r\n        props.buildArbol(props.fase.fase);\r\n        props.setShow(s=> ({...s,show:false}));\r\n      };\r\n\r\n      const changeRange = (x,i) => {\r\n        let newArr = Object.assign([],props.fase.estructura_grupo);\r\n        newArr[i].limiteinf = x[0];\r\n        newArr[i].limitesup = x[1];\r\n        changeEstructuraGrupo(newArr);\r\n      };\r\n\r\n\r\n      useEffect(() => {\r\n          //aquí se busca la lista de opciones de la variable escogida, se devuelve error si no se ha escogido la variable\r\n          let newArr = Object.assign([],props.fase.estructura_grupo);\r\n          let ltemp =  props.fase.tipo === 2 ? props.fase.significados: [];\r\n          let chosen = ltemp.length > 0 ? []: null;\r\n          let limit = props.fase.bins;\r\n          let resta = parseInt(limit) - newArr.length; //si es positivo hay que agregar items al array, en caso contrario, se quitan\r\n          if(resta>0){\r\n            for(let i=0; i<resta; i++){\r\n            let obj = {\r\n              numerogrupo: (newArr.length+1),\r\n              limitesup: props.fase.max,\r\n              limiteinf: props.fase.min,\r\n              igual: chosen\r\n             };\r\n            newArr.push(obj);\r\n            }\r\n          }\r\n          else if (resta <0){\r\n            newArr = newArr.splice(0, props.fase.bins);\r\n          }\r\n          changeEstructuraGrupo(newArr);\r\n          setListaOpciones(ltemp.map(x=>transformToSelect(x)));\r\n      }, [props.fase,props.fase.bins]);\r\n      \r\n\r\n    useEffect(()=>{\r\n    },[props.fases]);\r\n\r\n    const changeEstructuraGrupo = (value) => {\r\n      let newArr = Object.assign([],props.fases);\r\n        for(let i=0; i<newArr.length; i++){\r\n          if(newArr[i].fase === props.fase.fase){\r\n            newArr[i].estructura_grupo= value;\r\n            break;\r\n          }\r\n        }\r\n      props.setFases(newArr);\r\n    };\r\n\r\n    const handleSubmit = (values,i,o) => {};\r\n\r\n    const changeBins = (value) => {\r\n      let newArr = Object.assign([],props.fases);\r\n        for(let i=0; i<newArr.length; i++){\r\n          if(newArr[i].fase === props.fase.fase){\r\n            newArr[i].bins= parseInt(value);\r\n            break;\r\n          }\r\n        }\r\n      props.setFases(newArr);\r\n    };\r\n    /**\r\n    const schema = Yup.object().shape({\r\n      numero_bins: Yup.number().min(2), // mayor o igual que 2, menor que 10\r\n      tipodivision: Yup.boolean().required(),//solo default o la otra\r\n      estructura_grupos: Yup.array().of(\r\n        Yup.object().shape({\r\n          numerogrupo:Yup.string(),//requerido\r\n          limitesup: Yup.number(),//mayor o igual que limiteinf, puede ser nulo\r\n          limiteinf: Yup.number().when(\"limitesup\", {\r\n            is: (x) =>{x < 8},\r\n            then: Yup.number().required(\"Debe ingresar un máximo mayor que el mínimo\")\r\n          }),//menor o igual que limitesup, puede ser nulo\r\n          igual: Yup.string(),//debe ser una lista de valores\r\n        })\r\n      )}\r\n    );\r\n     */\r\n\r\n    const handleClose = () => props.setShow((s)=> ({...s,show:false}));\r\n\r\n    return (\r\n        <>\r\n          <Modal show={props.show} onHide={handleClose} size=\"lg\">\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>Editar nivel</Modal.Title>\r\n            </Modal.Header>\r\n            <Formik\r\n                onSubmit={handleSubmit}\r\n                initialValues={{\r\n                numero_bins: 2,\r\n                estructura_grupos: [],\r\n                }}\r\n              >\r\n              {({ handleSubmit, handleChange, values, errors, setFieldValue }) => (\r\n                <Form noValidate onSubmit={handleSubmit}>\r\n                  <Modal.Body>\r\n                      <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontal\">\r\n                          <Form.Label column sm={4}>\r\n                            ¿cómo desea manejar las divisiones?\r\n                          </Form.Label>\r\n                          <Col sm={8}>\r\n                            <Form.Check\r\n                            type=\"radio\"\r\n                            label=\"Por defecto\"\r\n                            name=\"tipodivision\"\r\n                            id=\"formHorizontalRadios1\"\r\n                            defaultChecked ={props.fase.tipodivision ===\"default\"}\r\n                            defaultValue={props.fase.tipodivision ===\"default\"}\r\n                            value={props.fase.tipodivision ===\"default\"}\r\n                            onChange={(d)=>{\r\n                              if(d.target.checked===true){\r\n                                changeTipoDivision(\"default\");\r\n                              }\r\n                            }}\r\n                            />\r\n                            <Form.Check\r\n                            type=\"radio\"\r\n                            label=\"Especificar los rangos\"\r\n                            name=\"tipodivision\"\r\n                            defaultChecked ={props.fase.tipodivision !== \"default\"}\r\n                            defaultValue={props.fase.tipodivision !==\"default\"}\r\n                            id=\"formHorizontalRadios2\"\r\n                            value={props.fase.tipodivision !== \"default\"}\r\n                            onChange={(d)=>{\r\n                              if(d.target.checked===true){\r\n                                changeTipoDivision(\"nodefault\");\r\n                              }\r\n                            }}\r\n                            />\r\n                          </Col>\r\n                      </Form.Group>\r\n                      <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontal\">\r\n                          <Form.Label column sm={4}>\r\n                            Número de divisiones\r\n                          </Form.Label>\r\n                          <Col sm={8}>\r\n                            <Form.Control\r\n                            type=\"number\"\r\n                            name=\"numero_bins\"\r\n                            placeholder={2}\r\n                            defaultValue={props.fase.bins}\r\n                            onKeyPress={(event) => {\r\n                              if (event.key === \"Enter\") {\r\n                                changeBins(event.target.value);\r\n                              }\r\n                            }}\r\n                            />\r\n                          </Col>\r\n                      </Form.Group>\r\n                      <Form.Group>\r\n                        {props.fase.tipodivision !== \"default\"?\r\n                          <div>\r\n                          {props.fase.tipo === 2?\r\n                          props.fase.estructura_grupo.map((x,index)=>{\r\n                              return (<Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontal\" key={index}>\r\n                                  <Form.Label column sm={4}>\r\n                                      grupo {x.numerogrupo}\r\n                                  </Form.Label>\r\n                                  <Col sm={8}>\r\n                                      <Select\r\n                                      isMulti={true}\r\n                                      name={`${index}|igual`}\r\n                                      onChange={changeSelect}\r\n                                      defaultValue={x.igual? x.igual\r\n                                        .toString()\r\n                                        .split(\"|\")\r\n                                        .map(\r\n                                          y=>{\r\n                                            let foo = props.fase.significados.filter((d)=>(d.valor_db.toString() === y))[0];\r\n                                            return foo? transformToSelect(foo):\"\";\r\n                                          \r\n                                          }):[]}\r\n                                      className=\"select-optional\"\r\n                                      isClearable={true}\r\n                                      aria-labelledby=\"aria-label\"\r\n                                      inputId=\"aria-example-input\"\r\n                                      options={props.fase.significados.map(x=>transformToSelect(x))}\r\n                                      />\r\n                                  </Col>\r\n                              </Form.Group>)\r\n                          }):null}\r\n                          {props.fase.tipo === 1? props.fase.estructura_grupo.map((x,index)=>{\r\n                              return (\r\n                              <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontal\" key={index}>\r\n                                <Form.Label column sm={4}>\r\n                                  grupo {x.numerogrupo}\r\n                                </Form.Label>\r\n                                <Col sm={7}>\r\n                                  <Row>\r\n                                    <Range\r\n                                    allowCross={false}\r\n                                    defaultValue={[x.limiteinf, x.limitesup]}\r\n                                    min={props.fase.min}\r\n                                    max={props.fase.max}\r\n                                    disabled={false}\r\n                                    step={5}\r\n                                    onChange={()=>{}}\r\n                                    onAfterChange={value => {changeRange(value,index)}}\r\n                                    />\r\n                                  </Row>\r\n                                  <Row>\r\n                                    <div>\r\n                                      <div className=\"left\">\r\n                                      <div className=\"fases\">\r\n                                        <p className=\"margin-right\">Min:</p>\r\n                                        <Form.Control\r\n                                        type=\"number\"\r\n                                        name=\"min\"\r\n                                        size=\"sm\"\r\n                                        value={x.limiteinf}\r\n                                        className=\"size-small\"\r\n                                        width=\"50px\"\r\n                                        onChange={() => {}}/>\r\n                                      </div>\r\n                                      </div>\r\n                                      <div className=\"right\">\r\n                                        <div className=\"fases\">\r\n                                          <p className=\"margin-right\">Max:</p>\r\n                                          <Form.Control\r\n                                          type=\"number\"\r\n                                          value={x.limitesup}\r\n                                          name=\"max\"\r\n                                          size=\"sm\"\r\n                                          width=\"50px\"\r\n                                          className=\"right size-small\"\r\n                                          onChange={(x,i) => {console.log(\"yo no se\",x,i)}}/>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </Row>\r\n                                </Col>\r\n                              </Form.Group>)\r\n                          }):null}\r\n                          {props.fase.tipo !== 1 && props.fase.tipo !== 2 ? \r\n                          <Alert key={props.fase.variable_real} variant=\"danger\">\r\n                              No ha seleccionado ninguna variable\r\n                          </Alert>:null}\r\n                        </div>:null}\r\n                      </Form.Group>\r\n                  </Modal.Body>\r\n                  <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={handleClose}>\r\n                      Cancelar\r\n                    </Button>\r\n                    <Button variant=\"primary\" type=\"button\"  onClick={() => handleButtonClick(values)}>\r\n                      Editar divisiones\r\n                    </Button>\r\n                  </Modal.Footer>\r\n                </Form>\r\n              )}\r\n              </Formik>\r\n          </Modal>\r\n        </>\r\n  );\r\n};\r\n\r\nexport default FaseSettingsModal;","\r\nclass TreeClass{\r\n    constructor(root) {\r\n        this.root = root;\r\n    };\r\n\r\n    getRoot(){\r\n        return this.root;\r\n    };\r\n\r\n    getTipo(){\r\n        return this.root.tipo_arbol;\r\n    };\r\n\r\n    //encuentra el primer nodo que cumpla la condición\r\n    findChildren(node, condition, action){\r\n        if (condition(node)){\r\n            action(node);\r\n            return node;\r\n        }\r\n        else if(node.children === null) return null;\r\n        else if(node.children.length <= 0) return null;\r\n        else{\r\n            var lista = [];\r\n            for( let c of node.children){\r\n              lista.push(this.findChildren(c, condition, action));\r\n            }\r\n            let v = lista.find(d => d !== null);\r\n            return v;\r\n        }\r\n    }\r\n\r\n    addChildren(node,children){\r\n        console.log(\"addChildren\",node,children);\r\n        this.findChildren(this.root,(d)=>{return d.uid===node.uid} ,(n)=>{\r\n            n.children = children;\r\n        });\r\n    }\r\n\r\n    hideChildren(node){\r\n        this.findChildren(this.root, (d)=>{return d.uid===node.uid}, (n) =>{\r\n            if(n.children){\r\n                n.oculto = true;\r\n                let temp = n.children;\r\n                n._children = temp;\r\n                n.children = null;                \r\n            }\r\n            else{\r\n                n.oculto =false;\r\n                let temp = n._children;\r\n                n.children = temp;\r\n                n._children = null;\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    cleanTree(node){\r\n        if(node === null){\r\n            return;\r\n        }\r\n        else if(node.children === null || node.children.length === 0){\r\n            return;\r\n        }\r\n        else{\r\n            node.children = node.children.filter((d)=>(d.uid !== \"delete\"));\r\n            for(let child of node.children){\r\n                this.cleanTree(child);\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteNode(node){\r\n        this.findChildren(this.root,(d)=>{return d.uid===node.uid},(n)=>{\r\n            n.uid = \"delete\";\r\n        });\r\n        this.cleanTree(this.root);\r\n\r\n    }\r\n\r\n    //devuelve los nodos en un nivel\r\n    getNodesInLevel(fase,node){\r\n        let rta = [];\r\n        if (node.fase === fase){\r\n            rta.push(node);\r\n        }\r\n        if(node.children !== null && node.children !== undefined && node.children.length >0){\r\n            for(let n of node.children){\r\n                let temprta = this.getNodesInLevel(fase,n);\r\n                for(let item of temprta){\r\n                    rta.push(item);\r\n                }\r\n            }\r\n        }\r\n        return rta;\r\n    };\r\n\r\n};\r\n\r\nexport default TreeClass;","import React from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { getBins } from \"../../services/gruposUtils.js\";\r\nimport CreateGroupTree from \"../tree/createGroupTree.js\";\r\nimport FaseSettingsModal from \"../tree/faseSettingsModal.js\";\r\nimport { FcSettings } from 'react-icons/fc';\r\nimport { HiSave } from 'react-icons/hi';\r\nimport { AiOutlineReload } from 'react-icons/ai';\r\nimport Select from \"react-select\";\r\nimport TreeClass from \"./TreeClass.js\";\r\n\r\nfunction Tree(props) {\r\n\r\n  const d3ToPng = require('d3-svg-to-png');\r\n\r\n  const [listaTrees, setListaTrees] = useState({lista:{},flag:{}});\r\n  const [listaTreesC, setListaTreesC] = useState({lista:{},flag:{}});\r\n\r\n  const customStyles = {\r\n    control: (provided, state) => ({\r\n      ...provided,\r\n      background: '#fff',\r\n      borderColor: '#9e9e9e',\r\n      minHeight: '30px',\r\n      height: '30px',\r\n      width: '227px',\r\n      boxShadow: state.isFocused ? null : null,\r\n    }),\r\n\r\n    valueContainer: (provided, state) => ({\r\n      ...provided,\r\n      height: '30px',\r\n      width: '227px',\r\n      padding: '0 6px'\r\n    }),\r\n\r\n    input: (provided, state) => ({\r\n      ...provided,\r\n      margin: '0px',\r\n    }),\r\n    indicatorSeparator: state => ({\r\n      display: 'none',\r\n    }),\r\n    indicatorsContainer: (provided, state) => ({\r\n      ...provided,\r\n      height: '30px',\r\n    }),\r\n  };\r\n\r\n  const customStylesEtapas = {\r\n    control: (provided, state) => ({\r\n      ...provided,\r\n      background: '#fff',\r\n      borderColor: '#9e9e9e',\r\n      minHeight: '30px',\r\n      height: '30px',\r\n      width: '197px',\r\n      boxShadow: state.isFocused ? null : null,\r\n    }),\r\n\r\n    valueContainer: (provided, state) => ({\r\n      ...provided,\r\n      height: '30px',\r\n      width: '197px',\r\n      padding: '0 6px'\r\n    }),\r\n\r\n    input: (provided, state) => ({\r\n      ...provided,\r\n      margin: '0px',\r\n    }),\r\n    indicatorSeparator: state => ({\r\n      display: 'none',\r\n    }),\r\n    indicatorsContainer: (provided, state) => ({\r\n      ...provided,\r\n      height: '30px',\r\n    }),\r\n  };\r\n\r\n  const [fase0, setFase0] = useState({fase:\"fase0\",grupos:[]});\r\n  const [fases, setFases] = useState([\r\n    {fase:\"fase1\", variable_real: null, tipo: null, significados: [], min: 0, max: 10000, variable: null, etapa:null, tipodivision:\"default\", bins:2, estructura_grupo:[], lista_etapas:[]},\r\n    {fase:\"fase2\", variable_real: null, tipo: null, significados: [], min: 0, max: 10000, variable: null, etapa:null, tipodivision:\"default\", bins:2, estructura_grupo:[], lista_etapas:[]},\r\n    {fase:\"fase3\", variable_real: null, tipo: null, significados: [], min: 0, max: 10000, variable: null, etapa:null, tipodivision:\"default\", bins:2, estructura_grupo:[], lista_etapas:[]},\r\n    {fase:\"fase4\", variable_real: null, tipo: null, significados: [], min: 0, max: 10000, variable: null, etapa:null, tipodivision:\"default\", bins:2, estructura_grupo:[], lista_etapas:[]}\r\n  ]);\r\n  \r\n  const [show, setShow] = useState({show:false,data:[],significados:[],datasource:null,estadisticas:{}});\r\n  const [showFaseSettings, setShowFaseSettings] = useState({show:false,fase:{}});\r\n  const canvas = useRef();\r\n  const canvasDownload= useRef();\r\n\r\n  const handleShow = (selectedGroup,significados,datasource,estadisticas) => setShow(s=> ({data:selectedGroup,show:true,significados:significados,datasource:datasource,estadisticas:estadisticas}));\r\n  const handleShowFaseSettingsModal = (pFase) => {setShowFaseSettings({show:true,fase:pFase})};\r\n\r\n  const geteventosTemporales = (fase,etapas) => {\r\n    return (\r\n      <Select\r\n        onChange={(value) => {\r\n          if(value){\r\n            updateFase(\"changeEvent\",fase, null, value.value, null);\r\n          }\r\n        }}\r\n        className=\"select-optional\"\r\n        isClearable={true}\r\n        aria-labelledby=\"aria-label\"\r\n        inputId=\"aria-example-input\"\r\n        name=\"aria-live-color\"\r\n        placeholder=\"etapa/evento\"\r\n        options={etapas}\r\n        styles={customStylesEtapas}\r\n        />\r\n    );\r\n  };\r\n\r\n\r\n  const getVariables = (fase) => {\r\n    return (\r\n      <Select\r\n      onChange={(value) => {\r\n        if(value){\r\n          updateFase(\"changeVar\",fase, value.value, null, null);\r\n        }\r\n      }}\r\n      className=\"select-optional\"\r\n      isClearable={true}\r\n      aria-labelledby=\"aria-label\"\r\n      inputId=\"aria-example-input\"\r\n      name=\"aria-live-color\"\r\n      placeholder=\"Ingresar variable\"\r\n      options={props.variables}\r\n      styles={customStyles}\r\n      />\r\n    );\r\n  };\r\n\r\n  const cleanRequest = (x) => {\r\n    let rta = {\r\n      limiteinf: x.limiteinf ? parseFloat(x.limiteinf):null,\r\n      limitesup: x.limitesup ? parseFloat(x.limitesup):null,\r\n      igual: x.igual,\r\n      variable: x.variable,\r\n      tipo: x.tipo\r\n    };\r\n    return rta;\r\n  };\r\n\r\n  const convertToTree = (x,fase,parent,conditions, meaning,datasource,tipo) => {\r\n    let newArr = conditions ? JSON.parse(JSON.stringify(conditions)) : [];\r\n    newArr.push(cleanRequest(x));\r\n    x.children = [];\r\n    x.fase = fase;\r\n    x.grupo = newArr;\r\n    x.tipo = tipo;\r\n    x.datasource = datasource;\r\n    x.oculto = false;\r\n    x.id = (parent ? parent.id : \"null\")+\"inf\"+(x.limiteinf ? x.limiteinf.toString() : \"null\")+\"sup\"+(x.limitesup ? x.limitesup.toString() : \"null\")+\"igual\"+(x.igual ? x.igual.toString() : \"null\");\r\n    x.uid = Date.now().toString(36) + Math.random().toString(36).substr(2);\r\n    x.color = \"#\"+Math.floor(Math.random()*16777215).toString(16);\r\n    x.traduccion = meaning ? meaning : x.igual;\r\n    return x\r\n  };\r\n  \r\n  const label = (d) => {\r\n    let r=\"\";\r\n    if (d.limiteinf && d.limitesup) r=` [ ${d.limiteinf} , ${d.limitesup} ]`;\r\n    else if (d.limiteinf) r=`${d.variable} > ${d.limiteinf}`;\r\n    else if(d.limitesup) r=`${d.variable} < ${d.limitesup}`;\r\n    else if(d.igual || (d.nombre && d.id)) r=`${d.traduccion}`;\r\n    return r;\r\n  };\r\n\r\n  const getColor = (d) => {\r\n    return d.parent == null ? \"#19c2bf\" : d.parent.data.color;\r\n  }\r\n\r\n  const convertConditionsToRequest = (x,y) => {\r\n    var neww = {\r\n      condiciones_previas:x,\r\n      estructura_grupos:y\r\n    }\r\n    return neww;\r\n  };\r\n\r\n  const downloadSVG = () => {\r\n    d3.selectAll(`.listaTreeDownload`).remove();\r\n    for (let i of Object.keys(listaTrees.lista)){\r\n      let h = d3.hierarchy(listaTrees.lista[i].getRoot(), function(d){return d.children});\r\n      graphDownload(h,`svgD${i}`,i,{\r\n        xScale : props.groupsCluster.length >0? (j) => 267+j*0.5: (j) => 32+j*0.5 ,\r\n        descXScale: props.groupsCluster.length >0? (j) => 235+(235*j-9):(j) => (235*j-9),\r\n        class_name: \"listaTreeDownload\"});\r\n    }\r\n    d3.selectAll(`.listaTreeCDownload`).remove();\r\n    for (let i of Object.keys(listaTreesC.lista)){\r\n      if( props.groupsCluster.filter((d)=>(d.nombre === listaTreesC.lista[i].getRoot().traduccion))[0]){\r\n        let h = d3.hierarchy(listaTreesC.lista[i].getRoot(), function(d){return d.children});\r\n        graphDownload(h,`svgCD${i}`,i,{\r\n          descXScale: props.groupsCluster.length >0? (j) => 235+(235*j-9):(j) => (235*j-9),\r\n          class_name: \"listaTreeCDownload\"\r\n        });\r\n      }\r\n    }\r\n    for (let i of Object.keys(listaTrees.lista)){\r\n      d3ToPng(`#svgD${i}`, `diagrama arbol ${i}`, {\r\n        scale: 1,\r\n        format: 'png',\r\n        quality: 0.92,\r\n        download: true,\r\n        ignore: null,\r\n        width:900,\r\n        cssinline: 1\r\n      }).then(fileData => {\r\n      });\r\n    }\r\n    for (let i of Object.keys(listaTreesC.lista)){\r\n      d3ToPng(`#svgCD${i}`, `diagrama arbol grupo ${i}`, {\r\n        scale: 1,\r\n        format: 'png',\r\n        quality: 0.92,\r\n        download: true,\r\n        ignore: null,\r\n        width:900,\r\n        cssinline: 1\r\n      }).then(fileData => {\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setFase0(s=>({...s,grupos:props.groupsCluster}))\r\n  }, [props.groupsCluster]);\r\n\r\n  useEffect(()=>{\r\n    buildArbol(\"fase0\");\r\n  },[fase0]);\r\n\r\n  const updateFase = (source, pFase, pVariable, pEtapa, bins) => {\r\n    let newArr = Object.assign([],fases);\r\n    for (let i = 0; i< newArr.length; i++){\r\n      if (newArr[i].fase === pFase){\r\n        if(source === \"changeEvent\"){\r\n          if(newArr[i].variable !== null){//ya tiene una variable asignada\r\n            let f = props.data_real.filter(s=> (s.nombre_general === newArr[i].variable && (s.evento === pEtapa || s.etapa === pEtapa)));\r\n            if (f.length > 0){\r\n              newArr[i].variable_real = f[0].nombre_real;\r\n              newArr[i].tipo = f[0].tipo;\r\n              newArr[i].min = f[0].min;\r\n              newArr[i].max = f[0].max;\r\n              newArr[i].significados = f[0].significados;\r\n              setFases(newArr);\r\n              buildArbol(pFase);\r\n              //SI EXISTE SE ACTUALIZA EL ARBOL\r\n            }\r\n            else{//EXCEPCIÓN PORQUE NO EXISTE\r\n              newArr[i].variable_real = null;\r\n              newArr[i].tipo = null;\r\n              newArr[i].min = 0;\r\n              newArr[i].max = 10000;\r\n              newArr[i].significados = [];\r\n              setFases(newArr);\r\n            }\r\n          }\r\n          newArr[i].etapa = pEtapa;\r\n        }\r\n        else if(source === \"changeVar\"){\r\n          let tapas = props.variables_real.filter((d)=>(d.title === pVariable))[0];\r\n          if(newArr[i].etapa !== null){//ya tiene una etapa asignada\r\n            let f = props.data_real.filter(s=> (s.nombre_general === pVariable && (s.evento === newArr[i].etapa || s.etapa === newArr[i].etapa)));\r\n            if (f.length > 0){\r\n              newArr[i].variable_real = f[0].nombre_real;\r\n              newArr[i].tipo = f[0].tipo;\r\n              newArr[i].min = f[0].min;\r\n              newArr[i].max = f[0].max;\r\n              newArr[i].significados = f[0].significados;\r\n              newArr[i].lista_etapas = tapas?tapas.etapa:[];\r\n              setFases(newArr);\r\n              buildArbol(pFase);\r\n              //SI EXISTE SE ACTUALIZA EL ARBOL\r\n            }\r\n            else{\r\n              newArr[i].variable_real = null;\r\n              newArr[i].tipo = null;\r\n              newArr[i].min = 0;\r\n              newArr[i].max = 10000;\r\n              newArr[i].significados = [];\r\n              newArr[i].lista_etapas = tapas?tapas.etapa:[];\r\n              setFases(newArr);\r\n            }\r\n          }\r\n          else{\r\n            newArr[i].lista_etapas = tapas?tapas.etapa:[];\r\n            setFases(newArr);\r\n          }\r\n          newArr[i].variable = pVariable;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const clickMinus = (node,index) => {\r\n    if(node.data.tipo ===1){\r\n      listaTrees.lista[index].hideChildren(node.data);\r\n    }\r\n    else{\r\n      listaTreesC.lista[index].hideChildren(node.data);\r\n    }\r\n    \r\n    redrawTree();\r\n  }\r\n\r\n  const addGroup = (d,i) => {\r\n    let sigs = [];\r\n    if(i.data.tipo !== 2){\r\n      let t = props.data_real.filter((d)=>(d.nombre_real === i.data.variable))[0];\r\n      if(t){\r\n        sigs = t.significado;\r\n      }\r\n    }\r\n    handleShow(i.data.grupo,sigs,i.data.datasource,{conteo:i.data.conteo, percentage:i.data.percentage});\r\n  }\r\n\r\n  const clickCancel = (node,index) => {\r\n    if(node.data.tipo ===1){\r\n      listaTrees.lista[index].deleteNode(node.data);\r\n    }\r\n    else{\r\n      listaTreesC.lista[index].deleteNode(node.data);\r\n    }\r\n    redrawTree();\r\n  };\r\n\r\n  function graphDownload(rot,svgid,index,{\r\n    highlight = () => false,\r\n    marginLeft = 40,\r\n    width= 900,\r\n    xScale = (j) => 32+j*0.5,\r\n    yScale = (j) => j*0.7,\r\n    descXScale = (j) => (235*j-9),\r\n    class_name= \"\"\r\n  } = {}) {\r\n\r\n    let depthScale = 470; //fase 3: 350, fase 3:\r\n    let dx=100;\r\n    let dy=25;\r\n    let treeLink = d3.linkHorizontal().x(d => (xScale(d.y))).y(d => (yScale(d.x)));\r\n    let tre = d3.tree().nodeSize([dx,dy]);\r\n    rot = tre(rot);\r\n\r\n    rot.each(function(d) { d.y = d.depth * depthScale; });\r\n\r\n    let x0 = Infinity;\r\n    let x1 = -x0;\r\n    rot.each(d => {\r\n      if (d.x > x1) x1 = d.x;\r\n      if (d.x < x0) x0 = d.x;\r\n    });\r\n\r\n    const svg = d3.select(canvasDownload.current)\r\n        .append(\"svg\")\r\n        .attr(\"viewBox\", [0, 0, width, (x1 - x0 + dx * 2)])\r\n        .attr(\"id\",svgid)\r\n        .attr(\"class\",class_name)\r\n        .style(\"overflow\", \"visible\");\r\n\r\n    const g = svg.append(\"g\")\r\n        .attr(\"font-family\", \"sans-serif\")\r\n        .attr(\"font-size\", 10)\r\n        .attr(\"transform\", `translate(${marginLeft},${dx - x0})`);\r\n\r\n    g.append(\"g\")\r\n    .attr(\"fill\",\"none\")\r\n    .selectAll(\"g\")\r\n    .data(fases.filter((d)=> (d.variable_real!=null)))\r\n    .join(enter =>{\r\n      let desc = enter\r\n        .append(\"g\");\r\n      desc.append(\"rect\")\r\n      .attr(\"width\", 227)\r\n      .attr(\"height\",1)\r\n      .attr(\"y\",x0-15)\r\n      .attr(\"fill\",\"black\")\r\n      .attr(\"x\",(d,i)=>descXScale(i));\r\n      desc.append(\"text\")\r\n      .attr(\"fill\",\"black\")\r\n      .attr(\"y\",x0-30)\r\n      .attr(\"x\",(d,i)=>descXScale(i))\r\n      .attr(\"text-anchor\", \"start\")\r\n      .style(\"font-weight\",700)\r\n      .text(d =>d.variable);\r\n      desc.append(\"text\")\r\n      .attr(\"fill\",\"black\")\r\n      .attr(\"y\",x0-19)\r\n      .attr(\"x\",(d,i)=>descXScale(i))\r\n      .attr(\"text-anchor\", \"start\")\r\n      .text(d => d.etapa);\r\n      return desc;\r\n    });\r\n      \r\n    const link = g.append(\"g\")\r\n      .attr(\"fill\", \"none\")\r\n      .attr(\"stroke\", \"#555\")\r\n      .attr(\"stroke-opacity\", 0.4)\r\n      .attr(\"stroke-width\", 1.5)\r\n      .selectAll(\"path\")\r\n      .data(rot.links())\r\n      .join(\"path\")\r\n        .attr(\"stroke\", d => highlight(d.source) && highlight(d.target) ? \"red\" : null)\r\n        .attr(\"stroke-opacity\", d => highlight(d.source) && highlight(d.target) ? 1 : null)\r\n        .attr(\"d\", treeLink);\r\n    \r\n    const node = g.append(\"g\")\r\n      .attr(\"stroke-linejoin\", \"round\")\r\n      .attr(\"stroke-width\", 3)\r\n      .selectAll(\"g\")\r\n      .data(rot.descendants())\r\n      .join(enter => {\r\n              var nodeEnter = enter\r\n              .append(\"g\")\r\n              .attr(\"class\", \"node\");\r\n              nodeEnter.append(\"rect\")\r\n              .attr(\"width\", 100)\r\n              .attr(\"height\",25)\r\n              .attr('class', 'rect0')\r\n              nodeEnter.append(\"rect\")\r\n              .attr(\"width\", d => d.data.percentage)\r\n              .attr(\"height\",25)\r\n              .attr('class', 'rect')\r\n              .attr(\"fill\",d => getColor(d));\r\n              nodeEnter.append(\"rect\")\r\n              .attr(\"width\", 100)\r\n              .attr(\"height\",25)\r\n              .attr('class', 'rect2')\r\n              .on(\"click\",(d,i)=>addGroup(d,i));\r\n              nodeEnter.append(\"text\")\r\n              .attr(\"x\", d => d.children ? 0:102)\r\n              .attr(\"font-weight\", 700)\r\n              .attr(\"y\",d => d.children ?-7:22)\r\n              .text(d => `(${parseFloat(d.data.percentage).toFixed(2)}%)`);\r\n              nodeEnter.append(\"text\")\r\n              .attr(\"fill\", d => highlight(d) ? \"red\" : null)\r\n              .attr(\"y\", d => d.children ? -19:10)\r\n              .attr(\"x\", d => d.children ? 0 : 102)\r\n              .attr(\"text-anchor\", d => d.children ? \"center\" : \"start\")\r\n              .text(d => label(d.data));\r\n              return nodeEnter;\r\n      })\r\n        .attr(\"transform\", d => `translate(${xScale(d.y)-40},${yScale(d.x)-12})`);\r\n\r\n    return svg.node();\r\n  }\r\n\r\n  function graph(rot,svgid,index,{\r\n    highlight = () => false,\r\n    marginLeft = 40,\r\n    width= 900,\r\n    xScale = (j) => 32+j*0.5,\r\n    yScale = (j) => j*0.7,\r\n    class_name= \"\"\r\n  } = {}) {\r\n\r\n    let depthScale = 470; //fase 3: 350, fase 3:\r\n    let dx=100;\r\n    let dy=25;\r\n    let treeLink = d3.linkHorizontal().x(d => (xScale(d.y))).y(d => (yScale(d.x)));\r\n    let tre = d3.tree().nodeSize([dx,dy]);\r\n    rot = tre(rot);\r\n\r\n    rot.each(function(d) { d.y = d.depth * depthScale; });\r\n\r\n    let x0 = Infinity;\r\n    let x1 = -x0;\r\n    rot.each(d => {\r\n      if (d.x > x1) x1 = d.x;\r\n      if (d.x < x0) x0 = d.x;\r\n    });\r\n\r\n    const svg = d3.select(canvas.current)\r\n        .append(\"svg\")\r\n        .attr(\"viewBox\", [0, 0, width, (x1 - x0 + dx * 2)])\r\n        .attr(\"id\",svgid)\r\n        .attr(\"class\",class_name)\r\n        .style(\"overflow\", \"visible\");\r\n\r\n    const g = svg.append(\"g\")\r\n        .attr(\"font-family\", \"sans-serif\")\r\n        .attr(\"font-size\", 10)\r\n        .attr(\"transform\", `translate(${marginLeft},${dx - x0})`);\r\n      \r\n    const link = g.append(\"g\")\r\n      .attr(\"fill\", \"none\")\r\n      .attr(\"stroke\", \"#555\")\r\n      .attr(\"stroke-opacity\", 0.4)\r\n      .attr(\"stroke-width\", 1.5)\r\n      .selectAll(\"path\")\r\n      .data(rot.links())\r\n      .join(\"path\")\r\n        .attr(\"stroke\", d => highlight(d.source) && highlight(d.target) ? \"red\" : null)\r\n        .attr(\"stroke-opacity\", d => highlight(d.source) && highlight(d.target) ? 1 : null)\r\n        .attr(\"d\", treeLink);\r\n    \r\n    const node = g.append(\"g\")\r\n      .attr(\"stroke-linejoin\", \"round\")\r\n      .attr(\"stroke-width\", 3)\r\n      .selectAll(\"g\")\r\n      .data(rot.descendants())\r\n      .join(enter => {\r\n              var nodeEnter = enter\r\n              .append(\"g\")\r\n              .attr(\"class\", \"node\");\r\n              nodeEnter.append(\"rect\")\r\n              .attr(\"width\", 100)\r\n              .attr(\"height\",25)\r\n              .attr('class', 'rect0');\r\n              nodeEnter.append(\"rect\")\r\n              .attr(\"width\", d => d.data.percentage)\r\n              .attr(\"height\",25)\r\n              .attr('class', 'rect')\r\n              .attr(\"fill\",d => getColor(d));\r\n              nodeEnter.append(\"rect\")\r\n              .attr(\"width\", 100)\r\n              .attr(\"height\",25)\r\n              .attr('class', 'rect2')\r\n              .on(\"click\",(d,i)=>addGroup(d,i));\r\n              nodeEnter.append(\"text\")\r\n              .attr(\"x\", d => d.children ? 0:106)\r\n              .attr(\"font-weight\", 700)\r\n              .attr(\"y\",d => d.children ?-7:22)\r\n              .text(d => `(${parseFloat(d.data.percentage).toFixed(2)}%)`);\r\n              nodeEnter.append(\"text\")\r\n              .attr(\"fill\", d => highlight(d) ? \"red\" : null)\r\n              .attr(\"y\", d => d.children ? -19:10)\r\n              .attr(\"x\", d => d.children ? 0 : 106)\r\n              .attr(\"text-anchor\", d => d.children ? \"center\" : \"start\")\r\n              .text(d => label(d.data));\r\n              nodeEnter.append(\"circle\")\r\n              .attr(\"r\",(d)=> d.parent? 8:0)\r\n              .attr(\"fill\",\"gray\")\r\n              .attr(\"cx\",(d)=> d.parent? 98:0)\r\n              .attr(\"id\", (d,i) => {return \"a\"+parseInt(d.x).toString()+parseInt(d.y).toString();})\r\n              .on(\"mouseover\", (event, [a]) => {nodeEnter.select(\"#a\"+parseInt(a.x).toString()+parseInt(a.y).toString()).style(\"fill\",\"red\");})\r\n              .on(\"mouseout\",  (event, [a]) => {nodeEnter.select(\"#a\"+parseInt(a.x).toString()+parseInt(a.y).toString()).style(\"fill\",\"gray\");})\r\n              .on(\"click\", (d,i) => clickCancel(i,index));\r\n              nodeEnter.append(\"image\")\r\n              .attr(\"xlink:href\",(d)=> d.parent? \"https://www.svgrepo.com/show/104330/cancel.svg\":null)\r\n              .attr(\"width\", (d)=> d.parent? 8: 0)\r\n              .attr(\"height\", (d)=> d.parent? 8:0)\r\n              .attr(\"x\",(d)=> d.parent? 94:0)\r\n              .attr(\"y\",(d)=> d.parent? -4:0)\r\n              .attr(\"color\",\"white\");\r\n              let nodeMinus = nodeEnter.append(\"circle\")\r\n              .attr(\"r\", 8)\r\n              .style(\"fill\",d => d.data.oculto?\"blue\":\"lightgray\")\r\n              .attr(\"cx\", (d)=> d.parent? 82: 98)\r\n              .attr(\"id\", (d,i) => {return \"b\"+parseInt(d.x).toString()+parseInt(d.y).toString();})\r\n              .on(\"mouseover\", (event, [a]) => {\r\n                if(a.data.oculto === false)nodeEnter.select(\"#b\"+parseInt(a.x).toString()+parseInt(a.y).toString()).style(\"fill\",\"blue\");\r\n              })\r\n              .on(\"mouseout\",  (event, [a]) => {\r\n                if(a.data.oculto === false)nodeEnter.select(\"#b\"+parseInt(a.x).toString()+parseInt(a.y).toString()).style(\"fill\",\"lightgray\");\r\n              })\r\n              .on(\"click\", (d,i) => clickMinus(i,index));\r\n              nodeEnter.append(\"image\")\r\n              .attr(\"xlink:href\",\"https://www.svgrepo.com/show/376008/dash.svg\")\r\n              .attr(\"width\", 10)\r\n              .attr(\"height\", 10)\r\n              .attr(\"x\",(d)=> d.parent? 77:93)\r\n              .attr(\"y\",-5)\r\n              .attr(\"color\",\"white\");\r\n              nodeEnter.append(\"title\")\r\n              .text(d => `${parseFloat(d.data.percentage).toFixed(2)}%\\nConteo: ${parseFloat(d.data.conteo)}`);\r\n              return nodeEnter;\r\n      })\r\n        .attr(\"transform\", d => `translate(${xScale(d.y)-40},${yScale(d.x)-12})`);\r\n    return svg.node();\r\n  }\r\n\r\n  const redrawTree = ({\r\n    xScale = (j) => 32+j*0.5,\r\n    yScale = (j) => j*0.7\r\n  }={}) => {\r\n    d3.selectAll(`.listaTree`).remove();\r\n    for (let i of Object.keys(listaTrees.lista)){\r\n      let h = d3.hierarchy(listaTrees.lista[i].getRoot(), function(d){return d.children});\r\n      graph(h,`svg${i}`,i,{\r\n        xScale : fase0.grupos.length > 0? (j)=>267+j*0.5:xScale,\r\n        yScale : yScale,\r\n        class_name: \"listaTree\"\r\n      });\r\n    }\r\n    d3.selectAll(`.listaTreeC`).remove();\r\n    for (let i of Object.keys(listaTreesC.lista)){\r\n      if( props.groupsCluster.filter((d)=>(d.nombre === listaTreesC.lista[i].getRoot().traduccion))[0]){\r\n        d3.selectAll(`#svgC${i}`).remove();\r\n        let h = d3.hierarchy(listaTreesC.lista[i].getRoot(), function(d){return d.children});\r\n        graph(h,`svgC${i}`,i,{\r\n          class_name: \"listaTreeC\"\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  useEffect(()=>{\r\n    redrawTree();\r\n  },[listaTrees.lista,listaTreesC.lista]);\r\n\r\n\r\n  const loadOtherFases = (numFaseActual,item,var_act,tipos_permitidos,avaliable_lists) =>{\r\n    let faseAnterior = \"fase\"+(numFaseActual-1).toString();\r\n    for(let itemm of avaliable_lists){\r\n      let temArr = itemm ===\"a\"? Object.assign([],listaTrees.lista):Object.assign([],listaTreesC.lista);\r\n      for(let arbol of temArr){\r\n        var listaConHojas = arbol.getNodesInLevel(faseAnterior, arbol.getRoot());\r\n        for(let hoja of listaConHojas){\r\n          let tipo_arb= hoja.tipo_arbol;\r\n          if(tipos_permitidos.indexOf(tipo_arb) !== -1){\r\n            getBins(item.bins,item.variable_real,item.tipo,convertConditionsToRequest(hoja.grupo,item.estructura_grupo),tipo_arb === \"tipo0\"?hoja.datasource:\"data\").then((res) => {\r\n              if(res){\r\n                res = res.filter((d)=>(d.igual!==\"no hay dato\"));//o no está en significados\r\n                let tempArr2 = [];\r\n                for (let response of res){\r\n                  let traduccion = null;\r\n                  if(item.tipo === 2 && var_act[0]){\r\n                    let lista_respuestas = var_act[0].significados.filter((f)=>(parseInt(f.valor_db) === parseInt(response.igual)));\r\n                    if(lista_respuestas[0])traduccion=lista_respuestas[0].valor_traducido;\r\n                  }\r\n                  let r = JSON.parse(JSON.stringify(convertToTree(response,item.fase,hoja,hoja.grupo,traduccion,hoja.tipo_arbol,hoja.datasource)));\r\n                  tempArr2.push(r);\r\n                }\r\n                hoja.children = tempArr2;\r\n                //itemm ===\"a\"? setListaTrees((s)=>temArr):setListaTreesC((s)=>temArr);\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  //fase 1\r\n  //recursiveBins(1,pBins,pVar,pTipo,[],[],\"data\",null,null,null,1)\r\n\r\n  function recursiveBins(numFaseActual,pBins,pVar,pTipo,pGrupoNodoPadre,pEstructuraGrupo,pDataSource,pPadre,pIndex,pRoot,pTipoArbol){\r\n    getBins(pBins,pVar,pTipo,convertConditionsToRequest(pGrupoNodoPadre,pEstructuraGrupo),pDataSource).then((res)=>{\r\n      if(res){\r\n        //TRANFORMAR LOS NODOS Y LIMPIARLOS \r\n        let varObject = props.data_real.filter((d)=>(d.nombre_real === pVar))[0];\r\n        let listaNewNodos = [];\r\n        for (let nodo of res){\r\n          let traduccion = null;\r\n          if(pTipo === 2 && varObject){\r\n            let significado = varObject.significados.filter((f)=>( (f.valor_db).toString() === (nodo.igual).toString() ))[0];\r\n            if(significado)traduccion= significado.valor_traducido;\r\n          }\r\n          if((pTipo === 1 && nodo.igual !== \"no hay dato\")||(pTipo === 2 && traduccion !== null && nodo.igual !== \"no hay dato\")){\r\n            let r = JSON.parse(JSON.stringify(convertToTree(nodo,`fase${numFaseActual}`,pPadre,pGrupoNodoPadre,traduccion,pDataSource,pTipoArbol)));\r\n            listaNewNodos.push(r);\r\n          }\r\n        }\r\n        let tempRoots={};//Este arreglo es necesario si solo se activa la fase 1\r\n        if(pRoot){\r\n          pRoot.addChildren(pPadre,listaNewNodos);\r\n        }\r\n        else if(pTipoArbol === 1){\r\n          for(let j=0;j<listaNewNodos.length;j++){\r\n            tempRoots[j]=new TreeClass(listaNewNodos[j]);\r\n          }\r\n        }\r\n\r\n        let nextFase = `fase${numFaseActual+1}`;\r\n        let faseFound = fases.filter((d)=>(d.fase===nextFase));\r\n        if(faseFound[0] && listaNewNodos.length>0){//existe una fase siguiente\r\n          if(faseFound[0].variable_real){//existe una fase siguiente y ya se le asignó una variable\r\n            let i = 0;\r\n            for (let child of listaNewNodos){//BUSCAR LOS HIJOS DE LOS NODOS YA AÑADIDOS AL ARBOL\r\n              if(pRoot){\r\n                recursiveBins(numFaseActual+1,faseFound[0].bins,faseFound[0].variable_real,faseFound[0].tipo,child.grupo,faseFound[0].estructura_grupo,pDataSource,child,pIndex,pRoot,pTipoArbol);\r\n              }\r\n              else if(pTipoArbol === 1){\r\n                recursiveBins(numFaseActual+1,faseFound[0].bins,faseFound[0].variable_real,faseFound[0].tipo,child.grupo,faseFound[0].estructura_grupo,pDataSource,child,i,tempRoots[i],pTipoArbol);\r\n              }\r\n            i+=1;\r\n            }\r\n          }\r\n          else{\r\n            if(pTipoArbol === 1){\r\n              if(pRoot!==null){\r\n                let tempArr = Object.assign({},listaTrees.lista);\r\n                tempArr[pIndex] = pRoot;\r\n                setListaTrees((s)=>({...s,lista:tempArr}));\r\n              }\r\n              else{\r\n                setListaTrees((s)=>({...s,lista:tempRoots}));\r\n              }\r\n            }\r\n            else if(pTipoArbol === 2){\r\n              if(pRoot && pIndex){\r\n                let tempArr = Object.assign({},listaTreesC.lista);\r\n                tempArr[pIndex] = pRoot;\r\n                setListaTreesC((s)=>({...s,lista:tempArr}));\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else{\r\n          if(pTipoArbol === 1){\r\n            if(pIndex && pRoot){\r\n              let tempArr = Object.assign({},listaTrees.lista);\r\n              tempArr[pIndex] = pRoot;\r\n              setListaTrees((s)=>({...s,lista:tempArr}));\r\n            }\r\n            else{\r\n              setListaTrees((s)=>({...s,lista:tempRoots}));\r\n            }\r\n          }\r\n          else if(pTipoArbol === 2){\r\n            if(pRoot && pIndex){\r\n              let tempArr = Object.assign({},listaTreesC.lista);\r\n              tempArr[pIndex] = pRoot;\r\n              setListaTreesC((s)=>({...s,lista:tempArr}));\r\n            }\r\n          }\r\n        }\r\n\r\n      }\r\n      else{\r\n        //mostrar mensaje de error\r\n      }\r\n    });\r\n  }\r\n\r\n  useEffect(()=>{\r\n    let fase1temp = fases.filter((d)=>(d.fase===\"fase1\"))[0];\r\n    if(fase0.grupos && fase1temp.variable_real){\r\n      for (let i of Object.keys(listaTreesC.lista)){\r\n        let refRoot = Object.assign([],[listaTreesC.lista[i]]);\r\n        let refHoja = Object.assign({},listaTreesC.lista[i].getRoot());\r\n        recursiveBins(1,fase1temp.bins,fase1temp.variable_real,fase1temp.tipo,[],fase1temp.estructura_grupo,refHoja.datasource,refHoja,i,refRoot[0],2);\r\n      }\r\n    }\r\n  },[listaTreesC.flag]);\r\n\r\n  useEffect(()=>{\r\n    let fase1temp = fases.filter((d)=>(d.fase===\"fase1\"))[0];\r\n    if(fase1temp.variable_real){\r\n        recursiveBins(1,fase1temp.bins,fase1temp.variable_real,fase1temp.tipo,[],fase1temp.estructura_grupo,\"data\",null,null,null,1);\r\n    }\r\n  },[listaTrees.flag]);\r\n\r\n  function buildArbol(faseComienzo) {\r\n    let numFaseComienzo = parseInt(faseComienzo.slice(-1));\r\n    let fase = fases.filter((d)=>(d.fase===faseComienzo));\r\n    if(faseComienzo ===\"fase0\"){\r\n      let tArr = {};\r\n      let gr = JSON.parse(JSON.stringify(fase0.grupos));\r\n      let indx = 0;\r\n      for (let gr_item2 of gr){\r\n        let gr_item= Object.assign({},gr_item2);\r\n        let r = convertToTree(gr_item,\"fase0\",null,null, gr_item.nombre,gr_item.nombre,2);\r\n        tArr[indx]=new TreeClass(r);\r\n        indx+=1;\r\n      }\r\n      setListaTreesC((s)=>({ lista:tArr, flag:!(s.flag) }));\r\n    }\r\n    if(fase[0]){\r\n      if(faseComienzo ===\"fase1\"){\r\n        setListaTrees((s)=>({ lista:{}, flag:!(s.flag) }));\r\n        for (let i of Object.keys(listaTreesC.lista)){\r\n          let refRoot = Object.assign([],[listaTreesC.lista[i]]);\r\n          let hojas = listaTreesC.lista[i].getNodesInLevel(`fase${numFaseComienzo-1}`,listaTreesC.lista[i].getRoot());\r\n          for(let hoja of hojas){\r\n            recursiveBins(numFaseComienzo,fase[0].bins,fase[0].variable_real,fase[0].tipo,[],fase[0].estructura_grupo,hoja.datasource,hoja,i,refRoot[0],2);\r\n          }\r\n        }  \r\n\r\n      }\r\n      else{\r\n        for (let i of Object.keys(listaTrees.lista)){\r\n          let refRoot = Object.assign([],[listaTrees.lista[i]]);\r\n          let hojas = listaTrees.lista[i].getNodesInLevel(`fase${numFaseComienzo-1}`,listaTrees.lista[i].getRoot());\r\n          for(let hoja of hojas){\r\n            recursiveBins(numFaseComienzo,fase[0].bins,fase[0].variable_real,fase[0].tipo,hoja.grupo,fase[0].estructura_grupo,hoja.datasource,hoja,i,refRoot[0],1);\r\n          }\r\n        }\r\n        for (let i of Object.keys(listaTreesC.lista)){\r\n          let refRoot = Object.assign([],[listaTreesC.lista[i]]);\r\n          let hojas = listaTreesC.lista[i].getNodesInLevel(`fase${numFaseComienzo-1}`,listaTreesC.lista[i].getRoot());\r\n          for(let hoja of hojas){\r\n            recursiveBins(numFaseComienzo,fase[0].bins,fase[0].variable_real,fase[0].tipo,hoja.grupo,fase[0].estructura_grupo,hoja.datasource,hoja,i,refRoot[0],2);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const refresh = () =>{\r\n    setFases([\r\n      {fase:\"fase1\", variable_real: null, tipo: null, significados: [], min: 0, max: 10000, variable: null, etapa:null, tipodivision:\"default\", bins:2, estructura_grupo:[], lista_etapas:[]},\r\n      {fase:\"fase2\", variable_real: null, tipo: null, significados: [], min: 0, max: 10000, variable: null, etapa:null, tipodivision:\"default\", bins:2, estructura_grupo:[], lista_etapas:[]},\r\n      {fase:\"fase3\", variable_real: null, tipo: null, significados: [], min: 0, max: 10000, variable: null, etapa:null, tipodivision:\"default\", bins:2, estructura_grupo:[], lista_etapas:[]},\r\n      {fase:\"fase4\", variable_real: null, tipo: null, significados: [], min: 0, max: 10000, variable: null, etapa:null, tipodivision:\"default\", bins:2, estructura_grupo:[], lista_etapas:[]}\r\n    ]);\r\n    setFase0({fase:\"fase0\",grupos:[]});\r\n    setListaTrees({lista:{},flag:{}});\r\n    setListaTreesC({lista:{},flag:{}});\r\n    d3.selectAll(`.listaTree`).remove();\r\n    d3.selectAll(`.listaTreeC`).remove();\r\n    d3.selectAll(\".listaTreeDownload\").remove();\r\n    d3.selectAll(\".listaTreeCDownload\").remove();\r\n  };\r\n\r\n  const addFase = () => {\r\n    let newFase = \"fase\"+ (fases.length+1).toString();\r\n    setFases([...fases,{fase:newFase, variable_real: null, significados:[], tipo: null, min: 0, max: 10000,variable: null, etapa:null, tipodivision:\"default\", bins:2, estructura_grupo:[]}]);\r\n  };\r\n\r\n  return (\r\n  <div>\r\n    <div className=\"fases fixed-fases\">\r\n    <div>\r\n      <button className=\"settingsArbol\" onClick={() => {downloadSVG()}}><HiSave/></button>\r\n      <button className=\"settingsArbol\" onClick={() => {refresh()}}><AiOutlineReload/></button>\r\n    </div>\r\n      {fase0.grupos.length > 0? (\r\n        <div>\r\n          <div  className=\"fase0\"></div>\r\n        </div>): null\r\n      }    \r\n      {\r\n        fases.map(fase => {\r\n          return (\r\n            <div>\r\n                {getVariables(fase.fase)}\r\n                <div className=\"fases\">\r\n                  {geteventosTemporales(fase.fase,fase.lista_etapas)}\r\n                  <button\r\n                  className=\"settingsFase\"\r\n                  onClick={() => {\r\n                    handleShowFaseSettingsModal(fase)\r\n                  }}\r\n                  >\r\n                    <FcSettings/>\r\n                  </button>\r\n                </div>\r\n            </div>\r\n          );\r\n        })\r\n      }\r\n      <button typr=\"button\" className=\"buttonAddPhase\" onClick= {() => addFase()}>+</button>\r\n    </div>\r\n    <div ref={canvas} id=\"canvas\"></div>\r\n    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />\r\n    <div ref={canvasDownload}></div>\r\n    <CreateGroupTree show={show.show} setShow={setShow} data={show.data} significados={show.significados} datasource={show.datasource} estadisticas={show.estadisticas} data_real={props.data_real}/>\r\n    <FaseSettingsModal show={showFaseSettings.show} setShow={setShowFaseSettings} fase={showFaseSettings.fase} setFases={setFases} fases={fases} buildArbol={buildArbol}/>\r\n  </div>\r\n  );\r\n}\r\n\r\nexport default Tree;","import React from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport {Row, Col, Form} from 'react-bootstrap';\r\nimport ConditionPanelCrearGrupo from \"../tree/ConditionPanelCrearGrupo.js\"\r\n\r\nconst GrupoTreeDetail = (props) => {\r\n\r\n    return (\r\n        <div>\r\n            <Row>\r\n                <h1>Editar: {props.grupo.nombre}</h1>\r\n            </Row>\r\n            <Row>\r\n                <Col md={12}>\r\n                    <Row>\r\n                        <br /> \r\n                        <div className=\"fases\">\r\n                            <p>Número de neonatos: {props.grupo.conteo}</p>\r\n                        </div>\r\n                        <br /> \r\n                        <div className=\"fases\">\r\n                            <p>Porcentaje: {parseFloat(props.grupo.percentage).toFixed(2)}% de 57216</p>\r\n                        </div>\r\n                    </Row>\r\n                    <ConditionPanelCrearGrupo data={props.grupo.condiciones?props.grupo.condiciones:[]} data_real={props.data_real}/>\r\n                    <button className=\"btn btn-primary\">Editar</button>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\nexport default GrupoTreeDetail;","import React from \"react\";\r\nimport SidebarContent from \"./sidebar/sidebarContent\";\r\nimport Tree from \"./tree/tree.js\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getVariables } from \"../services/variablesUtils.js\";\r\nimport GrupoTreeDetail from \"./tree/GrupoTreeDetail.js\";\r\nimport {Modal, Button} from 'react-bootstrap';\r\n\r\n\r\nconst Inicio = () => {\r\n\r\n  const [state,setState] = useState({data_real:[], variables:[], etapas: [\"parto y post-parto\",\"entorno\",\"nacimiento\",\"salida hospitalización\",\"entrada Programa canguro\",\"semana 40\",\"mes 3\",\"mes 6\",\"mes 9\",\"mes 12\",\"entrada posición canguro\",\"salida posición canguro\"]});\r\n  const [groupsCluster, setGroupsCluster] = useState([]);\r\n  const [hide, setHide] = useState(\"\");\r\n  const [selectedItem, setSelectedItem] = useState({});\r\n  const [aux, setAux] = useState({});\r\n  const [show, setShow] = useState({value:false,grupo:{}});\r\n  const [deleted, setDeleted] = useState({});\r\n\r\n  const handleClose = () => setShow({value:false,grupo:{}});\r\n  const handleShow = (groupInfo) => setShow({value:true,grupo:groupInfo});\r\n\r\n  const selectItem= (item) => {\r\n      setSelectedItem(item);\r\n      setHide(\"hideEditDisplay\");\r\n  };\r\n\r\n  const unSelectItem= (item) => {\r\n      setAux(item);\r\n      setSelectedItem({});\r\n      setHide(\"\");\r\n  };\r\n\r\n  function groupBy(arr, criteria) {\r\n    const newObj = arr.reduce(function (acc, currentValue) {\r\n      if (!acc[currentValue[criteria]]) {\r\n        acc[currentValue[criteria]] = [];\r\n      }\r\n      acc[currentValue[criteria]].push({...currentValue, name: currentValue[\"nombre_general\"]+\" \"+currentValue[\"evento\"]});\r\n      return acc;\r\n   }, {});\r\n   return newObj;\r\n  };\r\n\r\n  function getEtapa(r){\r\n    let x = r.etapa?r.etapa:r.evento;\r\n    return { value: x, label: x };\r\n  }\r\n\r\n  useEffect(() => {\r\n    getVariables().then((res) => {\r\n      let r = groupBy(res, \"nombre_general\");\r\n      var arr = [];\r\n      for (var key in r) {\r\n        if (r.hasOwnProperty(key)) {\r\n          arr.push(\r\n            {\r\n              title: key,\r\n              values: r[key],\r\n              etapa : r[key].map(x=>{\r\n                return getEtapa(x)\r\n              })\r\n            }\r\n          );\r\n        }\r\n      }\r\n      setState(s => ({...state, variables:arr, data_real: res}));\r\n    });\r\n  }, []);\r\n\r\n  const transformToSelect = (x) =>{\r\n    return { value: x.title, label: x.title };\r\n  };\r\n\r\n  const transformToSelectEtapas = (x) =>{\r\n    return { value: x, label: x};\r\n  };\r\n\r\n  return (\r\n    <div className=\"row mx-1\">\r\n      <SidebarContent deleted={deleted} handleShow={handleShow} selectItem={selectItem} className=\"col\" setGroupsCluster={setGroupsCluster} groupsCluster={groupsCluster}/>\r\n      <div className=\"col-8\">\r\n        <Tree groupsCluster={groupsCluster} variables_real={state.variables} variables={state.variables.map(x => transformToSelect(x))} etapas={state.etapas.map(x => transformToSelectEtapas(x))} data_real={state.data_real}/>\r\n        <div className={\"fixedEditPanel \"+hide}>\r\n          <div className={\"scroll-panel variableEditAbsolute \" +hide}>\r\n            <button onClick={() => setHide(\"\")} className=\"cancelEditButton\">X</button>   \r\n            <div className=\"marginEditAbsolute\">\r\n              <GrupoTreeDetail grupo={selectedItem} data_real={state.data_real} unSelectItem={unSelectItem} setSelectedItem={setSelectedItem}/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Modal show={show.value} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Eliminar grupo</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>¿Está seguro de que desea eliminar el grupo: {show.grupo.nombre}?</Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Cancelar\r\n          </Button>\r\n          <Button variant=\"danger\" onClick={()=>{\r\n            setDeleted(show.grupo);\r\n            handleClose();\r\n          }}>\r\n            Eliminar grupo\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Inicio;\r\n","export default __webpack_public_path__ + \"static/media/index.2090c3e2.less\";","import { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\r\nimport GroupManage from \"./components/groupManage\";\r\nimport VariableManage from \"./components/variableManage\";\r\nimport TemasManage from \"./components/TemasManage\";\r\nimport Inicio from \"./components/inicio\";\r\nimport \"./assets/index.less\";\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n          <div className=\"container-fluid\">\r\n            <a className=\"navbar-brand\">FC</a>\r\n            <button\r\n              className=\"navbar-toggler\"\r\n              type=\"button\"\r\n              data-bs-toggle=\"collapse\"\r\n              data-bs-target=\"#navbarTogglerDemo02\"\r\n              aria-controls=\"navbarTogglerDemo02\"\r\n              aria-expanded=\"false\"\r\n              aria-label=\"Toggle navigation\"\r\n            >\r\n              <span className=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n            <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\r\n              <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\r\n                <li className=\"nav-item\">\r\n                  <Link className=\"nav-link active\" aria-current=\"page\" to=\"/\">\r\n                    Inicio\r\n                  </Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link className=\"nav-link\" to=\"/groupManage\">\r\n                    Gestión de grupos\r\n                  </Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link className=\"nav-link\" to=\"/variableManage\">\r\n                    Gestión de variables\r\n                  </Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link className=\"nav-link\" to=\"/TemasManage\">\r\n                    Gestión temas de interés\r\n                  </Link>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </nav>\r\n      </div>\r\n      <Switch>\r\n        <Route exact path=\"/\" component={Inicio} />\r\n        <Route exact path=\"/groupManage\" component={GroupManage} />\r\n        <Route exact path=\"/variableManage\" component={VariableManage} />\r\n        <Route exact path=\"/TemasManage\" component={TemasManage} />\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport 'rc-slider/assets/index.css'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}